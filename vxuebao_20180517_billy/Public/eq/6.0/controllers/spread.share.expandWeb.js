angular.module("spread.share.expandWeb",[]),angular.module("spread.share.expandWeb").controller("ExpandWebCtrl",["$rootScope","$scope","$stateParams","SpreadService","ModalService",function(e,n,a,d,t){e.branchid;n.$on("webs.update",function(e){n.expandWebs=d.expandWebs||[]}),n.addExpandWeb=function(a){a.unshift({name:n.scene.name+"_扩展"+(a.length+1),url:n.selectedUrl,showCount:0}),e.$broadcast("make.input.focus")},n.deleteWeb=function(e,a){t.openConfirmDialog({msg:"删除后微课原地址无法访问，相应数据无法查看。"},function(){var t={id:a.id,index:e};a.id?d.deleteWeb(t):n.expandWebs.splice(e,1)})};var i;n.recordName=function(e){i=e},n.updateName=function(e){var a={sceneId:n.sceneId,name:e.name};if(e.id){if(i==e.name)return;a.id=e.id}d.updateName(a).then(function(a){a.data.success&&(e.id||(e.id=a.data.obj.id,e.url=n.selectedUrl+"?qrc="+e.id))},function(e){alert("服务器异常！")})},n.qrcodeList=[{type:1,name:"小（256px）",size:256},{type:2,name:"中（512px）",size:512},{type:3,name:"大（1024px）",size:1024}],n.downloadQrcode=function(n){e.$broadcast("download.canvas",n.size)}}]);