angular.module("aaaa",[]).controller("createForm2",function(t,e,i){t.create=function(){i.path("form/blank");var t={ftype:"0",title:"text",sceneid:"0",photo:"null",istpl:"0",content:"null"};e({url:PREFIX_HOST+"/index.php?c=form&a=design",method:"POST",data:t}).success(function(t){var e=t.fid;console.log(e)}).error(function(t,e,i,n){console.log(t)})}}),angular.module("questionnaire",[]).controller("createForm",["$rootScope","$http","$scope","$timeout","security","$window","$stateParams","$modal",function($rootScope,$http,$scope,$setTimeout,security,$window,$stateParams,$modal){$scope.duoxuan=function(){},$scope.save=function(){var data={type:"1",ipttitle:"text",iptval:"",info:[],sort:"1"};$.ajax({type:"POST",url:PREFIX_HOST+"/index.php?c=form&a=create",data:data,success:function(data){var data=eval("("+data+")");console.log(data)}})},$scope.get=function(){$.ajax({type:"GET",url:PREFIX_HOST+"/index.php?c=form&a=create&fid=1",success:function(data){var data=eval("("+data+")");console.log(data)}})},$("body").on("click",".addSelect",function(){var t=$(this).parent(".div_table_radio_question").find("li:last").after('<li><input type="radio"><div class="select" ng-mouseover="event()">点击编辑选项</div></li>');console.log(t)}),$("body").on("mouseover",".div_question",function(){$(this).css("border","2px solid #f53d05"),$(this).css("cursor","move"),$(this).find(".addSelect").css("display","block")}),$("body").on("mouseout",".div_question",function(){$(this).css("border","2px solid #fff"),$(this).find(".addSelect").css("display","none")}),$(function(){$("#formContent").sortable(),$("#formContent").disableSelection()}),$("body").on("click",".detel",function(){alert(1)}),$("body").on("click",".div_title_question",function(){if(0!=$(this).find("input").length)return!1;window.selectText2=$(this).text();var t=$(this).find("input");if(0!=t.length)return!1;var e=$(this).text();$(this).html('<input type="text" value='+e+">"),$(this).after('<button onclick="confirmaa(this)">确认</button><button class="detel">删除</button><button onclick="cancelbb(this)">取消</button>')}),$scope.createRadioButtonList=function(t){if(console.log(t),!($("#question").length>0))return alert("请添加标题！"),!1;var e=$("#formContent").children(".div_question").length,i=e+1;0==e?$("div #question").after('<div class="div_question"><div class="div_title_question_all"><div class="div_topic_question">'+i+'.</div><div class="div_title_question">点击编辑题目</div><span class="div_if_question">&nbsp*</span></div><div class="div_table_radio_question"><div class="div_table_clear_top"></div><ul><li><input type="radio"><div class="select">点击编辑选项</div></li><li><input type="radio"><div class="select">点击编辑选项</div></li><li><input type="radio"><div class="select">点击编辑选项</div></li></ul><button class="addSelect">添加选项</button><div class="div_table_clear_bottom"></div><hr style="height:1px;border:none;border-top:1px solid #e6e6e6;margin-bottom:0px;" /></div></div>'):$("div #formContent").children(".div_question:last").after('<div class="div_question"><div class="div_title_question_all"><div class="div_topic_question">'+i+'.</div><div class="div_title_question">点击编辑题目</div><span class="div_if_question">&nbsp*</span></div><div class="div_table_radio_question"><div class="div_table_clear_top"></div><ul><li><input type="radio"><div class="select">点击编辑选项</div></li><li><input type="radio"><div class="select">点击编辑选项</div></li><li><input type="radio"><div class="select">点击编辑选项</div></li></ul><button class="addSelect">添加选项</button><div class="div_table_clear_bottom"></div><hr style="height:1px;border:none;border-top:1px solid #e6e6e6;margin-bottom:0px;" /></div></div>')},$("body").on("mouseover",".select",function(){var t=$(this).find("input");return 0==t.length&&void $(this).parent().find("div").after('<span class="tishiyu">点击选项可进行编辑</span>')}),$("body").on("mouseout",".select",function(){$(this).parent().find("span").remove()}),$("body").on("click",".select",function(){if(0!=$(this).find("input").length)return!1;window.selectText=$(this).text();var t=$(this).find("input");if(0!=t.length)return!1;$(this).parent().find("span").remove();var e=$(this).text();$(this).html('<input type="text" value='+e+">"),$(this).after('<button onclick="confirmaa(this)">确认</button><button ng-click="detel()">删除</button><button onclick="cancelaa(this)">取消</button>')}),$scope.createTitle=function(){if(void 0!=document.getElementById("question"))alert("标题已存在，不可重复添加标题");else{$modal.open({windowClass:"console six-contain",templateUrl:BASE_URL+"templates/form/create_name.html",controller:"createNameCtrl",files:["controllers/formController"]})}}}]),angular.module("aaaaa",[]).controller("createNameCtrl",function(t,e){t.cancel=function(){t.$dismiss()},t.getPater=function(){t.title=document.getElementById("nameInput").value,t.desc=document.getElementById("descInput").value;var i=document.createElement("div");i.setAttribute("id","question"),i.innerHTML='<div id="divId"><h1 id="pater_title" style="color:#f53d05">'+t.title+'</h1><div id="pater_desc">'+t.desc+'</div><hr style="height:1px;border:none;border-top:1px dashed #c1c1c1;" /></div>',document.getElementById("formContent").appendChild(i),document.getElementById("divId").addEventListener("mouseover",function(){$("#question").css("border","2px solid #f53d05"),$("#question").css("cursor","Pointer")}),document.getElementById("divId").addEventListener("click",function(){e.open({windowClass:"console six-contain",templateUrl:BASE_URL+"templates/form/create_name.html",controller:"createNameCtrl2",files:["controllers/formController"]})}),document.getElementById("divId").addEventListener("mouseout",function(){$("#question").css("border","2px solid #fff"),$("#question").css("cursor","")}),t.$dismiss()}}),angular.module("createname",[]).controller("createNameCtrl2",function(t){t.getPater=function(){return t.title=document.getElementById("nameInput").value,t.desc=document.getElementById("descInput").value,""==t.title||""==t.desc?(alert("不能为空！"),!1):(document.getElementById("pater_title").innerHTML=t.title,document.getElementById("pater_desc").innerHTML=t.desc,void t.$dismiss())}});