angular.module("scene.edit.select",["services.history","services.scene"]).controller("selectCtrl",["$scope",function(t){t.pasteOpacity=.3,t.$on("select.more",function(){t.safeApply(function(){t.showSelectPanel=!0})}),t.$on("select.less",function(){t.safeApply(function(){t.showSelectPanel=!1})}),t.$on("copyState.update",function(e,i){t.safeApply(function(){t.pasteOpacity=i?1:.3})})}]).directive("eqxAlignLeft",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(t,e,i,o,n){return{link:function(t,r){r.click(function(){t.$apply(function(){n.initCollisionDetectorWithElements();var t=o.bigDetectionBoxPointA.x;angular.forEach(o.editArea.detectionBoxs,function(i){var o=t-i.startPointA.x;o=o==Math.abs(o)?Math.floor(o):Math.ceil(o);var n={top:i.startPosition.top,left:i.startPosition.left+o};i.element.css("left",n.left),e.updateCompPosition(i.element.attr("id"),n,!0)});var r=e.getSceneObj();i.addPageHistory(r.obj.id,r.obj.elements)})})}}}]).directive("eqxAlignHorizontalCenter",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(t,e,i,o,n){return{link:function(t,r){r.click(function(){t.$apply(function(){n.initCollisionDetectorWithElements();var t=o.bigDetectionBoxPointO.x;angular.forEach(o.editArea.detectionBoxs,function(i){var o=t-i.startPointO.x;o=o==Math.abs(o)?Math.floor(o):Math.ceil(o);var n={top:i.startPosition.top,left:i.startPosition.left+o};i.element.css("left",n.left),e.updateCompPosition(i.element.attr("id"),n,!0)});var r=e.getSceneObj();i.addPageHistory(r.obj.id,r.obj.elements)})})}}}]).directive("eqxAlignRight",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(t,e,i,o,n){return{link:function(t,r){r.click(function(){t.$apply(function(){n.initCollisionDetectorWithElements();var t=o.bigDetectionBoxPointB.x;angular.forEach(o.editArea.detectionBoxs,function(i){var o=t-i.startPointB.x;o=o==Math.abs(o)?Math.floor(o):Math.ceil(o);var n={top:i.startPosition.top,left:i.startPosition.left+o};i.element.css("left",n.left),e.updateCompPosition(i.element.attr("id"),n,!0)});var r=e.getSceneObj();i.addPageHistory(r.obj.id,r.obj.elements)})})}}}]).directive("eqxAlignTop",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(t,e,i,o,n){return{link:function(t,r){r.click(function(){t.$apply(function(){n.initCollisionDetectorWithElements();var t=o.bigDetectionBoxPointA.y;angular.forEach(o.editArea.detectionBoxs,function(i){var o=t-i.startPointA.y;o=o==Math.abs(o)?Math.floor(o):Math.ceil(o);var n={top:i.startPosition.top+o,left:i.startPosition.left};i.element.css("top",n.top),e.updateCompPosition(i.element.attr("id"),n,!0)});var r=e.getSceneObj();i.addPageHistory(r.obj.id,r.obj.elements)})})}}}]).directive("eqxAlignVerticalCenter",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(t,e,i,o,n){return{link:function(t,r){r.click(function(){t.$apply(function(){n.initCollisionDetectorWithElements();var t=o.bigDetectionBoxPointO.y;angular.forEach(o.editArea.detectionBoxs,function(i){var o=t-i.startPointO.y;o=o==Math.abs(o)?Math.floor(o):Math.ceil(o);var n={top:i.startPosition.top+o,left:i.startPosition.left};i.element.css("top",n.top),e.updateCompPosition(i.element.attr("id"),n,!0)});var r=e.getSceneObj();i.addPageHistory(r.obj.id,r.obj.elements)})})}}}]).directive("eqxAlignBottom",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(t,e,i,o,n){return{link:function(t,r){r.click(function(){t.$apply(function(){n.initCollisionDetectorWithElements();var t=o.bigDetectionBoxPointB.y;angular.forEach(o.editArea.detectionBoxs,function(i){var o=t-i.startPointB.y;o=o==Math.abs(o)?Math.floor(o):Math.ceil(o);var n={top:i.startPosition.top+o,left:i.startPosition.left};i.element.css("top",n.top),e.updateCompPosition(i.element.attr("id"),n,!0)});var r=e.getSceneObj();i.addPageHistory(r.obj.id,r.obj.elements)})})}}}]).directive("eqxVerticalAverage",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(t,e,i,o,n){return function(r,c){c.click(function(){var c=t.getElements(),a=c.length;2>a||r.$apply(function(){n.initCollisionDetectorWithElements();var t=o.editArea.detectionBoxs;t.sort(function(t,e){return t.startPointO.y>e.startPointO.y});var r=t[0].startPointO.y,c=t[a-1].startPointO.y,l=(c-r)/(a-1);angular.forEach(t,function(t,i){if(0!==i&&i!=a){var o=r+i*l-t.startPointO.y;o=o==Math.abs(o)?Math.floor(o):Math.ceil(o);var n={top:t.startPosition.top+o,left:t.startPosition.left};t.element.css("top",n.top),e.updateCompPosition(t.element.attr("id"),n,!0)}});var s=e.getSceneObj();i.addPageHistory(s.obj.id,s.obj.elements)})})}}]).directive("eqxHorizontalAverage",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(t,e,i,o,n){return function(r,c){c.click(function(){var c=t.getElements(),a=c.length;2>a||r.$apply(function(){n.initCollisionDetectorWithElements();var t=o.editArea.detectionBoxs;t.sort(function(t,e){return t.startPointO.x>e.startPointO.x});var r=t[0].startPointO.x,c=t[a-1].startPointO.x,l=(c-r)/(a-1);angular.forEach(t,function(t,i){if(0!==i&&i!=a){var o=r+i*l-t.startPointO.x;o=o==Math.abs(o)?Math.floor(o):Math.ceil(o);var n={top:t.startPosition.top,left:t.startPosition.left+o};t.element.css("left",n.left),e.updateCompPosition(t.element.attr("id"),n,!0)}});var s=e.getSceneObj();i.addPageHistory(s.obj.id,s.obj.elements)})})}}]).directive("eqxCopy",["selectService","sceneService",function(t,e){return{link:function(t,i){var o=$(i);o.click(function(){e.copyElement()})}}}]).directive("eqxPaste",["sceneService","historyService",function(t,e){return{link:function(i,o){var n=$(o);n.click(function(){if(t.getCopy()){t.pasteElement();var o=t.getSceneObj();e.addPageHistory(o.obj.id,o.obj.elements),i.$apply()}})}}}]).directive("eqxDeleteMore",["$rootScope",function(t){return{link:function(e,i){var o=$(i);o.click(function(){t.$broadcast("element.delete")})}}}]);