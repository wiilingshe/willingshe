angular.module("userCenter.userGuide",[]).controller("userCenterGuideCtrl",["$rootScope","$scope","security","$stateParams","$location",function(i,e,o,t,s){function n(i,o){var t=sessionStorage.getItem(c.id);i&&i[c.id]?i[c.id+"_isShow_"+c.type]?e.isFirstLogin=!1:(t||(e.isCompanyVip=o,e.isFirstLogin=!0,sessionStorage.setItem(c.id,!0)),o&&setTimeout(function(){e.isShowCompany()},100)):(e.isFirstLogin=!0,e.isCompany=!0,e.isCompanyVip=o,u=u||{},u[c.id]=c.type,u[c.id+"_isShow_"+c.type]="2"==c.type,l(g,u),sessionStorage.setItem(c.id,!0))}function r(o){window.localStorage&&(o&&o[i.user.id]?!o[i.user.id+"_isShow_"+c.type]||e.user.checkEmail?e.isFirstLogin=!1:(o[i.user.id+"_isShow_"+c.type]=!0,e.isFirstLogin=!0,"2"!=c.type&&(e.isPerson=!0)):(e.isFirstLogin=!0,"2"!=c.type&&(e.isPerson=!0),o=o||{},o[i.user.id]=1,o[i.user.id+"_isShow_"+c.type]="2"!=c.type,localStorage.setItem("loginInfo",JSON.stringify(o))))}function a(i){return window.localStorage?(u=JSON.parse(localStorage.getItem(i)),!!u&&u):null}function l(i,e){return window.localStorage?void localStorage.setItem(g,JSON.stringify(e)):null}var u,c=o.currentUser,g="userCenterGuide",p="loginInfo",S=null,d=null,y=s.path();"1"==c.type&&y.indexOf("/account")>=0?(S=a(g),n(S,!1),$("#companyVip").css("background","rgba(0,0,0,0.8")):"2"==c.type&&y.indexOf("/main")>=0?(S=a(g),n(S,!0),d=a(p),r(d,!0)):("21"==c.type||"1"==c.type)&&y.indexOf("/main")>=0&&(d=a(p),r(d,!0)),e.showNextGuide=function(){e.isCompany=!1,e.isPerson=!0,$("#companyVip").css("background","rgba(0,0,0,0")},e.isShowCompany=function(){u=a(g),u[c.id+"_isShow_"+c.type]=!u[c.id+"_isShow_"+c.type],localStorage.setItem(g,JSON.stringify(u))},e.closeDiv=function(){e.isPerson=!1,e.isFirstLogin=!1},e.isShowPerson=function(){if(window.localStorage){var e=JSON.parse(localStorage.getItem("loginInfo"));e[i.user.id+"_isShow_"+c.type]=!e[i.user.id+"_isShow_"+c.type],localStorage.setItem("loginInfo",JSON.stringify(e))}}}]);