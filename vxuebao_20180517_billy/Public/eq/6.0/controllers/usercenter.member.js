angular.module("usercenter.member",[]),angular.module("usercenter.member").controller("MemberCtrl",["$scope","$modal","usercenterService","ModalService",function(e,t,r,n){e.pageNo=1,e.pageSize=10,e.setUserInfo=function(){if(1==e.currentUser.type||12==e.currentUser.type)e.userType="个人用户";if(23==e.currentUser.type)e.userType="企业免费用户";else if(2==e.currentUser.type)e.upgradeInfo="已升级";else if(e.upgradeInfo="免费升级",3==e.currentUser.type)e.userType="高级用户";else if(21==e.currentUser.type)e.userType="企业子用户";else if(4==e.currentUser.type)e.userType="服务商用户";else if(e.userType="企业用户",e.currentUser.memberType){if(e.currentUser.expiryTime){var t=(new Date).getTime();e.currentUser.expiryTime<=t&&(e.currentUser.memberType=null)}switch(e.currentUser.memberType){case 1:e.userPay="(体验版)";break;case 2:e.userPay="(高级版)";break;case 3:e.userPay="(专业版)";break;case 4:e.userPay="(畅享版)"}}else e.userPay=""},e.setUserInfo(),e.memberPrivileges=["拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传","拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传","拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传","拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传","拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传","拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传"],e.getXdLog=function(t,n){e.xdType=t,e.currentPage=n,r.getXdlog(t,n,e.pageSize).then(function(t){if(t.data.success){e.xdLogs=t.data.list;for(var r=0;r<e.xdLogs.length;r++)2==e.xdLogs[r].type?e.xdLogs[r].xd="-"+e.xdLogs[r].xd:e.xdLogs[r].xd="+"+e.xdLogs[r].xd;e.totalItems=t.data.map.count,e.currentPage=t.data.map.pageNo,e.toPage=t.data.map.pageNo,e.numPages=Math.ceil(e.totalItems/e.pageSize)}})},e.getXdLog(null,1),e.pageChanged=function(t,r){return 1>r||r>e.numPages&&1!=r?void alert("此页超出范围"):(e.currentPage=r,e.toPage=r,void e.getXdLog(t,r))},e.getXdStatNum=function(){r.getXdStat().then(function(t){e.getXdStat=t.data.map})},e.getXdStatNum(),e.transferXd=function(){t.open({windowClass:"six-contain",templateUrl:BASE_URL+"templates/usercenter.transfer.tpl.html",controller:"UsercentertransferCtrl",resolve:{username:function(){return e.userinfo.loginName}}}).result.then(function(){e.getUserXd(),e.getXdlog(),e.getXdStatNum()},function(){})},e.openInvoice=function(){e.openInvoiceListModal()},e.openInvoiceListModal=function(){t.open({windowClass:"console seven-contain",templateUrl:BASE_URL+"templates/usercenter.console.invoice-list.html",controller:"GetInvoiceListCtrl"}).result.then(function(){},function(){})}}]).controller("PayMentCtrl",["$modal","$scope","qrCodeUrl","type","money","usercenterService","method",function(e,t,r,n,o,a,s){t.qrCodeUrl=r,t.money=o,t.type=n,t.paymented=function(){t.$close()},t.cancel=function(){t.$dismiss()},t.getWeChatUrl=function(){t.wechatUrl||("member"==s?a.getCompanyQrCode(n,0).then(function(e){e.data.success&&(t.wechatUrl=e.data.obj)}):a.getPayXdQrCode(n,0).then(function(e){e.data.success&&(t.wechatUrl=e.data.obj)}))}}]);