angular.module("usercenter.relAccount",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.relAccount").controller("RelAccountCtrl",["$rootScope","$scope","$window","$stateParams","usercenterService","security","$modal","ModalService","$location","userinfo","i18nNotifications","$translate",function(e,r,s,t,i,n,c,o,u,a,l,d){r.user=a,r.bindAccount=function(){return r.user.email?r.user.password?void i.relAccount(a.id,r.user.email,r.user.password).then(function(e){if(200==e.data.code){l.pushForCurrentRoute("email.save.success","notify.success"),/qq/gi.test(r.user.loginName)&&(r.relType="qq"),/weixin/gi.test(r.user.loginName)&&(r.relType="weixin"),/weibo/gi.test(r.user.loginName)&&(r.relType="weibo");var s={type:r.relType,email:angular.copy(r.user.email)};r.$close(s)}else r.relErr=e.data.msg},function(e){r.$dismiss()}):(r.relErr=d.instant("usercenter.account.PASSWORD_ERROR"),void $(".third-pwd").focus()):(r.relErr=d.instant("usercenter.account.ACCOUNT_ERROR"),void $(".third-name").focus())},r.checkUpperCase=function(){/[A-Z]/g.test(r.user.email)&&(r.user.email=r.user.email.toLowerCase(),r.relErr=d.instant("usercenter.account.EMAIL_TIP"))},r.cancel=function(){r.$dismiss()}}]);