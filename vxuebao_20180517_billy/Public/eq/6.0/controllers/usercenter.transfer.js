angular.module("usercenter.transfer",["services.usercenter"]),angular.module("usercenter.transfer").controller("UsercentertransferCtrl",["$rootScope","$scope","$window","$stateParams","usercenterService","security","$modal","ModalService","$location","username","$translate",function(e,r,t,n,a,o,s,c,u,d,i){r.transfer=!0,r.userXd={toUser:"",xdCount:""},r.submit=!1,r.getUserXd=function(){a.getUserXd().then(function(e){e.data.success&&(r.xdCount=e.data.obj)})},r.getUserXd(),r.confirm=function(){r.submit=!0,r.getgiveXd()},r.checkEmailFormat=function(e){return e.toUser?e.toUser==d?(r.mailFormatErr=i.instant("usercenter.userinfo.ACCOUNT_ERROR2"),$(".username").addClass("error"),!1):(r.mailFormatErr="",!0):(r.mailFormatErr=i.instant("usercenter.userinfo.ACCOUNT_ERROR1"),$(".username").focus(),!1)},r.checkXdFormat=function(e){return/^\+?[1-9][0-9]*$/.test(e.xdCount)?r.userXd.xdCount>r.xdCount?(r.xdFormatErr=i.instant("usercenter.userinfo.XD_ERROR2"),!1):(r.xdFormatErr="",!0):(r.xdFormatErr=i.instant("usercenter.userinfo.XD_ERROR1"),!1)},r.getgiveXd=function(){r.checkEmailFormat(r.userXd)&&r.checkXdFormat(r.userXd)&&a.getgiveXd(r.userXd).then(function(e){200==e.data.code?r.$close():1003==e.data.code?r.mailFormatErr=e.data.msg:1010==e.data.code&&(r.xdFormatErr=e.data.msg)})},r.cancel=function(){r.$close()}}]);