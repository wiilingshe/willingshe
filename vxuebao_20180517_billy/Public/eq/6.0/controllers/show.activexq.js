angular.module("activeXq",["services.show","services.activity","app.directives.addBanner"]),angular.module("activeXq").controller("ActiveXqCtrl",["$rootScope","$http","$scope","$translate","showService","activityService","$location","$stateParams","configSerService",function(e,t,a,i,n,s,c,o,g){a.PREFIX_FILE_HOST=PREFIX_FILE_HOST,a.PREFIX_CLIENT_HOST=PREFIX_HOST,a.PREFIX_SERVER_HOST=PREFIX_URL,a.pageNo=1,a.pageSize=16,a.activeId=o.id,a.childCat="active",a.totalItems=0,a.join=function(e){c.path("/show/active/"+e)},a.attend=function(){e.user?c.path("/main"):a.openLogin()};var d=function(){s.activitySceneList(a.activeId,1,a.pageNo,4).then(function(e){if(a.recSceneList=e.data.list,e.data.list)for(var t=0;t<a.recSceneList.length;t++)a.recSceneList[t].headImg?0===a.recSceneList[t].headImg.indexOf("http://")?a.recSceneList[t].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png":a.recSceneList[t].headImg=PREFIX_FILE_HOST+CLIENT_CDN+"assets/images/xiaotouxiang.png":a.recSceneList[t].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"})};d(a.activeId,1,a.pageNo,4);var r=function(){s.activitySceneList(a.activeId,null,a.pageNo,a.pageSize).then(function(e){if(a.sceneList=e.data.list,a.totalItems=e.data.map.count,a.currentPage=e.data.map.pageNo,a.toPage=e.data.map.pageNo,e.data.list)for(var t=0;t<a.sceneList.length;t++)a.sceneList[t].headImg&&0===a.sceneList[t].headImg.indexOf("http://")?a.sceneList[t].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png":a.sceneList[t].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"})};r(a.activeId,null,a.pageNo,a.pageSize),s.activityMes(a.activeId),a.$on("activeMes",function(e,t){a.activeMes=t.data.obj}),a.pageChanged=function(e){return a.pageNo=e,1>e||e>a.totalItems/16+1?void alert(i.instant("show.OVER_PAGE_NUMBER")):void r(a.activeId,null,e,a.pageSize)},a.pageCode="pro_"+a.activeId,g.getFriendLinks(a.pageCode).then(function(e){a.friendLinks=e.data.list,a.friendLinks.length>16&&(a.friendLinks.length=16)})}]);