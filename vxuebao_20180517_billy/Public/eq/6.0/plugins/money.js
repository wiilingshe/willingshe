!function(){var e="ontouchstart"in window,t=e?"touchstart":"mousedown",n=e?"touchmove":"mousemove",a=e?"touchend":"mouseup";window.money={doEffect:function(i,o,r,l){function d(){S=9,k=0,F=0,A.onload=function(){X=A.width,z=A.height,L.drawImage(A,N.width/2-X/2,250)},A.width||(X=200,z=408),D.onload=function(){if(L.drawImage(D,0,0,N.width,N.height),!b){l(eqShow,o,r);for(var e=0;e<r[o-1].elements.length;e++){var t=eqShow.selectElement(r[o-1].elements[e].id);eqxCommon.bindTrigger(t,r[o-1].elements[e])}}p("开始"),w(0),h(),s(),c(r[o-1].properties.effect.tip)}}function c(e){L.font="20px Arial",L.textAlign="center",L.fillStyle="#FDE528",L.fillText(e,N.width/2,50)}function s(){L.fillStyle="rgba(0, 0, 0, 0.8)",L.fillRect(N.width/2-X/2+5,N.height-85,X-10,80),L.stroke(),L.font="16px Arial",L.textAlign="center",L.fillStyle="#FDE528",L.fillText("点击屏幕，开始数钱",N.width/2,N.height-35)}function h(){N.addEventListener(t,function(t){F++,1==F&&g(),T&&(clearInterval(T),_.y-Y<-320&&(Y=0)),q=!0;var n=e?t.targetTouches[0].pageX:t.pageX,a=e?t.targetTouches[0].pageY:t.pageY;_=m(N,n,a),x=_.x,I=_.y}),N.addEventListener(n,function(t){var n=e?t.targetTouches[0].pageX:t.pageX,a=e?t.targetTouches[0].pageY:t.pageY;_=m(N,n,a),E=_.x-x,C=_.y-I,q&&(L.drawImage(R,N.width/2-X/2,_.y),-20>C?(T=setInterval(f,40),k+=100,q=!1):(L.clearRect(0,0,N.width,N.height),L.drawImage(D,0,0,N.width,N.height),L.drawImage(A,N.width/2-X/2,250),R.onload=function(){L.drawImage(R,N.width/2-X/2,_.y),p(S),w(k)}))}),N.addEventListener(a,function(e){x=0,I=0,q&&(q=!1,T&&(clearInterval(T),Y=0,fy=0),-20>C||(L.clearRect(0,0,N.width,N.height),L.drawImage(D,0,0,N.width,N.height),L.drawImage(A,N.width/2-X/2,250),p(S),w(k)))})}function g(){var e=setInterval(function(){S--,p(S),0>=S&&(clearInterval(e),$(N).unbind(t),y())},1e3)}function m(e,t,n){var a=e.getBoundingClientRect();return{x:t-a.left,y:n-a.top}}function f(){L.clearRect(0,0,N.width,N.height),L.drawImage(D,0,0,N.width,N.height),L.drawImage(A,N.width/2-X/2,250),L.drawImage(R,N.width/2-X/2,_.y-Y),p(S),w(k),Y+=150}function p(e){var t=L.createLinearGradient(N.width/2-90,50,N.width/2-90,120);t.addColorStop(0,"#F3AE28"),t.addColorStop(.5,"#FDE528"),t.addColorStop(1,"#F3AE28"),L.fillStyle=t,L.fillRect(N.width/2-80,90,160,40),L.stroke(),L.font="30px Arial",L.textAlign="center",L.fillStyle="#ff0000",isNaN(e)?L.fillText(e,N.width/2,120):L.fillText(e+"秒",N.width/2,120)}function w(e){L.fillStyle="#FFF",L.roundRect(N.width/2-120,160,240,60,10).stroke(),L.font="30px Arial",L.textAlign="center",L.fillStyle="#FDE528",L.fillText("?? "+e,N.width/2,205)}function u(){$("#mask_"+o).remove(),$("#alert_"+o).remove(),b=!0,d()}function v(){$("#mask_"+o).remove(),$("#alert_"+o).remove(),$("#money_"+o).removeClass("lock").addClass("unlock").css("display","none"),$("#page"+o).empty(),l(eqShow,o,r),$("#audio_btn").css("opacity",1),1==o&&playVideo(i);for(var e=0;e<r[o-1].elements.length;e++){var t=eqShow.selectElement(r[o-1].elements[e].id);eqxCommon.bindTrigger(t,r[o-1].elements[e])}}function y(){$('<div class="money_mask"></div>').appendTo($("#page"+o)).attr("id","mask_"+o),$('<div class="money_modal"></div>').appendTo($("#page"+o)).attr("id","alert_"+o),$('<div class="money_img"></div>').appendTo($("#alert_"+o)).attr("id","img_"+o),$('<div class="money_text">恭喜你！<br>2015年每天赚'+k+"元！</div>").appendTo($("#alert_"+o)).attr("id","text_"+o),$('<a class="button tryOnce">再来一次</a>').appendTo($("#alert_"+o)).attr("id","try_"+o),$('<a class="button enterScene">进入微课</a>').appendTo($("#alert_"+o)).attr("id","enter_"+o);var e="标准屌丝";k>=5500&&12e3>=k?e="初级土豪":k>12e3&&(e="高级土豪"),$('<div class="level_text">'+e+"</div>").appendTo("#alert_"+o),$('<div class="tip-text">仅供娱乐</div>').appendTo("#alert_"+o),$("#try_"+o).on("click",function(){u()}),$("#enter_"+o).on("click",function(){v()})}$('<canvas class="money page_effect lock"></canvas>').prependTo($("#page"+o)).attr("id","money_"+o);var _,T,x,I,E,C,S,k,F,b,A,D,R,N=document.getElementById("money_"+o),L=N.getContext("2d"),q=!1,X=0,Y=0,z=0;return N.width=$(".z-current").width(),N.height=$(".z-current").height(),A=new Image,A.src=CLIENT_CDN+"assets/images/money/moremoney.png",D=new Image,D.src=CLIENT_CDN+"assets/images/money/moneybg.png",R=new Image,R.src=CLIENT_CDN+"assets/images/money/flymoney.png",d(),window.money}},CanvasRenderingContext2D.prototype.roundRect=function(e,t,n,a,i){return 2*i>n&&(i=n/2),2*i>a&&(i=a/2),this.beginPath(),this.moveTo(e+i,t),this.strokeStyle="#FDE528",this.arcTo(e+n,t,e+n,t+a,i),this.arcTo(e+n,t+a,e,t+a,i),this.arcTo(e,t+a,e,t,i),this.arcTo(e,t,e+n,t,i),this.closePath(),this.fillStyle="#FDE528",this}}();