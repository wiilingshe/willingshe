angular.module("services.pagetpl",[]),angular.module("services.pagetpl").factory("pageTplService",["$http","$rootScope","$modal","$q","dataCacheService",function(e,t,a,n,i){var p={};return p.getPageTpls=function(t){var a="index.php?c=scene&a=getpagetpl&type="+t,n=new Date;return a+=(/\?/.test(a)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})},p.getMyTplList=function(t){var a="/index.php?c=scene&a=pagelist&id="+t,n=new Date;return a+=(/\?/.test(a)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})},p.getPageTplTypes=function(){var t="index.php?c=statics&a=getPageTplType",a=new Date;return t+=(/\?/.test(t)?"&":"?")+"time="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})},p.getPageTagLabel=function(t){var a="index.php?c=statics&a=tagList&type=1";null!=t&&(a+=(/\?/.test(a)?"&":"?")+"bizType="+t);var n=new Date;return a+=(/\?/.test(a)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})},p.getTagSysListWithType=function(t){var a="index.php?c=upfile&a=systag&type=2";null!=t&&(a+=(/\?/.test(a)?"&":"?")+"bizType="+t);var n=new Date;return a+=(/\?/.test(a)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})},p.getPageTagLabelCheck=function(t){var a="/m/scene/tag/page/list?id="+t,n=new Date;return a+=(/\?/.test(a)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})},p.getPageTplTypestemp=function(t,a,n,p){var s="index.php?c=scene&a=syspagetpl",r=s,l=(new Date,{});return null!=t&&(r+=(/\?/.test(s)?"&":"?")+"tagId="+t,l.tagId=t),a&&(r+=(/\?/.test(s)?"&":"?")+"name="+a,l.name=a),n&&(r+=(/\?/.test(s)?"&":"?")+"pageSize="+n,l.pageSize=n),p&&(r+=(/\?/.test(s)?"&":"?")+"pageNo="+p,l.pageNo=p),i.contains("pageTpl",r)?i.asyncGet("pageTpl",r):(i.setAsyncUrl(r),e({withCredentials:!0,method:"POST",url:PREFIX_URL+s,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(l)}))},p.getPageTplTypestempLongpage=function(t,a,n,p,s){var r=0!=s?"index.php?c=upfile&a=syslist":"index.php?c=scene&a=syspagetpl",l=r,g=(new Date,{}),d=3==s?0:1,c=t.indexOf(",")?t.split(",")[0]:t,T=t.indexOf(",")?t.split(",")[1]:"";return null!=t&&!s&&(l+=(/\?/.test(r)?"&":"?")+"tagId="+t,g.tagId=t),a&&!s&&(l+=(/\?/.test(r)?"&":"?")+"name="+a,g.name=a),n&&(l+=(/\?/.test(r)?"&":"?")+"pageSize="+(s?18:n),g.pageSize=s?18:n),p&&(l+=(/\?/.test(r)?"&":"?")+"pageNo="+p,g.pageNo=p),0!=s?(l+=(/\?/.test(r)?"&":"?")+"fileType="+d,g.fileType=d):(l+=(/\?/.test(r)?"&":"?")+"islong=1",g.islong=1),c&&s&&(l+=(/\?/.test(r)?"&":"?")+"bizType="+c,g.bizType=t),T&&s&&(l+=(/\?/.test(r)?"&":"?")+"&tagId="+T,g.tagId=T),a&&s&&(l+=(/\?/.test(r)?"&":"?")+"key="+a,g.key=a),i.contains("pageTpl",l)?i.asyncGet("pageTpl",l):(i.setAsyncUrl(l),e({withCredentials:!0,method:"POST",url:PREFIX_URL+l,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(g)}))},p.updataChildLabel=function(t,a){var n="m/scene/tag/page/set/?ids="+t;null!=a&&(n+=(/\?/.test(n)?"&":"?")+"pageId="+a);var i=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"POST",url:PREFIX_URL+n})},p}]);