angular.module("services.data",[]),angular.module("services.data").factory("dataService",["$http","$rootScope",function(e,t){var a={};return t.branchid,a.getDatas=function(a){var r="index.php?c=scenedata&a=statSum";return a&&(r+=(/\?/.test(r)?"&":"?")+"user="+a),e({withCredentials:!0,method:"GET",url:PREFIX_URL+r}).then(function(e){if(e.data.success){var a=e.data.obj;t.$broadcast("sceneDatas",a)}})},a.getCustomDatas=function(a){var r="index.php?c=custom&a=statSum";return a&&(r+=(/\?/.test(r)?"&":"?")+"user="+a),e({withCredentials:!0,method:"GET",url:PREFIX_URL+r}).then(function(e){if(e.data.success){var a=e.data.obj;t.$broadcast("customDatas",a)}})},a.getDataBySceneId=function(t,a,r,n){a=a||1,r=r||10;var i="index.php?c=scenedata&a=getdata&id="+t+"&pageNo="+a+"&pageSize="+r;n&&(i+=(/\?/.test(i)?"&":"?")+"user="+n);var d=new Date;return i+="&time="+d.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},a.deleteDataBySceneId=function(t,a){var r="index.php?c=scenedata&a=delete&sceneId="+t+"&dataIds="+a.ids;return e({withCredentials:!0,method:"GET",url:PREFIX_URL+r,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},a.getDataDetail=function(t,a){var r="m/c/detail/"+t;a&&(r+=(/\?/.test(r)?"&":"?")+"user="+a);var n=new Date;return r+=(/\?/.test(r)?"&":"?")+"date="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+r})},a.getDataMessage=function(t){var a="index.php?c=custom&a=newDataScene";t&&(/\?/.test(a),a+="&user="+t);var r=new Date;return/\?/.test(a),a+="&date="+r.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})},a.getAllData=function(t,a,r,n){var i="index.php?c=custom&a=getAllData&pageSize=10&pageNo="+t;a&&(i+=(/\?/.test(i)?"&":"?")+"user="+a),n&&(i+=(/\?/.test(i)?"&":"?")+"origin="+n),r&&(i+=(/\?/.test(i)?"&":"?")+"groupId="+r);var d=new Date;return i+=(/\?/.test(i)?"&":"?")+"time="+d.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},a.getProspectDataAccount=function(t){var a="m/c/prospectCount?time="+(new Date).getTime();return t&&(a+=(/\?/.test(a)?"&":"?")+"user="+t),e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})},a.deleteDataById=function(t){var a="index.php?c=custom&a=delete&id="+t;return e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})},a.saveData=function(t,a){var r=a?"m/c/create":"m/c/save";return e({withCredentials:!0,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},url:PREFIX_URL+r,data:t})},a.getSceneField=function(t){var a="index.php?c=custom&a=formField&id="+t,r=new Date;return a+="?time="+r.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})},a.getPremergeScenes=function(t){var a="index.php?c=custom&a=newDataScene";t&&(a+=(/\?/.test(a)?"&":"?")+"user="+t);var r=new Date;return a+=(/\?/.test(a)?"&":"?")+"time="+r.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})},a.mergeSceneData=function(t,a){var r="index.php?c=custom&a=imps&id="+t;return e({withCredentials:!0,method:"POST",url:PREFIX_S3_URL+r,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)})},a.getOrigin=function(t){var a="index.php?c=custom&a=origin";return t&&(a+=(/\?/.test(a)?"&":"?")+"user="+t),e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})},a.getGroups=function(t){var a="index.php?c=custom&a=grouplist";return t&&(a+=(/\?/.test(a)?"&":"?")+"user="+t),e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})},a.assignGroup=function(t){var a="m/c/group/set?cIds="+t.cIds+"&gIds="+t.gIds;return e({withCredentials:!0,method:"POST",url:PREFIX_URL+a,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},a.deleteAssociation=function(t){var a="m/c/group/unset?cId="+t.cId+"&gId="+t.gId;return e({withCredentials:!0,method:"POST",url:PREFIX_URL+a,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},a.createGroup=function(t){var a="m/c/group/create";return e({withCredentials:!0,method:"POST",url:PREFIX_URL+a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},a.deleteCustomer=function(t){var a="index.php?c=custom&a=delete&ids="+t.ids;return e({withCredentials:!0,method:"POST",url:PREFIX_URL+a,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},a.deleteGroup=function(t){var a={id:t},r="m/c/group/delete";return e({withCredentials:!0,method:"POST",url:PREFIX_URL+r,data:$.param(a),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},a}]);