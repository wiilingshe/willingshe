angular.module("services.mine",[]),angular.module("services.mine").factory("MineService",["$http","$rootScope","$location",function(e,t,a){var n={};return n.getMyScenes=function(r,i,c,d,s,p){var o;o=r?"index.php?c=scene&a=my&type="+r:"index.php?c=scene&a=my",d?o+="&branchid="+d:21==t.user.type?o+="&branchid="+t.user.id:2==t.user.type&&a.search()&&a.search().branchid&&(o+="&branchid="+a.search().branchid),null==i&&(i=1);var u={showData:s,pageNo:i,pageSize:c,user:d,name:p};return o+=(/\?/.test(o)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:PREFIX_URL+o,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(u)}).then(function(e){200==e.data.code&&(n.scenes=e.data,t.$broadcast("get.my.scene.list"))})},n.getLongPage=function(n,r,i,c){var d,s,p=new Date;return s=n?"index.php?c=scene&a=my&islongpage=1&type="+n:"index.php?c=scene&a=my&islongpage=1",21==t.user.type?s+="&branchid="+t.user.id:2==t.user.type&&a.search()&&a.search().branchid&&(s+="&branchid="+a.search().branchid),d={pageNo:i,pageSize:c,name:r},s+="&time="+p.getTime(),e({withCredentials:!0,method:"POST",url:PREFIX_URL+s,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(d)})},n.getPPT=function(){var t,a=new Date;return t="index.php?c=Ppt&a=pptlist&pageNo=1&pageSize=11&time="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})},n.deleteSceneById=function(t,a){var n="index.php?c=scene&a=delscene&id="+t;return a&&(n+="&backup="+a),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},n.getMyHistoryScenes=function(t,a,n){var r="m/scene/recycle/list";return r+="?pageNo="+(t?t:1),r+="&pageSize="+(a?a:12),n&&(r+="&user="+n),r+=(/\?/.test(r)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+r})},n.subAudit=function(t,a){var n="/index.php?c=scene&a=subAudit",r={sceneid:t,isAudit:a};return e({method:"POST",url:PREFIX_URL+n,data:$.param(r),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},n.saveAudit=function(t,a){var n="/index.php?c=scene&a=saveAudit",r={sceneid:t,isAudit:a};return e({method:"POST",url:PREFIX_URL+n,data:$.param(r),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},n}]);