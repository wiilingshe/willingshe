angular.module("services.dataCache",[]),angular.module("services.dataCache").factory("dataCacheService",["$timeout",function(e){var o={};this.asyncUrl="",o.clear=function(e){window.sessionStorage&&(e||sessionStorage.clear(),delete sessionStorage[e])},o.push=function(e,o,t){if(window.sessionStorage){var n=sessionStorage.getItem(e);n=n?JSON.parse(n):{},n[o]=t,sessionStorage.setItem(e,JSON.stringify(n))}},o.get=function(e,o){if(!window.sessionStorage)return null;var t=sessionStorage.getItem(e);return t?(t=JSON.parse(t),t[o]):null},o.asyncGet=function(o,t){var n=sessionStorage.getItem(o);n=JSON.parse(n);var r=e(function(){return n[t]});return r},o.contains=function(e,o){if(!window.sessionStorage)return!1;var t=sessionStorage[e];return!!t&&(t=JSON.parse(t),!!t[o])},o.setAsyncUrl=function(e){this.asyncUrl=e},o.getAsyncUrl=function(){return this.asyncUrl};var t={photo:[],audio:[]};return o.pushUsedFile=function(e,o){var n;switch(e){case 1:n=t.photo;break;case 2:n=t.audio}n.indexOf(o)>-1||n.push(o)},o.removeUsedFile=function(e,o){var n;switch(e){case 1:n=t.photo;break;case 2:n=t.audio}var r=n.indexOf(o);-1!=r&&n.splice(r,1)},o.getUsedFiles=function(){for(var e=[],o=[],n=0;n<t.photo.length;n++)t.photo[n]&&(e.push(t.photo[n]),o.push(1));for(var r=0;r<t.audio.length;r++){if(!t.audio[r])return;e.push(t.audio[r]),o.push(2)}return 0!==e.length?{file:e.join(","),type:o.join(",")}:void 0},o.clearUsedFiles=function(){t={photo:[],audio:[]}},o}]),angular.module("services.dataCache").factory("storageService",[function(){var e={};return e.clear=function(){window.localStorage&&localStorage.clear()},e.push=function(e,o){window.localStorage&&localStorage.setItem(e,o)},e.get=function(e){return window.localStorage?localStorage.getItem(e):void 0},e}]);