angular.module("security.login.toolbar",[]).directive("loginToolbar",["security","$rootScope","$location",function(e,t,n){var r={templateUrl:"/Public/eq/6.0/templates/login.toolbar.tpl.html",restrict:"E",replace:!0,scope:!0,link:function(r,o,s,i){r.PREFIX_FILE_HOST=PREFIX_FILE_HOST,r.isAuthenticated=e.isAuthenticated,r.login=e.showLogin,r.logout=e.logout,r.requestResetPassword=e.requestResetPassword,r.isAdvancedUser=t.isAdvancedUser,r.isEditor=t.isEditor,r.isVendorUser=t.isVendorUser,r.$watch(function(){return e.currentUser},function(e){r.currentUser=e,r.currentUser.headImg?/^http.*/.test(e.headImg)&&(r.headImg=e.headImg):r.headImg=CLIENT_CDN+"assets/images/defaultuser.jpg"}),r.$on("headImg.change",function(e,t){r.currentUser.headImg=t}),r.$on("minusCount",function(e,t){r.count-=t,r.newMsgCount=r.count>9?"9+":r.count}),r.changeCurrent=function(){t.branchid="",n.search("branchid",null),n.path("/usercenter/children")},r.openMsgPanel=function(){!$(".mes_con").hasClass("open")}}};return r}]);