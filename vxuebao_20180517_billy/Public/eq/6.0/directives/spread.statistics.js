angular.module("spread.statistics",["services.spread","app.directives.lineChart","app.directives.pieChart","app.directives.numChangeAnim"]),function(){function e(e){e=e||window.echarts,angular.module("spread.statistics").directive("eqdMap",["$parse",function(a){return{restrict:"E",scope:{option:"@"},template:'<div class="echartView"></div>',link:function(a,t,i){a.echart=e.init(t.find("div")[0],"gray");var r={title:{text:"",subtext:"",x:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",x:"right",data:["pv"]},dataRange:{min:0,max:2500,text:["高","低"],calculable:!0,precision:0},series:[{name:"pv",type:"map",mapType:"china",itemStyle:{normal:{label:{show:!0}},emphasis:{color:"#59c3f9",label:{show:!0}}},data:a.data}]};a.$watch("option",function(e,t){if(e!=t){var i=JSON.parse(e);r.series[0].data=i.data,r.dataRange.max=i.maxValue,a.echart.clear(),a.echart.setOption(r)}})}}}]).directive("eqdLineChart",[function(){return{restrict:"E",scope:{option:"@",legend:"@"},template:'<div class="lineChartView"></div>',link:function(a,t,i){a.echart=e.init(t.find("div")[0],"macarons");var r=JSON.parse(i.legend),n={title:{text:"访问次数",x:"center"},legend:{data:r,x:"left"},calculable:!0,tooltip:{trigger:"axis"},xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[{name:"",type:"line",smooth:!0,itemStyle:{normal:{areaStyle:{type:"default"}}},data:[]}]},s=JSON.parse(i.option);n.xAxis[0].data=s.xAxis;for(var d=1;d<s.data.length;d++)n.series[d]=angular.copy(n.series[0]);for(var c=0;c<s.data.length;c++)n.series[c].name=r[c],n.series[c].data=s.data[c];a.echart.setOption(n),a.$watch("option",function(e,t){if(e!=t){var i=JSON.parse(e);n.xAxis[0].data=i.xAxis;for(var r=0;r<i.data.length;r++)n.series[r].data=i.data[r];a.echart.showLoading(),a.echart.hideLoading(),a.echart.setOption(n,!0)}})}}}]).directive("eqdPieChart",[function(){return{restrict:"E",scope:{data:"@",name:"@"},template:'<div class="pieChartView"></div>',link:function(a,t,i){a.echart=e.init(t.find("div")[0],"macarons");for(var r=JSON.parse(i.data),n=[],s=0;s<r.length;s++)n.push(r[s].name);var d={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",x:"left",data:n},calculable:!0,series:[{name:i.name,type:"pie",radius:"55%",center:["50%","60%"],data:r}]};a.echart.setOption(d),a.$watch("data",function(e,t){if(e!=t){var i=JSON.parse(e);d.series[0].data=i;for(var r=[],n=0;n<i.length;n++)r.push(i[n].name);d.legend.data=r,a.echart.showLoading(),a.echart.hideLoading(),a.echart.setOption(d)}})}}}])}"function"==typeof define&&define.amd?require(["echarts"],function(a){e(a)}):e()}();