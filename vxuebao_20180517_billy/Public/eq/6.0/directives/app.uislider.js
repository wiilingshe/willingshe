angular.module("app.directives.uislider",[]).value("uiSliderConfig",{}).directive("uiSlider",["uiSliderConfig","$timeout",function(e,i){return e=e||{},{require:"ngModel",compile:function(){return function(n,a,r,o){function u(e,i){return i?parseFloat(e):parseInt(e,10)}function t(){a.slider("destroy")}var l=angular.extend(n.$eval(r.uiSlider)||{},e),s={min:null,max:null},d=["min","max","step"],c=!angular.isUndefined(r.useDecimals),f=function(){angular.isArray(o.$viewValue)&&l.range!==!0&&(console.warn("Change your range option of ui-slider. When assigning ngModel an array of values then the range option should be set to true."),l.range=!0),angular.forEach(d,function(e){angular.isDefined(r[e])&&(l[e]=u(r[e],c))}),a.slider(l),f=angular.noop};angular.forEach(d,function(e){r.$observe(e,function(i){i&&(f(),l[e]=u(i,c),a.slider("option",e,u(i,c)),o.$render())})}),r.$observe("disabled",function(e){f(),a.slider("option","disabled",!!e)}),n.$watch(r.uiSlider,function(e){f(),void 0!==e&&a.slider("option",e)},!0),i(f,0,!0),a.bind("slide",function(e,i){o.$setViewValue(i.values||i.value),n.$apply()}),o.$render=function(){f();var e=l.range===!0?"values":"value";l.range||!isNaN(o.$viewValue)||o.$viewValue instanceof Array?l.range&&!angular.isDefined(o.$viewValue)&&(o.$viewValue=[0,0]):o.$viewValue=0,l.range===!0&&(angular.isDefined(l.min)&&l.min>o.$viewValue[0]&&(o.$viewValue[0]=l.min),angular.isDefined(l.max)&&l.max<o.$viewValue[1]&&(o.$viewValue[1]=l.max),o.$viewValue[0]>o.$viewValue[1]&&(s.min>=o.$viewValue[1]&&(o.$viewValue[0]=s.min),s.max<=o.$viewValue[0]&&(o.$viewValue[1]=s.max)),s.min=o.$viewValue[0],s.max=o.$viewValue[1]),a.slider(e,o.$viewValue)},n.$watch(r.ngModel,function(e){l.range===!0&&o.$render()},!0),a.bind("$destroy",t);var v=$('<div class="ui-slider-progress-bar"></div>');a.append(v);var g=n.$watch(r.ngModel,function(e){setTimeout(function(){v.css("width",$(".ui-slider-handle",a).css("left"))})},!0);a.bind("$destroy",function(){g()})}}}}]).directive("uiSliderT",["$rootScope",function(e){var i=$(document);return{require:"ngModel",template:'<div class="slider-con"></div>',link:function(n,a,r,o){a.on("$destroy",function(){a.unbind("mousedown")});var u="string"==typeof r.min?r.min:-Number.MAX_VALUE,t="string"==typeof r.max?r.max:Number.MAX_VALUE,l="string"==typeof r.step?r.step:1,s=t/100,d="string"==typeof r.max?r.fixed:0;o.$render=function(){a.find(".slider-con").css("width",100*o.$modelValue/t+"%")},a.mousedown(function(a){a.stopPropagation();var c,$=a.offsetX,f=a.pageX,v=function(e){e.stopPropagation(),c=e.pageX-f;var i=+(($+c)*s/l).toFixed(d)*l;i>t?i=+t:u>i&&(i=+u),o.$viewValue!=i&&(o.$setViewValue(i),o.$render(),n.$apply())},g=function(){i.unbind("mouseup",g),i.unbind("mousemove",v),r.hisRecords&&e.$broadcast("hisChange")};i.mousemove(v),i.mouseup(g)}),a.click(function(i){i.stopPropagation(),o.$setViewValue(+(i.offsetX*t/100/l).toFixed(d)*l),o.$render(),n.$apply(),r.hisRecords&&e.$broadcast("hisChange")})}}}]);