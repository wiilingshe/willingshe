!function(e,n,a){function i(e){this.mode=p.MODE_8BIT_BYTE,this.data=e}function o(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=new Array}function l(e,t){if(e.length==a)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var i=0;i<e.length-n;i++)this.num[i]=e[i+n]}function r(e,t){this.totalCount=e,this.dataCount=t}function c(){this.buffer=new Array,this.length=0}function d(e){for(var t=0,n=0;n<e.length;n++){var a=e.charCodeAt(n);a>=1&&126>=a||a>=65376&&65439>=a?t++:t+=2}return t}!function(e){function t(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=t(e,"eqShow",Object);return t(n,"templateParser",function(){var e={};return function(n,a){if("hasOwnProperty"===n)throw new Error("hasOwnProperty is not a valid name");return a&&e.hasOwnProperty(n)&&(e[n]=null),t(e,n,a)}})}function n(){templateParser=t(e)}var a=e.eqShow||(e.eqShow={});n(a)}(e,document),function(e){e.fn.qrcode=function(t){"string"==typeof t&&(t={text:t}),t=e.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:g.H,background:"#ffffff",foreground:"#000000"},t);var n=function(){var e=new o(t.typeNumber,t.correctLevel);e.addData(t.text),e.make();var n=document.createElement("canvas");n.width=t.width,n.height=t.height;for(var a=n.getContext("2d"),i=t.width/e.getModuleCount(),s=t.height/e.getModuleCount(),l=0;l<e.getModuleCount();l++)for(var r=0;r<e.getModuleCount();r++){a.fillStyle=e.isDark(l,r)?t.foreground:t.background;var c=Math.ceil((r+1)*i)-Math.floor(r*i),d=Math.ceil((l+1)*i)-Math.floor(l*i);a.fillRect(Math.round(r*i),Math.round(l*s),c,d)}return n},a=function(){var n=new o(t.typeNumber,t.correctLevel);n.addData(t.text),n.make();for(var a=e("<table></table>").css("width",t.width+"px").css("height",t.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",t.background),i=t.width/n.getModuleCount(),s=t.height/n.getModuleCount(),l=0;l<n.getModuleCount();l++)for(var r=e("<tr></tr>").css("height",s+"px").appendTo(a),c=0;c<n.getModuleCount();c++)e("<td></td>").css("width",i+"px").css("background-color",n.isDark(l,c)?t.foreground:t.background).appendTo(r);return a};return this.each(function(){var i="canvas"==t.render?n():a();e(i).appendTo(this)})}}(jQuery),i.prototype={getLength:function(){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},o.prototype={addData:function(e){var t=new i(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(0>e||this.moduleCount<=e||0>t||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var e=1;for(e=1;40>e;e++){for(var t=r.getRSBlocks(e,this.errorCorrectLevel),n=new c,a=0,i=0;i<t.length;i++)a+=t[i].dataCount;for(var i=0;i<this.dataList.length;i++){var s=this.dataList[i];n.put(s.mode,4),n.put(s.getLength(),m.getLengthInBits(s.mode,e)),s.write(n)}if(n.getLengthInBits()<=8*a)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[n][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var n=-1;7>=n;n++)if(!(-1>=e+n||this.moduleCount<=e+n))for(var a=-1;7>=a;a++)-1>=t+a||this.moduleCount<=t+a||(this.modules[e+n][t+a]=n>=0&&6>=n&&(0==a||6==a)||a>=0&&6>=a&&(0==n||6==n)||n>=2&&4>=n&&a>=2&&4>=a)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;8>n;n++){this.makeImpl(!0,n);var a=m.getLostPoint(this);(0==n||e>a)&&(e=a,t=n)}return t},createMovieClip:function(e,t,n){var a=e.createEmptyMovieClip(t,n),i=1;this.make();for(var s=0;s<this.modules.length;s++)for(var o=s*i,l=0;l<this.modules[s].length;l++){var r=l*i,c=this.modules[s][l];c&&(a.beginFill(0,100),a.moveTo(r,o),a.lineTo(r+i,o),a.lineTo(r+i,o+i),a.lineTo(r,o+i),a.endFill())}return a},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=m.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var a=e[t],i=e[n];if(null==this.modules[a][i])for(var s=-2;2>=s;s++)for(var o=-2;2>=o;o++)this.modules[a+s][i+o]=-2==s||2==s||-2==o||2==o||0==s&&0==o}},setupTypeNumber:function(e){for(var t=m.getBCHTypeNumber(this.typeNumber),n=0;18>n;n++){var a=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=a}for(var n=0;18>n;n++){var a=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=a}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,a=m.getBCHTypeInfo(n),i=0;15>i;i++){var s=!e&&1==(a>>i&1);6>i?this.modules[i][8]=s:8>i?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(var i=0;15>i;i++){var s=!e&&1==(a>>i&1);8>i?this.modules[8][this.moduleCount-i-1]=s:9>i?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,a=this.moduleCount-1,i=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var l=0;2>l;l++)if(null==this.modules[a][o-l]){var r=!1;s<e.length&&(r=1==(e[s]>>>i&1));var c=m.getMask(t,a,o-l);c&&(r=!r),this.modules[a][o-l]=r,i--,-1==i&&(s++,i=7)}if(a+=n,0>a||this.moduleCount<=a){a-=n,n=-n;break}}}},o.PAD0=236,o.PAD1=17,o.createData=function(e,t,n){for(var a=r.getRSBlocks(e,t),i=new c,s=0;s<n.length;s++){var l=n[s];i.put(l.mode,4),i.put(l.getLength(),m.getLengthInBits(l.mode,e)),l.write(i)}for(var d=0,s=0;s<a.length;s++)d+=a[s].dataCount;if(i.getLengthInBits()>8*d)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*d+")");for(i.getLengthInBits()+4<=8*d&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*d)&&(i.put(o.PAD0,8),!(i.getLengthInBits()>=8*d));)i.put(o.PAD1,8);return o.createBytes(i,a)},o.createBytes=function(e,t){for(var n=0,a=0,i=0,s=new Array(t.length),o=new Array(t.length),r=0;r<t.length;r++){var c=t[r].dataCount,d=t[r].totalCount-c;a=Math.max(a,c),i=Math.max(i,d),s[r]=new Array(c);for(var p=0;p<s[r].length;p++)s[r][p]=255&e.buffer[p+n];n+=c;var g=m.getErrorCorrectPolynomial(d),u=new l(s[r],g.getLength()-1),h=u.mod(g);o[r]=new Array(g.getLength()-1);for(var p=0;p<o[r].length;p++){var f=p+h.getLength()-o[r].length;o[r][p]=f>=0?h.get(f):0}}for(var v=0,p=0;p<t.length;p++)v+=t[p].totalCount;for(var b=new Array(v),y=0,p=0;a>p;p++)for(var r=0;r<t.length;r++)p<s[r].length&&(b[y++]=s[r][p]);for(var p=0;i>p;p++)for(var r=0;r<t.length;r++)p<o[r].length&&(b[y++]=o[r][p]);return b};for(var p={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},g={L:1,M:0,Q:3,H:2},u={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},m={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;m.getBCHDigit(t)-m.getBCHDigit(m.G15)>=0;)t^=m.G15<<m.getBCHDigit(t)-m.getBCHDigit(m.G15);return(e<<10|t)^m.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;m.getBCHDigit(t)-m.getBCHDigit(m.G18)>=0;)t^=m.G18<<m.getBCHDigit(t)-m.getBCHDigit(m.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return m.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case u.PATTERN000:return(t+n)%2==0;case u.PATTERN001:return t%2==0;case u.PATTERN010:return n%3==0;case u.PATTERN011:return(t+n)%3==0;case u.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case u.PATTERN101:return t*n%2+t*n%3==0;case u.PATTERN110:return(t*n%2+t*n%3)%2==0;case u.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new l([1],0),n=0;e>n;n++)t=t.multiply(new l([1,h.gexp(n)],0));return t},getLengthInBits:function(e,t){if(t>=1&&10>t)switch(e){case p.MODE_NUMBER:return 10;case p.MODE_ALPHA_NUM:return 9;case p.MODE_8BIT_BYTE:return 8;case p.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(27>t)switch(e){case p.MODE_NUMBER:return 12;case p.MODE_ALPHA_NUM:return 11;case p.MODE_8BIT_BYTE:return 16;case p.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(41>t))throw new Error("type:"+t);switch(e){case p.MODE_NUMBER:return 14;case p.MODE_ALPHA_NUM:return 13;case p.MODE_8BIT_BYTE:return 16;case p.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,a=0;t>a;a++)for(var i=0;t>i;i++){for(var s=0,o=e.isDark(a,i),l=-1;1>=l;l++)if(!(0>a+l||a+l>=t))for(var r=-1;1>=r;r++)0>i+r||i+r>=t||(0!=l||0!=r)&&o==e.isDark(a+l,i+r)&&s++;s>5&&(n+=3+s-5)}for(var a=0;t-1>a;a++)for(var i=0;t-1>i;i++){var c=0;e.isDark(a,i)&&c++,e.isDark(a+1,i)&&c++,e.isDark(a,i+1)&&c++,e.isDark(a+1,i+1)&&c++,(0==c||4==c)&&(n+=3)}for(var a=0;t>a;a++)for(var i=0;t-6>i;i++)e.isDark(a,i)&&!e.isDark(a,i+1)&&e.isDark(a,i+2)&&e.isDark(a,i+3)&&e.isDark(a,i+4)&&!e.isDark(a,i+5)&&e.isDark(a,i+6)&&(n+=40);for(var i=0;t>i;i++)for(var a=0;t-6>a;a++)e.isDark(a,i)&&!e.isDark(a+1,i)&&e.isDark(a+2,i)&&e.isDark(a+3,i)&&e.isDark(a+4,i)&&!e.isDark(a+5,i)&&e.isDark(a+6,i)&&(n+=40);for(var d=0,i=0;t>i;i++)for(var a=0;t>a;a++)e.isDark(a,i)&&d++;var p=Math.abs(100*d/t/t-50)/5;return n+=10*p}},h={glog:function(e){if(1>e)throw new Error("glog("+e+")");return h.LOG_TABLE[e]},gexp:function(e){for(;0>e;)e+=255;for(;e>=256;)e-=255;return h.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},f=0;8>f;f++)h.EXP_TABLE[f]=1<<f;for(var f=8;256>f;f++)h.EXP_TABLE[f]=h.EXP_TABLE[f-4]^h.EXP_TABLE[f-5]^h.EXP_TABLE[f-6]^h.EXP_TABLE[f-8];for(var f=0;255>f;f++)h.LOG_TABLE[h.EXP_TABLE[f]]=f;l.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var a=0;a<e.getLength();a++)t[n+a]^=h.gexp(h.glog(this.get(n))+h.glog(e.get(a)));return new l(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=h.glog(this.get(0))-h.glog(e.get(0)),n=new Array(this.getLength()),a=0;a<this.getLength();a++)n[a]=this.get(a);for(var a=0;a<e.getLength();a++)n[a]^=h.gexp(h.glog(e.get(a))+t);return new l(n,0).mod(e)}},r.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],r.getRSBlocks=function(e,t){var n=r.getRsBlockTable(e,t);if(n==a)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var i=n.length/3,s=new Array,o=0;i>o;o++)for(var l=n[3*o+0],c=n[3*o+1],d=n[3*o+2],p=0;l>p;p++)s.push(new r(c,d));return s},r.getRsBlockTable=function(e,t){switch(t){case g.L:return r.RS_BLOCK_TABLE[4*(e-1)+0];case g.M:return r.RS_BLOCK_TABLE[4*(e-1)+1];case g.Q:return r.RS_BLOCK_TABLE[4*(e-1)+2];case g.H:return r.RS_BLOCK_TABLE[4*(e-1)+3];default:return a}},c.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;t>n;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},function(e){e.fn.slides=function(t){return t=e.extend({},e.fn.slides.option,t),this.each(function(){function n(){clearInterval(c.data("interval"))}function a(){t.pause?(clearTimeout(c.data("pause")),clearInterval(c.data("interval")),pauseTimeout=setTimeout(function(){clearTimeout(c.data("pause")),playInterval=setInterval(function(){i("next",h)},t.play),c.data("interval",playInterval)},t.pause),c.data("pause",pauseTimeout)):n()}function i(n,a,i){if(!o&&s){switch(o=!0,n){case"next":b=w,v=w+1,v=p===v?0:v,r=2*g,n=2*-g,w=v;break;case"prev":b=w,v=w-1,v=-1===v?p-1:v,r=0,n=0,w=v;break;case"pagination":v=parseInt(i,10),b=e("."+t.paginationClass+" li.current a",c).attr("rel"),v>b?(r=2*g,n=2*-g):(r=0,n=0),w=v}"fade"===a?(t.animationStart(),t.crossfade?d.children(":eq("+v+")",c).css({zIndex:10}).fadeIn(t.fadeSpeed,function(){d.children(":eq("+b+")",c).css({display:"none",zIndex:0}),e(this).css({zIndex:0}),t.animationComplete(v+1),o=!1}):(t.animationStart(),d.children(":eq("+b+")",c).fadeOut(t.fadeSpeed,function(){t.autoHeight?d.animate({height:d.children(":eq("+v+")",c).outerHeight()},t.autoHeightSpeed,function(){d.children(":eq("+v+")",c).fadeIn(t.fadeSpeed)}):d.children(":eq("+v+")",c).fadeIn(t.fadeSpeed,function(){e.browser.msie&&e(this).get(0).style.removeAttribute("filter")}),t.animationComplete(v+1),o=!1}))):(d.children(":eq("+v+")").css({left:r,display:"block"}),t.autoHeight?(t.animationStart(),d.animate({left:n,height:d.children(":eq("+v+")").outerHeight()},t.slideSpeed,function(){d.css({left:-g}),d.children(":eq("+v+")").css({left:g,zIndex:5}),d.children(":eq("+b+")").css({left:g,display:"none",zIndex:0}),t.animationComplete(v+1),o=!1})):(t.animationStart(),d.animate({left:n},t.slideSpeed,function(){d.css({left:-g}),d.children(":eq("+v+")").css({left:g,zIndex:5}),d.children(":eq("+b+")").css({left:g,display:"none",zIndex:0}),t.animationComplete(v+1),o=!1}))),t.pagination&&(e("."+t.paginationClass+" li.current",c).removeClass("current"),e("."+t.paginationClass+" li a:eq("+v+")",c).parent().addClass("current"))}}e("."+t.container,e(this)).children().wrapAll('<div class="slides_control"/>');var s,o,l,r,c=e(this),d=e(".slides_control",c),p=d.children().size(),g=d.children().outerWidth(),u=d.children().outerHeight(),m=t.start-1,h=t.effect.indexOf(",")<0?t.effect:t.effect.replace(" ","").split(",")[0],f=t.effect.indexOf(",")<0?h:t.effect.replace(" ","").split(",")[1],v=0,b=0,y=0,w=0;if(!(2>p)){if(0>m&&(m=0),m>p&&(m=p-1),t.start&&(w=m),t.randomize&&d.randomize(),e("."+t.container,c).css({overflow:"hidden",position:"relative"}),d.css({position:"relative",width:3*g,height:u,left:-g}),d.children().css({position:"absolute",top:0,left:g,zIndex:0,display:"none"}),t.autoHeight&&d.animate({height:d.children(":eq("+m+")").outerHeight()},t.autoHeightSpeed),t.preload&&"IMG"==d.children()[0].tagName){c.css({background:"url("+t.preloadImage+") no-repeat 50% 50%"});var x=e("img:eq("+m+")",c).attr("src")+"?"+(new Date).getTime();e("img:eq("+m+")",c).attr("src",x).load(function(){e(this).fadeIn(t.fadeSpeed,function(){e(this).css({zIndex:5}),c.css({background:""}),s=!0})})}else d.children(":eq("+m+")").fadeIn(t.fadeSpeed,function(){s=!0});t.bigTarget&&(d.children().css({cursor:"pointer"}),d.children().click(function(){return i("next",h),!1})),t.hoverPause&&t.play&&(d.children().bind("mouseover",function(){n()}),d.children().bind("mouseleave",function(){a()})),t.generateNextPrev&&(e("."+t.container,c).after('<a href="#" class="'+t.prev+'">Prev</a>'),e("."+t.prev,c).after('<a href="#" class="'+t.next+'">Next</a>')),e("."+t.next,c).click(function(e){e.preventDefault(),t.play&&a(),i("next",h)}),e("."+t.prev,c).click(function(e){e.preventDefault(),t.play&&a(),i("prev",h)}),t.generatePagination?(c.append("<ul class="+t.paginationClass+"></ul>"),d.children().each(function(){e("."+t.paginationClass,c).append("<li><a rel="+y+' href="#">'+(y+1)+"</a></li>"),y++})):e("."+t.paginationClass+" li a",c).each(function(){e(this).attr("rel",y),y++}),e("."+t.paginationClass+" li a:eq("+m+")",c).parent().addClass("current"),e("."+t.paginationClass+" li a",c).click(function(){return t.play&&a(),l=e(this).attr("rel"),w!=l&&i("pagination",f,l),!1}),t.play&&(playInterval=setInterval(function(){i("next",h)},t.play),c.data("interval",playInterval))}})},e.fn.slides.option={preload:!1,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:!1,next:"next",prev:"prev",pagination:!0,generatePagination:!0,paginationClass:"pagination",fadeSpeed:350,slideSpeed:350,start:1,effect:"slide",crossfade:!1,randomize:!1,play:0,pause:0,hoverPause:!1,autoHeight:!1,autoHeightSpeed:350,bigTarget:!1,animationStart:function(){},animationComplete:function(){}},e.fn.randomize=function(t){function n(){return Math.round(Math.random())-.5}return e(this).each(function(){var i=e(this),s=i.children(),o=s.length;if(o>1){s.hide();var l=[];for(f=0;o>f;f++)l[l.length]=f;l=l.sort(n),e.each(l,function(e,n){var o=s.eq(n),l=o.clone(!0);l.show().appendTo(i),t!==a&&t(o,l),o.remove()})}})}}(jQuery),function(t){function n(e,t,n,a){var i={},s=e/t,o=n/a;return s>o?(i.width=n,i.height=n/s):(i.height=a,i.width=a*s),i}var a=t.templateParser("jsonParser",function(){function e(e){return function(t,n){e[t]=n}}function t(e,t){var n=r[(""+e.type).charAt(0)](e);if(n){var a=$('<li comp-drag comp-rotate class="comp-resize comp-rotate inside" id="inside_'+n.id+'" num="'+e.num+'" ctype="'+e.type+'"></li>');3!=(""+e.type).charAt(0)&&1!=(""+e.type).charAt(0)&&a.attr("comp-resize",""),"p"==(""+e.type).charAt(0)&&a.removeAttr("comp-rotate"),1==(""+e.type).charAt(0)&&a.removeAttr("comp-drag"),2==(""+e.type).charAt(0)&&a.addClass("wsite-text"),4==(""+e.type).charAt(0)&&(e.properties.imgStyle&&$(n).css(e.properties.imgStyle),a.addClass("wsite-image")),5==(""+e.type).charAt(0)&&a.addClass("wsite-input"),6==(""+e.type).charAt(0)&&a.addClass("wsite-button"),8==(""+e.type).charAt(0)&&a.addClass("wsite-button"),"v"==(""+e.type).charAt(0)&&a.addClass("wsite-video"),a.mouseenter(function(){$(this).addClass("inside-hover")}),a.mouseleave(function(){$(this).removeClass("inside-hover")});var i=$('<div class="element-box">').append($('<div class="element-box-contents">').append(n));return a.append(i),5!=(""+e.type).charAt(0)&&6!=(""+e.type).charAt(0)||"edit"!=t||$(n).before($('<div class="element" style="position: absolute; height: 100%; width: 100%;">')),e.css&&(a.css({width:320-parseInt(e.css.left)}),a.css({width:e.css.width,height:e.css.height,left:e.css.left,top:e.css.top,zIndex:e.css.zIndex,bottom:e.css.bottom,transform:e.css.transform}),i.css(e.css).css({width:"100%",height:"100%",transform:"none"}),i.children(".element-box-contents").css({width:"100%",height:"100%"}),4!=(""+e.type).charAt(0)&&"p"!=(""+e.type).charAt(0)&&$(n).css({width:e.css.width,height:e.css.height})),a}}function n(e){for(var t=0;t<e.length-1;t++)for(var n=t+1;n<e.length;n++)if(parseInt(e[t].css.zIndex,10)>parseInt(e[n].css.zIndex,10)){var a=e[t];e[t]=e[n],e[n]=a}for(var i=0;i<e.length;i++)e[i].css.zIndex=i+1+"";return e}function a(e,a,i){a=a.find(".edit_area").css({overflow:"hidden"});var s,o=e.elements;if(o)for(o=n(o),s=0;s<o.length;s++)if(3==o[s].type){var l=r[(""+o[s].type).charAt(0)](o[s]);"edit"==i&&c[(""+o[s].type).charAt(0)]&&c[(""+o[s].type).charAt(0)](l,o[s])}else{var g=t(o[s],i);if(!g)continue;a.append(g);for(var u=0;u<p.length;u++)p[u](g,o[s]);d[(""+o[s].type).charAt(0)]&&d[(""+o[s].type).charAt(0)](g,o[s]),"edit"==i&&c[(""+o[s].type).charAt(0)]&&c[(""+o[s].type).charAt(0)](g,o[s])}}function i(){return c}function s(){return r}function o(e){p.push(e)}function l(){return p}var r={},c={},d={},p=[],g=containerWidth=320,u=containerHeight=486,m=1,h=1,f={getComponents:s,getEventHandlers:i,addComponent:e(r),bindEditEvent:e(c),bindAfterRenderEvent:e(d),addInterceptor:o,getInterceptors:l,wrapComp:t,mode:"view",parse:function(e){var t=$('<div class="edit_wrapper"><ul id="edit_area'+e.def.id+'" comp-droppable paste-element class="edit_area weebly-content-area weebly-area-active"></div>'),n=this.mode=e.mode;this.def=e.def,"view"==n&&v++;var i=$(e.appendTo);return containerWidth=i.width(),containerHeight=i.height(),m=g/containerWidth,h=u/containerHeight,a(e.def,t.appendTo($(e.appendTo)),n)}};return f});a.addInterceptor(function(e,t){function n(e,t,n){e.css("animation",t+" "+n.duration+"s ease "+n.delay+"s "+(n.countNum?n.countNum:"")),"view"==a.mode?(n.count&&e.css("animation-iteration-count","infinite"),e.css("animation-fill-mode","both")):(e.css("animation-iteration-count","1"),e.css("animation-fill-mode","backwards")),n.linear&&e.css("animation-timing-function","linear")}if(t.properties&&t.properties.anim){var i=t.properties.anim,s=$(".element-box",e),o="";0===i.type&&(o="fadeIn"),1===i.type&&(0===i.direction&&(o="fadeInLeft"),1===i.direction&&(o="fadeInDown"),2===i.direction&&(o="fadeInRight"),3===i.direction&&(o="fadeInUp")),6===i.type&&(o="wobble"),5===i.type&&(o="rubberBand"),7===i.type&&(o="rotateIn"),8===i.type&&(o="flip"),9===i.type&&(o="swing"),2===i.type&&(0===i.direction&&(o="bounceInLeft"),1===i.direction&&(o="bounceInDown"),2===i.direction&&(o="bounceInRight"),3===i.direction&&(o="bounceInUp")),3===i.type&&(o="bounceIn"),4===i.type&&(o="zoomIn"),10===i.type&&(o="fadeOut"),11===i.type&&(o="flipOutY"),12===i.type&&(o="rollIn"),13===i.type&&(o="lightSpeedIn"),t.properties.anim.trigger?e.click(function(){n(s,o,t.properties.anim)}):n(s,o,t.properties.anim)}}),a.addComponent("1",function(e){var t=document.createElement("div");if(t.id=e.id,t.setAttribute("class","element comp_title"),e.content&&(t.textContent=e.content),e.css){var n,a=e.css;for(n in a)t.style[n]=a[n]}if(e.properties.labels)for(var i=e.properties.labels,s=0;s<i.length;s++)$('<a class = "label_content" style = "display: inline-block;">').appendTo($(t)).html(i[s].title).css(i[s].color).css("width",100/i.length+"%");return t}),a.addComponent("2",function(e){var t=document.createElement("div");return t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_paragraph editable-text"),e.content&&(t.innerHTML=e.content),t.style.cursor="default",t}),a.addComponent("3",function(e){var t=document.getElementsByClassName("edit_area")[0];return"view"==a.mode&&(t=document.getElementById("edit_area"+a.def.id)),t=$(t).parent()[0],e.properties.bgColor&&(t.style.backgroundColor=e.properties.bgColor),e.properties.imgSrc&&(t.style.backgroundImage=/^http.*/.test(e.properties.imgSrc)?"url("+e.properties.imgSrc+")":"url("+(e.properties.imgSrc.indexOf("syspic/")>=0?PREFIXSYS_FILE_HOST:USER_FILE_HOST)+e.properties.imgSrc+")",t.style.backgroundOrigin="element content-box",t.style.backgroundSize="cover",t.style.backgroundPosition="50% 50%"),t}),a.addComponent("4",function(e){var t=document.createElement("img");return t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_image editable-image"),t.src=/^http.*/.test(e.properties.src)?e.properties.src:(e.properties.src.indexOf("syspic/")>=0?PREFIXSYS_FILE_HOST:USER_FILE_HOST)+e.properties.src,t}),a.addComponent("v",function(e){var t=document.createElement("a");return t.setAttribute("class","element video_area"),t.id=e.id,t.setAttribute("ctype",e.type),e.properties.src&&t.setAttribute("videourl",e.properties.src),t}),a.addComponent("5",function(e){var t=document.createElement("textarea");return t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_input editable-text"),e.properties.required&&t.setAttribute("required",e.properties.required),e.properties.placeholder&&t.setAttribute("placeholder",e.properties.placeholder),t.setAttribute("name","eq[f_"+e.id+"]"),t.style.width="100%",t}),a.addComponent("p",function(e){if(e.properties&&e.properties.children){var t=320,a=160,i=e.css.width||t,s=e.css.height||a,o=$('<div id="'+e.id+'" class="slide element" ctype="'+e.type+'"></div>'),l=$("<ul>").appendTo(o),r=$('<div class="dot">').appendTo(o);for(var c in e.properties.children){var d=n(e.properties.children[c].width,e.properties.children[c].height,i,s),p=$('<img data-src="'+(e.properties.children[c].src.indexOf("syspic/")>=0?PREFIXSYS_FILE_HOST:USER_FILE_HOST)+e.properties.children[c].src+'" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC">');p.css({width:d.width,height:d.height});var g=$("<li>").css({lineHeight:s+"px"});g.append(p),l.append(g),r.append($("<span>"))}return INTERVAL_OBJ[e.id]&&(clearInterval(INTERVAL_OBJ[e.id]),delete INTERVAL_OBJ[e.id]),o.attr("length",e.properties.children.length).attr("autoscroll",e.properties.autoPlay).attr("interval",e.properties.interval),o.swipeSlide({autoSwipe:e.properties.autoPlay,continuousScroll:!0,speed:e.properties.interval,transitionType:"cubic-bezier(0.22, 0.69, 0.72, 0.88)",lazyLoad:!0,width:i},function(t,n){r.children().eq(t).addClass("cur").siblings().removeClass("cur"),n&&(INTERVAL_OBJ[e.id]=n)}),o.get(0)}}),a.addComponent("6",function(e){var t=document.createElement("button");if(t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_button editable-text"),e.properties.title){var n=e.properties.title.replace(/ /g,"&nbsp;");t.innerHTML=n}return t.style.width="100%",t}),a.addComponent("8",function(e){var t=document.createElement("a");if(t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_anchor editable-text"),e.properties.title){var n=e.properties.title.replace(/ /g,"&nbsp;");$(t).html(n),"view"==a.mode&&$(t).attr("href","tel:"+e.properties.number)}return t.style.cursor="default",t.style.width="100%",t}),a.addComponent("7",function(e){var t=document.createElement("div");if(t.id="map_"+e.id,t.setAttribute("class","element comp_map_wrapper"),e.content&&(t.textContent=e.content),e.css){var n,a=e.css;for(n in a)t.style[n]=a[n]}return t.style.height="250px",t}),a.bindAfterRenderEvent("1",function(e,t){if(e=$("div",e)[0],"view"==a.mode&&1==t.type){var n=t.properties.labels;for(key in n)!function(t){$($(e).find(".label_content")[t]).on("click",function(){pageScroll(n[t])})}(key)}}),a.bindAfterRenderEvent("8",function(e,t){e=$("a",e)[0];var n={id:t.sceneId,num:t.properties.number};if("view"==a.mode){var i=function(){$.ajax({cache:!0,type:"POST",url:PREFIX_S1_URL+"scenedata-links",data:$.param(n),async:!1,error:function(){alert("Connection error")},success:function(){}})};e.addEventListener("click",i)}}),a.bindAfterRenderEvent("4",function(t,n){"view"==a.mode&&n.properties.url&&$(t).click(function(){var t=n.properties.url;isNaN(t)?e.open(t):pageScroll(t)})}),a.bindAfterRenderEvent("v",function(e,t){"view"==a.mode&&$(e).click(function(){$(e).hide(),$("#audio_btn").hasClass("video_exist")&&($("#audio_btn").hide(),$("#media")[0].pause()),$('<div class="video_mask" id="mask_'+t.id+'"></div>').appendTo($(e).closest(".m-img")),$('<a class = "close_mask" id="close_'+t.id+'"></a>').appendTo($(e).closest(".m-img")),$(t.properties.src).appendTo($("#mask_"+t.id)).attr("style","position: absolute;top:0; min-height: 45%; max-height: 100%; top: 20%;").attr("width","100%").removeAttr("height"),$("#close_"+t.id).bind("click",function(){$(e).show(),$("#mask_"+t.id).remove(),$("#close_"+t.id).remove(),$("#audio_btn").hasClass("video_exist")&&$("#audio_btn").show(function(){$(this).hasClass("off")||$("#media")[0].play()})})})}),a.bindAfterRenderEvent("2",function(e){for(var t=$(e).find("a[data]"),n=0;n<t.length;n++)if(t[n]&&"view"==a.mode){$(t[n]).css("color","#428bca").css("cursor","pointer");var i=$(t[n]).attr("data");!function(e){$(t[n]).click(function(){pageScroll(e)})}(i)}}),a.bindAfterRenderEvent("6",function(e){if(e=$("button",e)[0],"view"==a.mode){var t=function(t,n){var a=!0,i=$(e).parents("ul"),s={};$("textarea",i).each(function(){if(a){if("required"==$(this).attr("required")&&""==$(this).val().trim())return alert($(this).attr("placeholder")+"为必填项"),void(a=!1);if("502"==$(this).attr("ctype")){var e=new RegExp(/(\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$/g);if(!e.test($(this).val()))return alert("手机号码格式错误"),void(a=!1)}if("503"==$(this).attr("ctype")){var t=new RegExp(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/g);if(!t.test($(this).val()))return alert("邮箱格式错误"),void(a=!1)}s[$(this).attr("name")]=$(this).val()}}),a&&$.ajax({cache:!0,type:"POST",url:JSON_URL+"?c=scenedata&a=add&id="+n,data:$.param(s),async:!1,error:function(){alert("Connection error")},success:function(){$(t).unbind("click").click(function(){alert("请不要重复提交")}),alert("提交成功")}})},n=a.def.sceneId;$(e).bind("click",function(){t(this,n)})}}),a.bindAfterRenderEvent("7",function(e,t){var n=new BMap.Map("map_"+t.id,{
enableMapClick:!1}),a=new BMap.Point(t.properties.x,t.properties.y),i=new BMap.Marker(a);n.addOverlay(i);var s=new BMap.Label(t.properties.markTitle,{offset:new BMap.Size(20,(-10))});i.setLabel(s),n.disableDoubleClickZoom(),n.centerAndZoom(a,15)})}(e.eqShow);var v=0,b=!1;n.module("app",["ngRoute","home","sample","main","reg","scene","my","data","error","usercenter","ui.bootstrap","ui.grid","ui.grid.selection","ngSanitize","ui.select","services.i18nNotifications","services.httpRequestTracker","services.sample","security","app.upload","templates-app","templates-common","ui.sortable","I18N.MESSAGES","app.directives.notification"]),n.module("app").config(["$stateProvider","$locationProvider","securityAuthorizationProvider","uiSelectConfig",function(e,t,n,a){a.theme="bootstrap",e.when("/home",{templateUrl:"main/main.tpl.html",controller:"MainCtrl"}).when("/home/:id",{templateUrl:"main/main.tpl.html",controller:"MainCtrl"}).when("/reg",{templateUrl:"reg/reg.tpl.html",controller:"RegCtrl"}).when("/otherRegister",{templateUrl:"common/security/register/otherRegister.tpl.html"}).when("/agreement",{templateUrl:"reg/agreement.tpl.html"}).when("/about",{templateUrl:"about.tpl.html"}).when("/error/:codeid",{templateUrl:"error/error.tpl.html",controller:"ErrorCtrl"}).when("/sample",{templateUrl:"sample/sample.tpl.html",controller:"SampleCtrl"}).when("/main",{templateUrl:"main/main.tpl.html",controller:"MainCtrl",resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/main/spread",{templateUrl:"main/spread.tpl.html",controller:"SpreadCtrl",resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/main/customer",{templateUrl:"main/customer.tpl.html",controller:"CustomerCtrl",resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/main/spread/:sceneId",{templateUrl:"main/spreadDetail.tpl.html",controller:"SpreadDetailCtrl",reloadOnSearch:!0,resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/usercenter/:id",{templateUrl:"usercenter/usercenter.tpl.html",controller:"UserCenterCtrl",resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/scene",{templateUrl:"scene/scene.tpl.html",controller:"SceneCtrl",resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/scene/create/:sceneId",{templateUrl:"scene/create.tpl.html",controller:"CreateSceneCtrl",reloadOnSearch:!1,resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/my/scene/:sceneId",{templateUrl:"my/myscene.tpl.html",controller:"MySceneCtrl",reloadOnSearch:!1,resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/my/sceneSetting/:sceneId",{templateUrl:"my/sceneSetting.tpl.html",controller:"SceneSettingCtrl",resolve:{authenticatedUser:n.requireAuthenticatedUser}}).otherwise({redirectTo:"/main"})}]),n.module("app").run(["security","$rootScope",function(e,t){t.CLIENT_CDN=CLIENT_CDN,e.requestCurrentUser()}]),n.module("app").run(["$state","$rootScope","$location",function(e,t,n){var a=n.path;n.path=function(i,s){if(s===!1)var o=e.current,l=t.$on("$locationChangeSuccess",function(){e.current=o,l()});return a.apply(n,[i])}}]),n.module("app").controller("AppCtrl",["SpreadService","$window","$scope","$rootScope","$location","$modal","security","sceneService","$stateParams","$timeout","i18nNotifications",function(e,t,n,a,i,s,o,l,r,c,d){n.notifications=d,n.removeNotification=function(e){d.remove(e)},n.weiChatCode=i.absUrl().split("&")[0].split("=")[1],n.$on("$locationChangeStart",function(){if("/home/login"!=i.path()||o.currentUser?"/home/register"!=i.path()||o.currentUser||o.showRegister():o.showLogin(),i.search().resetToken){var e=i.search().resetToken;o.requestResetPassword(e)}});var p=new RegExp("token"),g=new RegExp("uid"),u=t.location.hash;if(g.test(u)){var m=u.split("=");n.weiboAccessToken=m[1].split("&")[0],n.weiboRemindIn=m[2].split("&")[0],n.weiboExpires=m[3].split("&")[0],n.weiboUId=m[4].split("&")[0]}else p.test(u)&&(n.accessToken=u.split("&")[0].split("=")[1],n.expiresIn=u.split("&")[1].split("=")[1]);n.openLogin=function(){i.path("/home/login",!1)},n.openRegister=function(){i.path("/home/register",!1)},n.isAuthenticated=o.isAuthenticated,n.$watch(function(){return o.currentUser},function(t){t&&(n.user=t,a.user=t,n.isEditor=o.isEditor(),a.isEditor=o.isEditor(),n.isAdvancedUser=o.isAdvancedUser(),a.isAdvancedUser=o.isAdvancedUser(),n.isVendorUser=o.isVendorUser(),a.isVendorUser=o.isVendorUser(),e.getActivityDetail("001").then(function(e){var t=e.data.obj;if(t){a.sendXd=t;var n=(new Date).getTime();n>=t.startDate&&n<=t.endDate&&(a.sendXd.state=1)}}))},!0),n.openReg=function(){s.open({windowClass:"request_contain",templateUrl:"usercenter/request_reg.tpl.html",controller:"UsercenterrequestCtrl",resolve:{}}).result.then(function(){},function(){})},n.login=function(){o.showLogin()},n.register=function(){o.showRegister()},n.showToolBar=function(){return!(i.$$path.indexOf("/scene/create")>=0)},n.showPanel=function(){$("#helpPanel").stop().animate({right:"0"},500)},n.hidePanel=function(){$("#helpPanel").stop().animate({right:"-120"},500)},n.suggestionUrl="javascript:void(0);",n.feedbackUrl="javascript:void(0);",n.qqChatUrl="http://shang.qq.com/wpa/qunwpa?idkey=4a2d63670009360b878aa9a1e1437ef4caec132f74a0e2c4df4a686168cc73dc",n.helpUrl="javascript:void(0);",n.createSkillUrl="javascript:void(0);"}]).filter("fixnum",function(){return function(e){var t=e;return e>=1e4&&1e8>e?t=(e/1e4).toFixed(1)+"万":e>=1e8&&(t=(e/1e8).toFixed(1)+"亿"),t}}),n.module("data.associate",[]),n.module("data.associate").controller("AssociateFieldCtrl",["$scope","dataService",function(e,t){e.staticFileds=[{id:"name",name:"姓名"},{id:"mobile",name:"手机"},{id:"email",name:"邮箱"},{id:"sex",name:"性别"},{id:"company",name:"公司"},{id:"job",name:"职位"},{id:"address",name:"地址"},{id:"tel",name:"电话"},{id:"website",name:"个人网站"},{id:"qq",name:"QQ"},{id:"weixin",name:"微信"},{id:"remark",name:"其它"}],e.associateMap=[],e.person={},e.selectScene=function(n){t.getSceneField(n).then(function(t){e.fields=t.data.list})},e.associate=function(t){for(var n=0;n<e.associateMap.length;n++)n!=t&&e.associateMap[n].id==e.associateMap[t].id&&(e.associateMap[n]=null)},e.confirm=function(){for(var n={},a=0,i=e.associateMap;a<i.length;a++)i[a]&&(n[i[a].id]=e.fields[a].id);t.mergeSceneData(e.person.selected.ID,n).then(function(){e.$close()},function(){e.$dismiss()})},e.cancel=function(){e.$dismiss()},t.getPremergeScenes().then(function(t){e.PremergeScenes=t.data.list})}]).filter("propsFilter",function(){return function(e,t){var a=[];return n.isArray(e)?e.forEach(function(e){for(var n=!1,i=Object.keys(t),s=0;s<i.length;s++){var o=i[s],l=t[o].toLowerCase();if(-1!==e[o].toString().toLowerCase().indexOf(l)){n=!0;break}}n&&a.push(e)}):a=e,a}}),n.module("data",["data.associate"]),n.module("data",["services.usercenter"]),n.module("data").controller("editDataCtrl",["$rootScope","$scope","$window","$stateParams","usercenterService","security","$modal","ModalService","$location","dataService","id",function(e,t,n,a,i,s,o,l,r,c,d){t.PREFIX_FILE_HOST=PREFIX_FILE_HOST,t.PREFIX_SERVER_HOST=PREFIX_URL,t.PREFIX_CLIENT_HOST=PREFIX_HOST,t.sexOptions=[{id:0,name:"请选择性别"},{id:1,name:"男"},{id:2,name:"女"}],t.sex=t.sexOptions[0];var p={};t.getDataDetail=function(e){t.dataId=e,c.getDataDetail(e).then(function(e){t.dataDetail=e.data.obj,p=e.data.obj;var n=t.dataDetail.email,a=t.dataDetail.sex,i=t.dataDetail.mobile,s=t.dataDetail.tel;t.formEmails=n?n.split(","):[""],t.formMobiles=i?i.split(","):[""],t.formTels=s?s.split(","):[""],a&&(t.sex="男"==a?t.sexOptions[1]:t.sexOptions[2])})},t.getDataDetail(d),t.updateData=function(e,n){var a=e.name,i={};if("email"==a||"mobile"==a||"tel"==a){i[a]="";var s,o=[];for(s=0;s<n.length;s++)n[s]&&o.push(n[s]);for(s=0;s<o.length-1;s++)i[a]+=o[s]+",";i[a]+=o[s]}else i[a]=t.dataDetail[a];p[a]=i[a]},t.updateSex=function(e){var n={};n.id=t.dataId,n.sex=0!==e.id?e.name:"",p.sex=n.sex},t.formEmails=[""],t.formMobiles=[""],t.formTels=[""],t.removeInputs=function(e,n,a){if(a.length>1){if(!a[e])return void a.splice(e,1);a.splice(e,1),t.updateData({name:n},a)}else 1===a.length&&""!==a[0]&&(a[e]="",t.updateData({name:n},a))},t.addInputs=function(e){e.push("")},t.saveData=function(){t.$close(p),c.saveData($.param(p))}}]),n.module("confirm-dialog",[]).controller("ConfirmDialogCtrl",["$scope","confirmObj",function(e,t){e.confirmObj=t,e.ok=function(){e.$close()},e.cancel=function(){e.$dismiss()}}]),n.module("message-dialog",[]).controller("MessageDialogCtrl",["$scope","msgObj",function(e,t){e.msgObj=t,e.close=function(){e.$close()},e.cancel=function(){e.$dismiss()}}]),n.module("error",["services.sample"]),n.module("error").controller("ErrorCtrl",["$rootScope","$http","$scope","$timeout","security","$window","sampleService",function(){}]),n.module("home",["services.sample","app.directives.addelement","services.scene","app.directives.qrcode","app.directives.loading"]),n.module("home").controller("HomeCtrl",["$rootScope","$http","$scope","$timeout","security","$window","sampleService","sceneService","$stateParams","$state","$location",function(e,t,n,a,i,o,l,r,c,d,p){if(n.showCode=!1,n.isAuthenticated=i.isAuthenticated,n.PREFIX_FILE_HOST=PREFIX_FILE_HOST,n.PREFIX_CLIENT_HOST=PREFIX_HOST,n.PREFIX_SERVER_HOST=PREFIX_URL,n.scene||(n.scene={}),n.weiChatCode&&i.weiChatLogin(n.weiChatCode).then(function(e){200==e.data.code&&p.path("main")}),n.typeindex="all",n.pageSize=9,n.pageNo=1,n.getHomes=function(e,t,a,i){n.typeindex=e,l.getSamples(t,a,i).then(function(e){n.homes=e.data.list},function(){})},n.getSceneType=function(){r.getSceneType().then(function(e){n.sceneTypes=e.data.list})},n.getSceneType(),n.getHomes("all",null,1,9),n.accessToken&&n.expiresIn){var g="https://graph.qq.com/oauth2.0/me?access_token="+n.accessToken;$.ajax({type:"get",url:g,dataType:"jsonp",jsonp:"jsoncallback",jsonpCallback:"callback",xhrFields:{withCredentials:!0},success:function(e){n.openId=e.openid,n.appId=e.client_id;var t={email:"",password:"",openId:n.openId,accessToken:n.accessToken,type:"qq",expires:n.expiresIn};i.thirdPartLogin(t)}})}if(n.weiboAccessToken&&n.weiboRemindIn&&n.weiboExpires&&n.weiboUId){var u={email:"",password:"",type:"weibo",openId:n.weiboUId,accessToken:n.weiboAccessToken,expires:n.weiboExpires};i.thirdPartLogin(u)}n.getBannerStyle=function(){return{width:255*n.imgArr.length+"px"}},n.goLeft=function(){$(".img_box").is(":animated")||$(".img_box").css("left").split("px")[0]>=0||$(".img_box").animate({left:"+=255"},1e3)},n.goRight=function(){$(".img_box").is(":animated")||parseInt($(".img_box").css("left").split("px")[0],10)<=-($(".img_box").width()-20-1e3)||$(".img_box").animate({left:"-=255"},1e3)},a(function(){$(".banner1").animate({right:"0px"},200)},700),a(function(){$(".banner2").animate({right:"0px"},200)},1e3),a(function(){$(".banner3").animate({right:"0px"},200,function(){$(".banner_left").fadeIn(800)})},1300),n.load2=function(){$("#eq_main").scroll(function(){s=$("#eq_main").scrollTop(),s>100?$(".scroll").css("display","block"):$(".scroll").css("display","none")})},n.getSamplesPV=function(){l.getSamplesPV().then(function(e){n.SamplesPVs=e.data,n.dayTop=n.SamplesPVs.obj.dayTop,n.monthTop=n.SamplesPVs.obj.monthTop,n.weekTop=n.SamplesPVs.obj.weekTop,n.page="month"},function(){})}}]),n.module("main.data",["app.directives.dataDraggable"]),n.module("main.data").controller("CustomerCtrl",["$scope","$state","$location","dataService","$modal","ModalService",function(e,t,n,a,i,s){function o(t){t||(t=1),a.getAllData(t).then(function(t){e.customerDatas=t.data.list,e.totalItems=t.data.map.count,e.currentPage=t.data.map.pageNo,e.toPage=""})}e.PREFIX_URL=PREFIX_URL,e.isActive="customer",e.select=0,e.staticFileds=[{id:"name",name:"姓名"},{id:"mobile",name:"手机"},{id:"email",name:"邮箱"},{id:"sex",name:"性别"},{id:"company",name:"公司"},{id:"job",name:"职位"},{id:"address",name:"地址"},{id:"tel",name:"电话"},{id:"website",name:"个人网站"},{id:"qq",name:"QQ"},{id:"weixin",name:"微信"},{id:"remark",name:"其它"}],e.selectScene=function(t,n){e.selectedSceneId=t,a.getSceneField(t).then(function(t){e.fields=t.data.list,e.select=n,$(".list_attribute").html("拖拽到此处")})},e.clickScene=function(){n.path("main")},e.clickSpread=function(){n.path("main/spread")},e.clickCustomer=function(){n.path("main/customer")},e.editCustomer=function(t){e.getDataDetail(t.id),e.editData=!0},e.removeCustomer=function(t){s.openConfirmDialog({msg:"确定删除此条数据?"},function(){a.deleteDataById(t.id).then(function(){o(1===e.customerDatas.length&&e.currentPage>1?e.currentPage-1:e.currentPage),r()})})},e.addColor=function(t){e.trIndex=t},e.removeColor=function(){e.trIndex=-1},e.totalItems=0,e.currentPage=0,e.toPage="",e.pageChanged=function(t){return 1>t||t>e.totalItems/10+1?void alert("此页超出范围"):void o(t)},e.editCustom=function(t,n){i.open({windowClass:"addCustom",templateUrl:"data/editData.tpl.html",controller:"editDataCtrl",resolve:{id:function(){return t.id}}}).result.then(function(t){e.customerDatas[n].name=t.name,e.customerDatas[n].mobile=t.mobile},function(){})};var l=function(){a.getProspectDataAccount().then(function(t){e.prospectDataAccount=t.data.obj})},r=function(){a.getAllDataCount().then(function(t){e.allDataCount=t.data.obj})};e.importDatas=function(){a.getPremergeScenes().then(function(t){e.importDatas=t.data.list,t.data.list.length>0&&e.selectScene(t.data.list[0].ID,0)})},e.associateData={};var c=!0;e.confirm=function(){c?jQuery.isEmptyObject(e.associateData,{})?(alert("请导入数据！"),c=!0):(a.mergeSceneData(e.selectedSceneId,e.associateData).then(function(){alert("你已成功导入客户！"),t.reload()},function(){}),c=!1):alert("请不要重复提交！")},e.importDatas(),l(),r(),o(0)}]),n.module("main",["services.mine","services.data","app.directives.pageTplTypes","app.directives.addelement","main.spread","main.data","main.spread.detail","services.usercenter","main.userGuide","app.directives.qrcode","services.i18nNotifications"]),n.module("main").controller("MainCtrl",["$rootScope","$scope","$location","security","MineService","dataService","sceneService","ModalService","$modal","usercenterService","i18nNotifications",function(e,t,n,a,i,s,o,l,r,c,d){t.PREFIX_URL=PREFIX_URL,t.PREFIX_CLIENT_HOST=PREFIX_HOST,t.client_cdn=CLIENT_CDN,t.scene={type:{}},t.pageSize=12,t.showCloseStatus=[],t.showOpenStatus=[],t.isActive="main",t.editScene=function(e){n.path("scene/create/"+e).search("pageId",1)},t.openScene=function(e,t){t?o.openScene(e.id).then(function(){e.status=1,o.publishScene(e.id).then(function(){})}):o.closeScene(e.id).then(function(){e.status=2})},t.addColor=function(e){t.trIndex=e},t.removeColor=function(){t.trIndex=-1},t.sceneSettings=function(e){n.path("my/sceneSetting/"+e)},t.clickScene=function(){n.path("main")},t.clickSpread=function(){n.path("main/spread")},t.clickCustomer=function(){n.path("main/customer")},t.register=a.getRegisterInfo(),t.logout=function(){a.logout()},t.copyScene=function(e){l.openConfirmDialog({msg:"确定复制此场景?"},function(){o.copySceneById(e).then(function(e){n.path("scene/create/"+e.data.obj).search("pageId",1)})})},t.deleteScene=function(e){l.openConfirmDialog({msg:"确定删除此场景?"},function(){o.deleteSceneById(e).then(function(){t.getMyScenes()})})},t.getStyle=function(e){return{"background-image":"url("+(e.indexOf("syspic/")>=0?PREFIXSYS_FILE_HOST:USER_FILE_HOST)+e+")"}},t.getMyScenes=function(e){i.getMyScenes(t.scene.type?t.scene.type.value:"0",e,t.pageSize).then(function(e){e.data.list&&e.data.list.length>0?(t.myScenes=e.data.list,t.totalItems=e.data.map.count,t.currentPage=e.data.map.pageNo,t.allPageCount=e.data.map.count,t.toPage=""):(t.myScenes=[],t.allPageCount=0)})},t.pageChanged=function(e){return 1>e||e>t.totalItems/10+1?void alert("此页超出范围"):void t.getMyScenes(e)},t.getTdStyle=function(e){var t=$(".header_table td:eq("+e+")").outerWidth();return{width:t+"px",maxWidth:t+"px"}};var p=function(){s.getAllDataCount().then(function(e){t.allDataCount=e.data.obj})},g=function(){s.getAllSceneDataCount().then(function(e){t.allSceneDataCount=e.data.obj})};g(),t.getMyScenes(),p(),o.getSceneType().then(function(e){t.scene.types=e.data.list}),t.dataDetail={};var u=function(){s.getProspectDataAccount().then(function(e){t.prospectDataAccount=e.data.obj})};u();var m=function(){s.getAllPageView().then(function(e){t.allPageView=e.data.obj})};m(),t.showDetail=function(e){n.path("my/scene/"+e)},t.publishScene=function(e,t){t&&t.stopPropagation(),o.publishScene(e.id).then(function(t){t.data.success&&(e.publishTime=(new Date).getTime(),d.pushForCurrentRoute("scene.publish.success","notify.success"))})},t.totalItems=0,t.currentPage=0,t.toPage=""}]),n.module("main.spread",["app.directives.pieChart","app.directives.numChangeAnim"]),n.module("main.spread").controller("SpreadCtrl",["$scope","$location","MineService","dataService",function(e,t,n,a){e.isActive="spread",e.clickScene=function(){t.path("main")},e.clickSpread=function(){t.path("main/spread")},e.clickCustomer=function(){t.path("main/customer")},e.addColor=function(t){e.trIndex=t},e.removeColor=function(){e.trIndex=-1},e.getMyScenes=function(a){n.getMyScenes(null,a,10).then(function(n){n.data.list&&n.data.list.length>0&&(e.allPageCount=n.data.map.count,(!n.data.list||n.data.list.length<=0)&&t.path("scene"),e.spreadDatas=n.data.list,e.totalItems=n.data.map.count,e.currentPage=n.data.map.pageNo,e.toPage="")})},e.pageChanged=function(t){return 1>t||t>e.totalItems/10+1?void alert("此页超出范围"):void e.getMyScenes(t)},e.viewDetail=function(e){t.path("/main/spread/"+e.id)},a.getOpenCount().then(function(t){e.openCount=t.data.obj}),a.getAllPageView().then(function(t){e.allPageView=t.data.obj,e.allPageViewData=[{value:t.data.obj,color:"#08a1ef",highlight:"#78cbf5",label:"场景展示"}],a.getAllSceneDataCount().then(function(t){e.allSceneDataCount=t.data.obj,e.dataRatio=0==e.allPageView?0:100*(e.allSceneDataCount/e.allPageView).toFixed(2),e.allSceneDataCountData=[{value:e.allSceneDataCount,color:"#9ad64b",highlight:"#c3f286",label:"收集数据"}],e.dataConversionRateData=[{value:(e.allSceneDataCount/e.allPageView).toFixed(2),color:"#68dcc7",highlight:"#92f5e3",label:"转化率"}]})}),e.totalItems=0,e.currentPage=0,e.toPage="",e.getMyScenes()}]),n.module("main.spread.detail",["services.spread","app.directives.lineChart","app.directives.pieChart","app.directives.numChangeAnim"]),n.module("main.spread.detail").controller("SpreadDetailCtrl",["$scope","$location","$stateParams","sceneService","SpreadService",function(e,t,n,a,i){e.PREFIX_FILE_HOST=PREFIX_FILE_HOST,e.PREFIX_CLIENT_HOST=PREFIX_HOST,e.PREFIX_SERVER_HOST=PREFIX_URL;var s=n.sceneId;e.spreadViewGridOptions={headerRowHeight:50,rowHeight:50,enableScrollbars:!1,enableColumnMenu:!1,disableColumnMenu:!0},e.spreadViewGridOptions.columnDefs=[{name:"STAT_DATE",displayName:"统计时间"},{name:"SHOW",displayName:"展示次数"},{name:"DATA",displayName:"收集数据"}],e.spreadMobileGridOptions={headerRowHeight:50,rowHeight:50,enableScrollbars:!1,enableColumnMenu:!1,disableColumnMenu:!0},e.spreadMobileGridOptions.columnDefs=[{name:"STAT_DATE",displayName:"统计时间"},{name:"S_WX_TIMELINE",displayName:"朋友圈"},{name:"S_WX_GROUP",displayName:"微信群"},{name:"S_WX_SINGLE",displayName:"微信朋友"}],e.spreadClickGridOptions={headerRowHeight:50,rowHeight:50,enableScrollbars:!1,enableColumnMenu:!1,disableColumnMenu:!0},e.spreadClickGridOptions.columnDefs=[{name:"STAT_DATE",displayName:"统计时间"},{name:"LINK",displayName:"链接点击"},{name:"TEL",displayName:"电话直拨点击"}];var o=function(){a.getSceneDetail(s).then(function(t){e.scene=t.data.obj,e.url=VIEW_URL+"v-"+e.scene.code,e.getLast7dayStats()},function(){})},l=function(t,n){i.getDataBySceneId(s,t,n,30,0).then(function(t){e.pageView=0,e.stats=t.data.list,e.spreadViewGridOptions.data=e.stats,e.spreadMobileGridOptions.data=e.stats,e.spreadClickGridOptions.data=e.stats,e.viewLineChartData={labels:[],datasets:[{label:"1",fillColor:"rgba(220,220,220,0.2)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:[]}]},e.dataLineChartData={labels:[],datasets:[{label:"2",fillColor:"rgba(220,220,220,0.2)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:[]}]};var n=0;cntTimeline=0,cntWeixin=0,cntWeixinGroup=0,cntOther=0;for(var a=0;a<e.stats.length;a++)e.viewLineChartData.labels.push(e.stats[a].STAT_DATE),e.viewLineChartData.datasets[0].data.push(e.stats[a].SHOW),e.dataLineChartData.labels.push(e.stats[a].STAT_DATE),e.dataLineChartData.datasets[0].data.push(e.stats[a].DATA),e.pageView+=e.stats[a].SHOW,n+=e.stats[a].S_MOBILE,cntTimeline+=e.stats[a].S_WX_TIMELINE,cntWeixin+=e.stats[a].S_WX_SINGLE,cntWeixinGroup+=e.stats[a].S_WX_GROUP;e.viewLineChartData.labels&&1==e.viewLineChartData.labels.length&&(e.viewLineChartData.labels.unshift("更早"),e.viewLineChartData.datasets[0].data.unshift(0)),e.dataLineChartData.labels&&1==e.dataLineChartData.labels.length&&(e.dataLineChartData.labels.unshift("更早"),e.dataLineChartData.datasets[0].data.unshift(0)),cntOther=n-cntTimeline-cntWeixin-cntWeixinGroup,e.timelineData=cntTimeline,e.weixinData=cntWeixin,e.weixinGroupData=cntWeixinGroup,$(".myGrid1").height(50*(e.stats.length+1)+1),$(".myGrid1 .ui-grid-viewport").height(50*e.stats.length+1)},function(){})},r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()};e.getAllStats=function(){l()},e.getLastdayStats=function(){l(r(-1),r(0))},e.getLast7dayStats=function(){l(r(-6),r(1))},e.getLast30dayStats=function(){l(r(-29),r(0))},e.clickScene=function(){t.path("main")},e.clickSpread=function(){t.path("main/spread")},e.clickCustomer=function(){t.path("main/customer")},o()}]),function(){n.module("main.userGuide",[]).controller("userGuideCtrl",["$rootScope","$scope",function(t,n){if(e.localStorage){var a=JSON.parse(localStorage.getItem("loginInfo"));a&&a[t.user.id]?n.firstLogin=!1:(n.firstLogin=!0,a=a||{},a[t.user.id]=1,localStorage.setItem("loginInfo",JSON.stringify(a)))}}])}(),n.module("my",["my.scene","my.scenesetting"]),n.module("my.scene",["services.scene","services.mine","services.data","scene.create.console","app.directives.addelement","services.usercenter","app.directives.qrcode"]),n.module("my.scene").controller("MySceneCtrl",["$anchorScroll","$state","$location","$rootScope","$window","$scope","$stateParams","sceneService","MineService","dataService","$sce","$modal","usercenterService","security","pageTplService",function(t,n,a,i,s,o,l,r,c,d,p,g,u,m){function h(e,t,n){d.getDataBySceneId(e,t,n).then(function(e){o.dataHeader=e.data.list.shift(),o.dataList=e.data.list,o.totalItems=e.data.map.count,o.currentPage=e.data.map.pageNo})}o.loading=!1,o.url="",o.sceneId=l.sceneId,o.isVendorUser=i.isVendorUser,o.isAllowToAccessLastPageSetting=m.isAllowToAccess(2);var f=0;if(o.PREFIX_FILE_HOST=PREFIX_FILE_HOST,o.PREFIX_URL=PREFIX_URL,o.alwaysOpen=!0,o.scene||(o.scene={}),document.getElementById("sharescript")){$("#sharescript").remove();var v=document.getElementsByTagName("head")[0],b=document.createElement("script");b.id="sharescript",b.src="http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion="+~(-new Date/36e5),v.appendChild(b)}else{var v=document.getElementsByTagName("head")[0],b=document.createElement("script");b.id="sharescript",b.src="http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion="+~(-new Date/36e5),v.appendChild(b)}o.getSceneDetail=function(){r.getSceneDetail(o.sceneId).then(function(t){o.scene=t.data.obj,o.scene.applyPromotion=""+o.scene.applyPromotion,o.scene.applyTemplate=""+o.scene.applyTemplate,o.code=PREFIX_URL+"eqs/qrcode/"+o.scene.code+".png",o.url=VIEW_URL+"v-"+o.scene.code,o.customUrl=p.trustAsResourceUrl(VIEW_URL+"v-"+o.scene.id+"?preview=preview"),o.scene.image.isAdvancedUser=!(!i.isAdvancedUser&&!i.isVendorUser),e._bd_share_config={common:{bdText:o.scene.name,bdDesc:o.scene.name,bdUrl:o.url,bdSign:"on",bdSnsKey:{}},share:[{bdSize:32}],slide:[{bdImg:0,bdPos:"right",bdTop:100}]},f=o.scene.pageCount,2==o.scene.status?(o.showOpenSceneBtn=!0,o.showCloseSceneBtn=!1):1==o.scene.status&&(o.showOpenSceneBtn=!1,o.showCloseSceneBtn=!0)})},o.getSceneDetail(),o.publishScene=function(e){o.scene.publishTime&&o.scene.publishTime>=o.scene.updateTime?alert("场景已发布！"):r.publishScene(e).then(function(e){e.data.success&&alert("场景发布成功")})},o.closeScene=function(e){r.closeScene(e).then(function(){o.showOpenSceneBtn=!0,o.showCloseSceneBtn=!1})},o.openScene=function(e){r.openScene(e).then(function(){o.showOpenSceneBtn=!1,o.showCloseSceneBtn=!0})},o.totalItems=0,o.currentPage=1,o.toPage="",o.pageChanged=function(e){return 1>e||e>o.totalItems/10+1?void alert("此页超出范围"):void h(o.sceneId,e,10)},o.getTdStyle=function(e){var t=$(".header_table td:eq("+e+")").outerWidth();return{width:t+"px",maxWidth:t+"px"}},h(o.sceneId,o.currentPage,10);var y=new ZeroClipboard(document.getElementById("copy-button"),{moviePath:CLIENT_CDN+"images/ZeroClipboard.swf"});y.on("dataRequested",function(e){e.setText(o.url),setTimeout(function(){alert("复制成功")},500)}),o.goData=function(){a.hash("collectData"),t()}}]),n.module("my.scenesetting",["services.scene","services.mine","services.data","scene.create.console","app.directives.addelement","services.usercenter"]),n.module("my.scenesetting").controller("SceneSettingCtrl",["$state","$location","$rootScope","$window","$scope","$stateParams","sceneService","MineService","dataService","$sce","$modal","usercenterService","security","pageTplService",function(e,t,a,i,s,o,l,r,c,p,g,u,m,h){s.loading=!1,s.url="",s.sceneId=o.sceneId,s.isVendorUser=a.isVendorUser,s.isAllowToAccessLastPageSetting=m.isAllowToAccess(2);var f=0;s.PREFIX_FILE_HOST=PREFIX_FILE_HOST,s.alwaysOpen=!0;var v;s.scene||(s.scene={}),s.switchOpen=function(){s.alwaysOpen&&(s.startDate=null,s.endDate=null)},s.openImageModal=function(){g.open({windowClass:"img_console console",templateUrl:BASE_URL+"templates/scene.console.bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1,elemDef:null,coverImage:"coverImage"}}}}).result.then(function(e){s.newCoverImage=e,s.newCoverImage.tmbPath=e.data,s.newCoverImage.path=e.data,s.coverImages.unshift(s.newCoverImage),s.scene.image.imgSrc=s.newCoverImage.path},function(){})},s.chooseCover=function(e){s.scene.image.imgSrc=e.path},s.openmin=function(e){e.preventDefault(),e.stopPropagation(),s.openedmax=!1,s.openedmin=!0,s.minDateStart=new Date,s.maxDateStart=s.endDate?new Date(new Date(s.endDate).getTime()-864e5):null},s.openmax=function(e){e.preventDefault(),e.stopPropagation(),s.openedmin=!1,s.openedmax=!0,s.minDateEnd=s.startDate?new Date(new Date(s.startDate).getTime()+864e5):new Date},s.dateOptions={formatYear:"yy",startingDay:1},s.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],s.format=s.formats[1],s.saveSceneSettings=function(){if(s.startDate&&!s.endDate)return void(s.invalidText="请选择结束时间");if(s.endDate&&!s.startDate)return void(s.invalidText="请选择结束时间");if(s.scene.description&&s.scene.description.trim().length>30)return void(s.invalidText="场景描述不能超过30个字");if(!s.scene.name||!s.scene.name.trim())return void(s.invalidText="请填写场景名称");var e=d(s.scene.name.trim());return e>48?void alert("场景名称不能超过48个字符或24个汉字"):(s.startDate&&s.endDate&&(s.scene.startDate=s.startDate.getTime(),s.scene.endDate=s.endDate.getTime()),s.startDate&&s.endDate||(s.scene.startDate=null,s.scene.endDate=null),s.scene.type=s.scene.type.value,s.scene.pageMode=s.scene.pageMode.id,void l.saveSceneSettings(s.scene).then(function(){t.path("my/scene/"+s.sceneId).search({}),a.showSetScenePanel=!1},function(){}))},s.getSceneDetail=function(){l.getSceneDetail(s.sceneId).then(function(e){s.scene=e.data.obj,s.scene.applyPromotion=""+s.scene.applyPromotion,s.scene.applyTemplate=""+s.scene.applyTemplate,2==e.data.obj.pageMode&&(e.data.obj.pageMode=0),n.forEach(s.pagemodes,function(t){e.data.obj.pageMode==t.id&&(s.scene.pageMode=t)}),s.code=PREFIX_URL+"eqs/qrcode/"+s.scene.code+".png",s.url=VIEW_URL+"v-"+s.scene.code,s.customUrl=p.trustAsResourceUrl(VIEW_URL+"v-"+s.scene.id+"?preview=preview"),s.scene.image.isAdvancedUser=!(!a.isAdvancedUser&&!a.isVendorUser),s.hideAd=!!s.scene.image.hideEqAd,f=s.scene.pageCount,s.scene.startDate&&s.scene.endDate&&(s.startDate=new Date(s.scene.startDate),s.endDate=new Date(s.scene.endDate),s.alwaysOpen=!1),l.getSceneType().then(function(e){s.types=e.data.list,n.forEach(s.types,function(e){e.value==s.scene.type&&(s.scene.type=e)})}),l.getCoverImages().then(function(e){s.coverImages=e.data.list;for(var t,n=0;n<s.coverImages.length;n++){if(s.scene.image.imgSrc==s.coverImages[n].path){v=s.coverImages[n],s.coverImages.splice(n,1),t=0;break}v={tmbPath:s.scene.image.imgSrc,path:s.scene.image.imgSrc},t=1}s.coverImages.unshift(v)})})},s.getSceneDetail(),s.pagemodes=[{id:0,name:"上下翻页"},{id:1,name:"上下惯性翻页"},{id:4,name:"左右翻页"},{id:3,name:"左右惯性翻页"},{id:5,name:"左右连续翻页"}],s.scene.pageMode=s.pagemodes[0],s.getUserXd=function(){u.getUserXd().then(function(e){s.userXd=e.data.obj})},s.getUserXd(),s.hideAdd=function(){s.scene.image.hideEqAd&&s.userXd<100&&(alert("积分不足！"),s.scene.image.hideEqAd=!1)},h.getPageTpls(1301).then(function(e){s.pageTpls=e.data.list&&e.data.list.length>0?e.data.list:[]}),s.chooseLastPage=function(e){s.scene.image.lastPageId=e}}]),n.module("scene.my.upload",["angularFileUpload"]),n.module("scene.my.upload").controller("UploadCtrl",["$scope","FileUploader","fileService","category","$timeout","$interval",function(e,t,n,a,i,s){e.category=a;var o;o=e.uploader=new t(e.category.scratch||e.category.headerImage?{url:JSON_URL+"?c=upfile&a=upload&ID="+getCookie("USERID")+"&keycode="+getCookie("MD5STR")+"&bizType="+a.categoryId+"&fileType="+a.fileType,withCredentials:!0,queueLimit:1,onSuccessItem:function(t,n){function a(){s.cancel(i),alert("上传完毕"),e.$close(n.obj.path)}e.progressNum=0;var i=s(function(){e.progressNum<100?e.progressNum+=15:a()},100)}}:{url:JSON_URL+"?c=upfile&a=upload&ID="+getCookie("USERID")+"&keycode="+getCookie("MD5STR")+"&bizType="+a.categoryId+"&fileType="+a.fileType,withCredentials:!0,queueLimit:5,onCompleteAll:function(){function t(){s.cancel(n),alert("上传完毕"),e.$close()}e.progressNum=0;var n=s(function(){e.progressNum<100?e.progressNum+=15:t()},100)}});var l;("0"==a.fileType||"1"==a.fileType)&&(l="|jpg|png|jpeg|bmp|gif|",limitSize=3145728),"2"==a.fileType&&(l="|mp3|mpeg|",limitSize=3145728),o.filters.push({name:"imageFilter",fn:function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!==l.indexOf(t)}}),o.filters.push({name:"imageSizeFilter",fn:function(e){var t=e.size;return t>=limitSize&&alert("上传文件大小限制在"+limitSize/1024/1024+"M以内"),t<limitSize}}),o.filters.push({name:"fileNameFilter",fn:function(e){return e.name.length>50&&alert("文件名应限制在50字符以内"),e.name.length<=50}});var r=function(){n.listFileCategory().then(function(t){e.categoryList=t.data.list,e.categoryList||(e.categoryList=[]),e.categoryList.push({name:"我的背景",value:"0"})})};r(),e.removeQueue=function(){}}]),n.module("reg",[]),n.module("reg").controller("TestLoginCtrl",["$rootScope","$scope",function(e,t){t.weiChatUrl="https://open.weixin.qq.com/connect/qrconnect?appid=wxc5f1bbae4bb93ced&redirect_uri=http://www.hjtmt.com/testlogin.html&response_type=code&scope=snsapi_login&state=STATE#wechat_redirect"}]),n.module("sample",["services.sample","services.mine","services.scene","app.directives.addelement","app.directives.qrcode"]),n.module("sample").controller("SampleCtrl",["$rootScope","$http","$scope","$timeout","security","$window","sampleService","MineService","sceneService","$stateParams",function(e,n,a,i,o,l,r,c,d){a.PREFIX_FILE_HOST=PREFIX_FILE_HOST,a.PREFIX_SERVER_HOST=PREFIX_URL,a.PREFIX_CLIENT_HOST=PREFIX_HOST,a.load=function(){t=$(".fixed").offset().top,mh=$(".mains").height(),fh=$(".fixed").height(),$("#eq_main").scroll(function(){s=$("#eq_main").scrollTop(),s>t-10?($(".fixed").css("position","fixed"),s+fh>mh&&$(".fixed").css("top","0px")):$(".fixed").css("position","")})},a.$on("$destroy",function(){$("#eq_main").unbind("scroll")}),a.pageNo=1,a.pageSize=9,a.scene||(a.scene={}),a.typeindex="all",
a.getHomes=function(e,t,n,i){a.pageNo=1,a.typeindex=e,a.currentType=t,a.showMoreButton=!0,r.getSamples(t,n,i).then(function(e){a.homes=e.data.list},function(){})},a.getSceneType=function(){d.getSceneType().then(function(e){a.sceneTypes=e.data.list})},a.showMore=function(){a.pageNo++,r.getSamples(a.currentType,a.pageNo,a.pageSize).then(function(e){e.data.list.length>0?a.homes=a.homes.concat(e.data.list):a.showMoreButton=!1},function(){})},a.getSceneType(),a.getHomes("all",null,1,9),a.getSamplesPV=function(){r.getSamplesPV().then(function(e){a.SamplesPVs=e.data,a.dayTop=a.SamplesPVs.obj.dayTop,a.monthTop=a.SamplesPVs.obj.monthTop,a.weekTop=a.SamplesPVs.obj.weekTop,a.page="month"},function(){})}}]),n.module("scene.create.console",["scene.create.console.bg","scene.create.console.map","scene.create.console.input","scene.create.console.button","scene.create.console.setting","scene.create.console.audio","scene.create.console.tel","scene.create.console.fake","scene.create.console.pic_lunbo","scene.create.console.micro","scene.create.console.link","scene.create.console.video","scene.create.console.category","scene.create.console.cropImage"]),n.module("scene.create.console").controller("ConsoleCtrl",["$scope",function(){}]),n.module("scene.create.console.setting.anim",["app.directives.uislider","app.directives.limitInput"]),n.module("scene.create.console.setting.anim").controller("AnimConsoleCtrl",["$scope","sceneService",function(e,t){var n=e.elemDef=t.currentElemDef,a=$("#inside_"+e.elemDef.id+" .element-box");if(e.animTypeEnum=[{id:-1,name:"无"},{id:0,name:"淡入"},{id:1,name:"移入"},{id:2,name:"弹入"},{id:3,name:"中心弹入"},{id:4,name:"中心放大"},{id:12,name:"翻滚进入"},{id:13,name:"光速进入"},{id:6,name:"摇摆"},{id:5,name:"抖动"},{id:7,name:"旋转"},{id:8,name:"翻转"},{id:9,name:"悬摆"},{id:10,name:"淡出"},{id:11,name:"翻转消失"}],e.animDirectionEnum=[{id:0,name:"从左向右"},{id:1,name:"从上到下"},{id:2,name:"从右向左"},{id:3,name:"从下到上"}],n.properties||(n.properties={}),n.properties.anim&&null!=n.properties.anim.type){var i;for(i=0;i<e.animTypeEnum.length;i++)e.animTypeEnum[i].id==n.properties.anim.type&&(e.activeAnim=e.animTypeEnum[i]);e.model={type:n.properties.anim.type,direction:n.properties.anim.direction,duration:parseFloat(n.properties.anim.duration),delay:parseFloat(n.properties.anim.delay),countNum:parseInt(n.properties.anim.countNum,10)||1,count:n.properties.anim.count,linear:n.properties.anim.linear},e.direction=null!=n.properties.anim.direction?e.animDirectionEnum[n.properties.anim.direction]:e.animDirectionEnum[0]}else e.activeAnim=e.animTypeEnum[0],e.direction=e.animDirectionEnum[0],e.model={type:null,direction:null,duration:2,delay:0,countNum:1,count:null};e.$watch("model",function(){e.direction&&(e.model.direction=e.direction.id),n.properties.anim=e.model,s()},!0),e.$watch("direction",function(){e.direction&&(e.model.direction=e.direction.id),n.properties.anim=e.model,s()},!0),e.confirm=function(){e.cancel()};var s=function(){a.css("animation",""),a.css("animation",e.animationClass+" "+e.model.duration+"s ease 0s"),a.css("animation-fill-mode","backwards")};e.changeAnimation=function(){e.animationClass="";var t=e.model;0===t.type&&(e.animationClass="fadeIn"),1===t.type&&(0===e.direction.id&&(e.animationClass="fadeInLeft"),1===e.direction.id&&(e.animationClass="fadeInDown"),2===e.direction.id&&(e.animationClass="fadeInRight"),3===e.direction.id&&(e.animationClass="fadeInUp")),6===t.type&&(e.animationClass="wobble"),5===t.type&&(e.animationClass="rubberBand"),7===t.type&&(e.animationClass="rotateIn"),8===t.type&&(e.animationClass="flip"),9===t.type&&(e.animationClass="swing"),2===t.type&&(0===e.direction.id&&(e.animationClass="bounceInLeft"),1===e.direction.id&&(e.animationClass="bounceInDown"),2===e.direction.id&&(e.animationClass="bounceInRight"),3===e.direction.id&&(e.animationClass="bounceInUp")),3===t.type&&(e.animationClass="bounceIn"),4===t.type&&(e.animationClass="zoomIn"),10===t.type&&(e.animationClass="fadeOut"),11===t.type&&(e.animationClass="flipOutY"),12===t.type&&(e.animationClass="rollIn"),13===t.type&&(e.animationClass="lightSpeedIn")}}]),n.module("scene.create.console.audio",[]),n.module("scene.create.console.audio").controller("AudioConsoleCtrl",["$scope","$sce","$timeout","$modal","fileService","obj",function(e,t,n,a,i,s){function o(){i.getFileByCategory(1,30,"1","2").then(function(t){e.reservedAudios=t.data.list;for(var n=0;n<e.reservedAudios.length;n++)"3"==e.model.bgAudio.type&&PREFIX_FILE_HOST+e.reservedAudios[n].path==e.model.type3&&(e.model.selectedAudio=e.reservedAudios[n])})}function l(){i.getFileByCategory(1,10,"0","2").then(function(t){e.myAudios=t.data.list;for(var n=0;n<e.myAudios.length;n++)"2"==e.model.bgAudio.type&&PREFIX_FILE_HOST+e.myAudios[n].path==e.model.type2&&(e.model.selectedMyAudio=e.myAudios[n])})}e.PREFIX_FILE_HOST=PREFIX_FILE_HOST,e.model={bgAudio:{url:s.url?s.url:"",type:s.type?s.type:"3"},compType:"bgAudio"},n(function(){"1"==s.type&&s.url&&(e.model.type1=s.url),"2"==s.type&&s.url&&(e.model.type2=t.trustAsResourceUrl((s.url.indexOf("syspic/")>=0?PREFIXSYS_FILE_HOST:USER_FILE_HOST)+s.url)),"3"==s.type&&s.url&&(e.model.type3=t.trustAsResourceUrl((s.url.indexOf("syspic/")>=0?PREFIXSYS_FILE_HOST:USER_FILE_HOST)+s.url))}),e.categoryList=[{name:"音乐库",value:"3"},{name:"外部链接",value:"1"},{name:"我的音乐",value:"2"}],e.goUpload=function(){a.open({windowClass:"upload-console",templateUrl:"my/upload.tpl.html",controller:"UploadCtrl",resolve:{category:function(){return{categoryId:0,fileType:2}}}}).result.then(function(){l()})},e.selectAudio=function(n){"3"==n&&(e.model.type3=e.model.selectedAudio?t.trustAsResourceUrl(PREFIX_FILE_HOST+e.model.selectedAudio.path):null),"2"==n&&(e.model.type2=e.model.selectedMyAudio?t.trustAsResourceUrl(PREFIX_FILE_HOST+e.model.selectedMyAudio.path):null)},e.playAudio=function(e){$("#audition"+e)[0].play()},e.pauseAudio=function(e){$("#audition"+e)[0].pause()},e.confirm=function(){"1"==e.model.bgAudio.type&&(e.model.bgAudio.url=e.model.type1),"2"==e.model.bgAudio.type&&(e.model.bgAudio.url=e.model.selectedMyAudio.path),"3"==e.model.bgAudio.type&&(e.model.bgAudio.url=e.model.selectedAudio.path),e.$close(e.model)},e.cancel=function(){e.$dismiss()},o(),l()}]),n.module("scene.create.console.bg",["services.file","scene.my.upload","app.directives.responsiveImage","app.directives.rightclick"]),n.module("scene.create.console.bg").controller("BgConsoleCtrl",["$scope","$timeout","$rootScope","$modal","ModalService","sceneService","fileService","localizedMessages","obj",function(e,t,n,a,i,s,o,l,r){e.PREFIX_FILE_HOST=PREFIX_FILE_HOST,e.first=!0,e.categoryList=[],e.imgList=[],e.otherCategory=[],e.categoryId="1",e.fileType=r.fileType,e.pageSize=l.get("file.bg.pageSize"),e.myTags=[],e.selectedImgs=[],e.selectedImages=[],e.toPage=1,e.isEditor=n.isEditor;var c=function(){o.listFileCategory(e.fileType).then(function(t){e.categoryList=t.data.list,e.changeCategory("0",1)})};e.totalItems=0,e.currentPage=1;var d=function(t,n){if("c"==t){e.numPages=2,e.totalItems=35;var a=[{color:"#6366C3"},{color:"#29A1D6"},{color:"#332E42"},{color:"#DBF3FF"},{color:"#434A54"},{color:"#000000"},{color:"#F1F03E"},{color:"#FCF08E"},{color:"#972D53"},{color:"#724192"},{color:"#967BDC"},{color:"#EC87C1"},{color:"#D870AF"},{color:"#F6F7FB"},{color:"#666C78"},{color:"#ABB1BD"},{color:"#CCD0D9"},{color:"#E6E9EE"},{color:"#48CFAE"},{color:"#36BC9B"},{color:"#3BAEDA"},{color:"#50C1E9"},{color:"#AC92ED"},{color:"#4B89DC"},{color:"#4B89DC"},{color:"#5D9CEC"},{color:"#8DC153"},{color:"#ED5564"},{color:"#DB4453"},{color:"#FB6E52"},{color:"#FFCE55"},{color:"#F6BB43"},{color:"#E9573E"},{color:"#9FF592"},{color:"#A0D468"}];e.toPage=n,e.imgList=n&&1!=n?a.slice(18):a.slice(0,18),e.currentPage=n}else"all"==t&&(t=""),o.getFileByCategory(n?n:1,e.pageSize,t,e.fileType).then(function(t){e.imgList=t.data.list,e.totalItems=t.data.map.count,e.currentPage=t.data.map.pageNo,e.allPageCount=t.data.map.count,e.toPage=t.data.map.pageNo,e.numPages=Math.ceil(e.totalItems/e.pageSize)})};e.replaceImage=function(){if(e.selectedImages.length>1)return alert("只能选择一张图片进行替换！"),!1;if(!e.selectedImages.length)return alert("还没有选择替换图片"),!1;if("c"!=e.categoryId){var t=e.selectedImages[0].path,n=$(".hovercolor").children("img")[0];e.$close({type:"imgSrc",data:t,width:n.width,height:n.height})}else{var a=e.selectedImages[0].color;e.$close({type:"backgroundColor",color:a})}},e.getImagesByPage=function(t,n){e.currentPage=n,0==t?isNaN(e.tagIndex)||-1==e.tagIndex?e.changeCategory(t,n):e.getImagesByTag(e.myTags[e.tagIndex].id,e.tagIndex,n):isNaN(e.sysTagIndex)||-1==e.sysTagIndex?e.changeCategory(t,n):e.getImagesBySysTag(e.childCatrgoryList[e.sysTagIndex].id,e.sysTagIndex,n,t)},e.replaceBgImage=function(t,n){var a,i=n.target;a="IMG"==i.nodeName.toUpperCase()?i:$("img",i)[0],e.$close({type:"imgSrc",data:t,width:a.width,height:a.height})},e.replaceBgColor=function(t){e.$close({type:"backgroundColor",color:t})},e.changeCategory=function(t,n){return("c"==t||"all"==t||"0"==t)&&(e.allImages.checked=!1,e.sysTagIndex=-1),e.selectedImages=[],1>n||n>e.totalItems/e.pageSize+1?void alert("此页超出范围"):(e.imgList=[],t||(t="0"),e.categoryId=t,void(0==t?(e.pageSize=l.get("file.bg.pageSize")-1,e.getImagesByTag("",e.tagIndex,n),e.tagIndex=-1):(e.pageSize=l.get("file.bg.pageSize"),d(t,n))))};var p=null;e.createCategory=function(){return e.myTags.length>=8?void alert("最多能创建8个自定义标签！"):void(p=a.open({windowClass:"console",templateUrl:"scene/console/category.tpl.html",controller:"CategoryConsoleCtrl"}).result.then(function(t){e.myTags.push(t)},function(){}))},e.getCustomTags=function(){o.getCustomTags().then(function(t){e.myTags=t.data.list},function(){alert("服务器异常")})},e.getCustomTags(),e.deleteTag=function(t,n){o.deleteTag(t).then(function(){e.myTags.splice(n,1)},function(){alert("服务器异常")})},e.hover=function(e){e.showOp=!e.showOp},e.switchSelect=function(t,n){if(n.target.id!=t.id)if(t.selected=!t.selected,t.selected)e.selectedImages.push(t);else for(var a in e.selectedImages)e.selectedImages[a]==t&&e.selectedImages.splice(a,1)},e.selectTag=function(t,n){e.dropTagIndex=n,e.id=e.myTags[n].id},e.setCategory=function(t,n){e.dropTagIndex=-1;var a=[];if(!n)for(var i in e.selectedImages)a.push(e.selectedImages[i].id);var s=n?n:a.join(",");o.setCategory(e.id,s).then(function(){},function(){})},e.hoverTag=function(e){e.hovered=!e.hovered},e.prevent=function(t){t.selected||(t.selected=!0,e.selectedImages.push(t))},e.prevent=function(){},e.unsetTag=function(){var t=[];for(var n in e.selectedImages)t.push(e.selectedImages[n].id);o.unsetTag(e.myTags[e.tagIndex].id,t.join(",")).then(function(){e.getImagesByTag(e.myTags[e.tagIndex].id,e.tagIndex,e.currentPage)},function(){})},e.setIndex=function(t){e.dropTagIndex=-1,e.selectedImages.length||(alert("请您选中图片再进行分类！"),t.stopPropagation())},e.getChildCategory=function(t){o.getChildCategory(t).then(function(t){e.sysTagIndex=-1,200==t.data.code&&(e.childCatrgoryList=t.data.list)},function(){})},e.goUpload=function(){a.open({windowClass:"upload-console",templateUrl:"my/upload.tpl.html",controller:"UploadCtrl",resolve:{category:function(){return{categoryId:e.categoryId,fileType:e.fileType,coverImage:r.coverImage}}}}).result.then(function(){e.changeCategory(e.categoryId)},function(){})},e.allImages={checked:!1},e.selectAll=function(){for(var t in e.imgList)e.allImages.checked?(e.imgList[t].selected=!0,e.selectedImages.push(e.imgList[t])):(e.imgList[t].selected=!1,e.selectedImages=[])},e.getImagesByTag=function(t,n,a){return 1>a||a>e.totalItems/e.pageSize+1?void alert("此页超出范围"):(e.allImages.checked=!1,e.selectedImages=[],e.tagIndex=n,void o.getImagesByTag(t,e.fileType,a,e.pageSize).then(function(t){e.imgList=t.data.list,e.totalItems=t.data.map.count,e.currentPage=t.data.map.pageNo,e.allPageCount=t.data.map.count,e.toPage=t.data.map.pageNo,e.numPages=Math.ceil(e.totalItems/e.pageSize)},function(){alert("服务器异常")}))},e.getImagesBySysTag=function(t,n,a,i){return 1>a||a>e.totalItems/e.pageSize+1?void alert("此页超出范围"):(e.allImages.checked=!1,e.selectedImages=[],e.sysTagIndex=n,void o.getImagesBySysTag(t,e.fileType,a,e.pageSize,i).then(function(t){e.imgList=t.data.list,e.totalItems=t.data.map.count,e.currentPage=t.data.map.pageNo,e.allPageCount=t.data.map.count,e.toPage=t.data.map.pageNo,e.numPages=Math.ceil(e.totalItems/e.pageSize)},function(){alert("服务器异常")}))},e.deleteImage=function(t,n){var a=[];if(!t&&0==e.selectedImages.length)return void alert("请您选中图片后再进行删除操作！");n&&n.stopPropagation();var s=t?"确定删除此图片？":"确定删除所选图片？";if(!t)for(var l in e.imgList)e.imgList[l].selected&&a.push(e.imgList[l].id);var r=t?t:a.join(",");i.openConfirmDialog({msg:s},function(){o.deleteFile(r).then(function(){isNaN(e.tagIndex)||-1==e.tagIndex?e.changeCategory("0",e.currentPage):e.getImagesByTag(e.myTags[e.tagIndex].id,e.tagIndex,e.currentPage)})})},c()}]),n.module("scene.create.console.button",[]),n.module("scene.create.console.button").controller("ButtonConsoleCtrl",["$scope","$timeout","localizedMessages","obj",function(e,t,n,a){e.model={title:a.properties.title},e.confirm=function(){return e.model.title&&0!==e.model.title.length?void e.$close(e.model):(alert("按钮名称不能为空"),void $('.bg_console input[type="text"]').focus())},e.cancel=function(){e.$dismiss()}}]),n.module("scene.create.console.category",["services.file"]),n.module("scene.create.console.category").controller("CategoryConsoleCtrl",["$scope","$timeout","localizedMessages","fileService",function(e,t,a,i){e.category={},e.confirm=function(){return e.category.name&&e.category.name.trim()?d(e.category.name)>16?void alert("类别字数不能超过16个字符！"):void i.createCategory(n.copy(e.category.name)).then(function(t){e.category.id=t.data.obj,e.$close(n.copy(e.category))},function(){alert("创建失败")}):void alert("类别不能为空！")},e.cancel=function(){e.$dismiss()}}]),n.module("scene.create.console.cropImage",["services.file"]).directive("cropImage",["sceneService","fileService","$compile",function(e,t){return{restrict:"EAC",scope:{},replace:!0,templateUrl:"scene/console/cropimage.tpl.html",link:function(n,a){n.PREFIX_FILE_HOST=PREFIX_FILE_HOST;var i,s=e.currentElemDef,o=e.currentElemDef.properties.src;n.$on("changeElemDef",function(t,a){a=e.currentElemDef,o=e.currentElemDef.properties.src,n.preSelectImage(o)}),n.preSelectImage=function(e){var t=$("#target");i?(t.attr("src",PREFIX_FILE_HOST+e),i.setImage(PREFIX_FILE_HOST+e),i.setSelect([0,0,100,100])):t.attr("src",PREFIX_FILE_HOST+e).load(function(){t.Jcrop({keySupport:!1,setSelect:[0,0,100,100],boxHeight:200,boxWidth:300},function(){i=this}),e&&t.Jcrop({keySupport:!1,aspectRatio:s.css.width/s.css.height,setSelect:[-s.properties.imgStyle.marginLeft.split("px")[0],-s.properties.imgStyle.marginTop.split("px")[0],s.css.width,s.css.height]})})},n.preSelectImage(o),n.crop=function(){var n=e.currentElemDef,s=i.tellSelect();s.x=parseInt(s.x,10),s.y=parseInt(s.y,10),s.w=parseInt(s.w,10),s.h=parseInt(s.h,10),s.x2=parseInt(s.x2,10),s.y2=parseInt(s.y2,10),s.src=$("#target").attr("src").split(PREFIX_FILE_HOST)[1],t.cropImage(s).then(function(e){var t={type:"imgSrc",data:e.data.obj,width:s.w,height:s.h};n.properties.src=t.data;var i=t.width/t.height,o=$("#"+n.id),l=$("#inside_"+n.id).width(),r=$("#inside_"+n.id).height(),c=l/r;i>=c?(o.outerHeight(r),o.outerWidth(r*i),o.css("marginLeft",-(o.outerWidth()-l)/2),o.css("marginTop",0)):(o.outerWidth(l),o.outerHeight(l/i),o.css("marginTop",-(o.outerHeight()-r)/2),o.css("marginLeft",0)),o.attr("src",PREFIX_FILE_HOST+t.data),n.properties.imgStyle={},n.properties.imgStyle.width=o.outerWidth(),n.properties.imgStyle.height=o.outerHeight(),n.properties.imgStyle.marginTop=o.css("marginTop"),n.properties.imgStyle.marginLeft=o.css("marginLeft"),$(a).hide()},function(){n.properties.src||(elements.splice(elements.indexOf(elementsMap[n.id]),1),delete elementsMap[n.id])})},n.cancel=function(){$(a).hide()}}}}]),n.module("scene.create.console.fake",[]),n.module("scene.create.console.fake").controller("FakeConsoleCtrl",["$scope","type",function(e,t){e.type=t}]),n.module("scene.create.console.input",[]),n.module("scene.create.console.input").controller("InputConsoleCtrl",["$scope","$timeout","localizedMessages","obj",function(e,t,n,a){e.model={title:a.title,type:a.type,required:a.properties.required},e.confirm=function(){return e.model.title&&0!==e.model.title.length?void e.$close(e.model):(alert("输入框名称不能为空"),void $('.bg_console input[type="text"]').focus())},e.cancel=function(){e.$dismiss()}}]),n.module("scene.create.console.link",["services.scene"]),n.module("scene.create.console.link").controller("LinkConsoleCtrl",["$scope","$timeout","obj","sceneService",function(e,t,a,i){e.url={},e.url.externalLink="http://";var s;e.confirm=function(){"external"==e.url.link?s=e.url.externalLink:"internal"==e.url.link&&(s=e.url.internalLink.num),e.$close(s)},e.cancel=function(){e.$dismiss()},e.removeLink=function(t){"external"==t?e.url.externalLink="http://":"internal"==t&&(e.url.internalLink=e.pageList[0]),e.url.link=""},e.changed=function(){"external"==e.url.link?e.url.internalLink=e.pageList[0]:e.url.externalLink="http://"},e.selectRadio=function(t){e.url.link||("external"==t?e.url.link="external":"internal"==t&&(e.url.link="internal"))},e.getPageNames=function(){var t=a.sceneId;i.getPageNames(t).then(function(t){e.pageList=t.data.list,e.pageList.unshift({id:0,name:"无"}),n.forEach(e.pageList,function(e){e.name||(e.name="第"+e.num+"页")}),e.url.internalLink=e.pageList[0],a.properties.url&&(isNaN(a.properties.url)?(e.url.link="external",e.url.externalLink=decodeURIComponent(a.properties.url.split("=")[2])):(e.url.link="internal",e.url.internalLink=e.pageList[a.properties.url]))})},e.getPageNames()}]),n.module("scene.create.console.map",["app.directives.comp.editor"]),n.module("scene.create.console.map").controller("MapConsoleCtrl",["$scope","sceneService","$timeout",function(e,t,n){var a=null,i=null;e.address={address:"",lat:"",lng:""},e.search={address:""},e.searchResult=[],n(function(){a=new BMap.Map("l-map"),a.addControl(new BMap.NavigationControl),a.centerAndZoom(new BMap.Point(116.404,39.915),12);var t={onSearchComplete:function(t){i.getStatus()==BMAP_STATUS_SUCCESS&&(e.searchResult=t.Fn,e.$apply())}};i=new BMap.LocalSearch(a,t)}),e.searchAddress=function(){i.search(e.search.address)},e.setPoint=function(t,n,i){e.address.address=i,e.address.lat=t,e.address.lng=n,a.clearOverlays();var s=new BMap.Point(n,t),o=new BMap.Marker(s);a.addOverlay(o);var l=new BMap.Label(i,{offset:new BMap.Size(20,(-10))});o.setLabel(l),a.centerAndZoom(s,12)},e.resetAddress=function(){e.$close(e.address)},e.cancel=function(){e.$dismiss()}}]),n.module("scene.create.console.micro",["app.directives.addelement","services.scene"]),n.module("scene.create.console.micro").controller("MicroConsoleCtrl",["$scope","$timeout","localizedMessages","obj","sceneService",function(e,t,a,i,s){e.model||(e.model={});var o=[];e.isSelected=[],e.backgroundColors=[{backgroundColor:"#D34141"},{backgroundColor:"#000"},{backgroundColor:"#23A3D3"},{backgroundColor:"#79C450"},{backgroundColor:"#fafafa"}],e.labelNames=[{id:1,title:"栏目一",color:{backgroundColor:""}},{id:2,title:"栏目二",color:{backgroundColor:""}},{id:3,title:"栏目三",color:{backgroundColor:""}},{id:4,title:"栏目四",color:{backgroundColor:""}}],e.model.color=i.properties.labels[0].color.backgroundColor,e.selectColor=function(t){e.model.color=t.backgroundColor,n.forEach(e.labelNames,function(e){e.color.backgroundColor&&(e.color.backgroundColor=t.backgroundColor)})},n.forEach(i.properties.labels,function(t){n.forEach(e.labelNames,function(e){t.id==e.id&&(e.title=t.title,e.color.backgroundColor=t.color.backgroundColor,e.link=t.link,e.selected=!0,t.mousedown=!1)})}),e.confirm=function(){o=[];var t=0,a=0;n.forEach(e.labelNames,function(e){e.selected&&(e.link?o.push(e):a++,t++)}),2>t?alert("导航标签不能少于两个！"):a>0?alert("每个导航必须有链接页面！"):e.$close(o)},e.cancel=function(){e.$dismiss()},e.switchLabel=function(t,n){e.label=t,t.selected?e.labelIndex==n?(t.color.backgroundColor="",t.selected=!1,t.mousedown=!1):(e.labelIndex=n,t.mousedown=!0):(t.color.backgroundColor=e.model.color,e.labelIndex=n,t.selected=!0,t.mousedown=!0),t.mousedown?(e.model.title=t.title,e.model.link=t.link?e.pageList[t.link]:e.pageList[0]):(e.model.title="",e.model.link=e.pageList[0])},e.selectLink=function(t){e.label.mousedown&&(e.label.link=t.num,console.log(e.labelNames))},e.changeLabelName=function(){e.label.mousedown&&(e.label.title=e.model.title)},e.getPageNames=function(){var t=i.sceneId;s.getPageNames(t).then(function(t){e.pageList=t.data.list,e.pageList.unshift({id:0,name:"无"}),n.forEach(e.pageList,function(e){e.name||(e.name="第"+e.num+"页")}),e.model.link=e.pageList[0]})},e.getPageNames()}]),n.module("scene.create.console.pic_lunbo",["scene.my.upload"]),n.module("scene.create.console.pic_lunbo").controller("picsCtrl",["$scope","$timeout","$rootScope","$modal","ModalService","sceneService","fileService","obj",function(e,t,n,i,s,o,l,r){var c={lunBo:1,jiuGongGe:2},d={autoPlay:r.properties.autoPlay==a||r.properties.autoPlay,interval:r.properties.interval==a?3e3:r.properties.interval,picStyle:r.properties.picStyle==a?c.lunBo:r.properties.picStyle,children:[]},p=r.properties.children;if(p&&p.length>0)for(var g in p)d.children.push(p[g]);e.imgList=d.children,e.isAutoPlay=d.autoPlay,e.fileDomain=PREFIX_FILE_HOST,e.autoPlay=function(t){e.isAutoPlay=d.autoPlay=t},e.choosePic=function(){return d.children.length>=6?void alert("最多选择6张图片"):void i.open({windowClass:"console img_console",templateUrl:BASE_URL+"templates/scene.console.bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1,elemDef:r}}}}).result.then(function(t){e.imgList.push({src:t.data,desc:"",height:t.height,width:t.width})},function(){})},e.remove=function(t){e.imgList.splice(t,1)},e.ok=function(){return 0==d.children.length?void alert("请选择图片"):(r.properties=d,void e.$close(d))},e.cancel=function(){e.$dismiss()}}]),n.module("scene.create.console.setting",["scene.create.console.setting.style","scene.create.console.setting.anim"]),n.module("scene.create.console.setting").directive("styleModal",["sceneService","$compile",function(){return{restrict:"AE",replace:!0,scope:{},templateUrl:"scene/console/setting.tpl.html",link:function(e,t,n){var a="style";e.$on("showStylePanel",function(t,n){a=e.activeTab,e.activeTab="",e.$apply(),e.activeTab=n&&n.activeTab?n.activeTab:a,e.$apply()}),e.activeTab=n.activeTab,e.cancel=function(){$(t).hide()},e.$on("$locationChangeStart",function(){e.cancel()})},controller:["$scope",function(){}]}}]),n.module("scene.create.console.setting.style",["colorpicker.module","app.directives.style","app.directives.uislider","app.directives.limitInput"]),n.module("scene.create.console.setting.style").controller("StyleConsoleCtrl",["$scope","sceneService",function(e,t){var n=e.elemDef=t.currentElemDef;delete n.css.borderTopLeftRadius,delete n.css.borderTopRightRadius,delete n.css.borderBottomLeftRadius,delete n.css.borderBottomRightRadius,delete n.css.border;var a=n.css,i=$("#inside_"+e.elemDef.id+" > .element-box");if(e.model={backgroundColor:a.backgroundColor||"",opacity:100-100*a.opacity||0,color:a.color||"#676767",borderWidth:parseInt(a.borderWidth,10)||0,borderStyle:a.borderStyle||"solid",borderColor:a.borderColor||"rgba(0,0,0,1)",paddingBottom:parseInt(a.paddingBottom,10)||0,paddingTop:parseInt(a.paddingTop,10)||0,lineHeight:+a.lineHeight||1,borderRadius:parseInt(a.borderRadius,10)||0,transform:a.transform&&parseInt(a.transform.replace("rotateZ(","").replace("deg)",""),10)||0},e.maxRadius=Math.min(i.outerWidth(),i.outerHeight())/2+10,a.borderRadiusPerc?e.model.borderRadiusPerc=parseInt(a.borderRadiusPerc,10):a.borderRadius?"999px"==a.borderRadius?e.model.borderRadiusPerc=100:(e.model.borderRadiusPerc=parseInt(100*parseInt(a.borderRadius,10)*2/Math.min(i.outerWidth(),i.outerHeight()),10),e.model.borderRadiusPerc>100&&(e.model.borderRadiusPerc=100)):e.model.borderRadiusPerc=0,e.tmpModel={boxShadowDirection:0,boxShadowX:0,boxShadowY:0,boxShadowBlur:0,boxShadowSize:0,boxShadowColor:"rgba(0,0,0,0.5)"},a.boxShadow){var s=a.boxShadow.split(" ");e.tmpModel.boxShadowX=parseInt(s[0],10),e.tmpModel.boxShadowY=parseInt(s[1],10),e.tmpModel.boxShadowDirection=parseInt(a.boxShadowDirection,10)||0,e.tmpModel.boxShadowBlur=parseInt(s[2],10),e.tmpModel.boxShadowColor=s[3],e.tmpModel.boxShadowSize=parseInt(a.boxShadowSize,10)||0}e.clear=function(){e.model={backgroundColor:"",opacity:0,color:"#676767",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",paddingBottom:0,paddingTop:0,lineHeight:1,borderRadius:0,transform:0},e.tmpModel={boxShadowDirection:0,boxShadowX:0,boxShadowY:0,boxShadowBlur:0,boxShadowSize:0,boxShadowColor:"rgba(0,0,0,0.5)"}},e.$watch("tmpModel",function(){var t={};$.extend(!0,t,e.model),t.borderRadius+="px",t.borderTopLeftRadius=t.borderTopRightRadius=t.borderBottomLeftRadius=t.borderBottomRightRadius=t.borderRadius,t.opacity=(100-e.model.opacity)/100,t.boxShadow=Math.round(e.tmpModel.boxShadowX)+"px "+Math.round(e.tmpModel.boxShadowY)+"px "+e.tmpModel.boxShadowBlur+"px "+e.tmpModel.boxShadowColor,t.boxShadowDirection=e.tmpModel.boxShadowDirection,t.boxShadowSize=e.tmpModel.boxShadowSize,t.transform="rotateZ("+e.model.transform+"deg)",$.extend(!0,n.css,t)},!0),e.$watch("model",function(){var t={};$.extend(!0,t,e.model),t.borderRadius+="px",t.borderTopLeftRadius=t.borderTopRightRadius=t.borderBottomLeftRadius=t.borderBottomRightRadius=t.borderRadius,t.opacity=(100-e.model.opacity)/100,t.boxShadow=Math.round(e.tmpModel.boxShadowX)+"px "+Math.round(e.tmpModel.boxShadowY)+"px "+e.tmpModel.boxShadowBlur+"px "+e.tmpModel.boxShadowColor,t.boxShadowDirection=e.tmpModel.boxShadowDirection,t.boxShadowSize=e.tmpModel.boxShadowSize,t.transform="rotateZ("+e.model.transform+"deg)",$.extend(!0,n.css,t)},!0)}]).directive("styleInput",function(){return{restrict:"AE",link:function(e,t,n){var a=$("#inside_"+e.elemDef.id+" > .element-box");e.$watch(function(){return $(t).val()},function(){if("borderWidth"==n.cssItem){a.css({borderStyle:e.model.borderStyle,borderWidth:$(t).val()});var i={width:a.width(),height:a.height()};if(4==e.elemDef.type){var s=a.find("img"),o=s.width()/s.height(),l=i.width/i.height;o>=l?(s.outerHeight(i.height),s.outerWidth(i.height*o),s.css("marginLeft",-(s.outerWidth()-i.width)/2),s.css("marginTop",0)):(s.outerWidth(i.width),s.outerHeight(i.width/o),s.css("marginTop",-(s.outerHeight()-i.height)/2),s.css("marginLeft",0)),e.elemDef.properties.imgStyle.marginTop=s.css("marginTop"),e.elemDef.properties.imgStyle.marginLeft=s.css("marginLeft"),e.elemDef.properties.imgStyle.width=s.outerWidth(),e.elemDef.properties.imgStyle.height=s.outerHeight()}}"borderRadius"==n.cssItem&&a.css({borderRadius:e.model.borderRadius}),"opacity"==n.cssItem&&a.css({opacity:(100-$(t).val())/100}),"backgroundColor"==n.cssItem&&a.css({backgroundColor:$(t).val()}),"color"==n.cssItem&&a.css({color:$(t).val()}),"borderStyle"==n.cssItem&&a.css({borderStyle:e.model.borderStyle}),"borderColor"==n.cssItem&&a.css({borderColor:e.model.borderColor}),"padding"==n.cssItem&&a.css({paddingTop:e.model.paddingTop,marginTop:-e.model.paddingBottom}),"lineHeight"==n.cssItem&&a.css({lineHeight:e.model.lineHeight}),"transform"==n.cssItem&&a.parents("li").css({transform:"rotateZ("+e.model.transform+"deg)"}),"boxShadow"==n.cssItem&&(e.tmpModel.boxShadowX=-Math.sin(e.tmpModel.boxShadowDirection*Math.PI/180)*e.tmpModel.boxShadowSize,e.tmpModel.boxShadowY=Math.cos(e.tmpModel.boxShadowDirection*Math.PI/180)*e.tmpModel.boxShadowSize,a.css({boxShadow:Math.round(e.tmpModel.boxShadowX)+"px "+Math.round(e.tmpModel.boxShadowY)+"px "+e.tmpModel.boxShadowBlur+"px "+e.tmpModel.boxShadowColor}))})}}}).directive("angleKnob",function(){return{restrict:"AE",templateUrl:"scene/console/angle-knob.tpl.html",link:function(e,t){function n(e,t){var n=Math.sqrt((e-28)*(e-28)+(t-28)*(t-28))/28,a=28+(e-28)/n,i=28+(t-28)/n;s.css({top:Math.round(i),left:Math.round(a)})}function a(e,t){var n=e-28,a=28-t,i=180*Math.atan(n/a)/Math.PI;return t>28&&(i+=180),28>=t&&28>e&&(i+=360),Math.round(i)}var i=$(t).find(".sliderContainer"),s=$(t).find(".sliderKnob");e.$watch(function(){return e.tmpModel.boxShadowDirection},function(e){s.css({top:28-28*Math.cos(e*Math.PI/180),left:28+28*Math.sin(e*Math.PI/180)})}),0!=e.tmpModel.boxShadowDirection&&s.css({top:28-28*Math.cos(e.tmpModel.boxShadowDirection*Math.PI/180),left:28+28*Math.sin(e.tmpModel.boxShadowDirection*Math.PI/180)}),i.bind("mousedown",function(t){t.stopPropagation();var s=i.offset().left,o=i.offset().top;n(t.pageX-s,t.pageY-o);var l=a(t.pageX-s,t.pageY-o);e.tmpModel.boxShadowDirection=l,e.$apply(),$(this).bind("mousemove",function(t){t.stopPropagation(),n(t.pageX-s,t.pageY-o);var i=a(t.pageX-s,t.pageY-o);e.tmpModel.boxShadowDirection=i,e.$apply()}),$(this).bind("mouseup",function(){$(this).unbind("mousemove"),$(this).unbind("mouseup")})})}}}),n.module("scene.create.console.tel",["app.directives.addelement"]),n.module("scene.create.console.tel").controller("TelConsoleCtrl",["$scope","$timeout","localizedMessages","obj",function(e,t,a,i){e.model={title:i.properties.title,number:i.properties.number},e.confirm=function(){if(!e.model.title||0===e.model.title.length)return alert("按钮名称不能为空"),void $('.bg_console input[type="text"]').focus();if(!e.model.number||0===e.model.title.number)return alert("电话号码不能为空"),void $('.bg_console input[type="text"]').focus();var t=new RegExp(/(\d{11})|^((\d{7,8})|(^400[0-9]\d{6})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$/g);return t.test(e.model.number)?void e.$close(e.model):void alert("手机号码格式错误")},e.cancel=function(){e.$dismiss()},e.removePlaceHolder=function(){$(".tel-button").attr("placeholder","")},e.addPlaceHolder=function(){$(".tel-button").attr("placeholder","010-88888888")},e.chooseTelButton=function(t,n,a){e.model.title=t.text,"A"==a.target.nodeName&&(e.model.btnStyle=t.btnStyle),e.btnIndex=n},e.buttons=[{id:1,text:"一键拨号",btnStyle:{width:"90px",backgroundColor:"rgb(244, 113, 31)",height:"30px","text-algn":"center","line-height":"30px",color:"rgb(255, 255, 255)","-webkit-border-radius":"5px","-moz-border-radius":"5px","border-radius":"3px"}},{id:2,text:"热线电话",btnStyle:{width:"90px",backgroundColor:"rgb(253, 175, 7)",height:"30px","text-algn":"center","line-height":"30px",color:"rgb(255, 255, 255)","-webkit-border-radius":"40px","-moz-border-radius":"40px","border-radius":"3px"}},{id:3,text:"拨打电话",btnStyle:{width:"90px",backgroundColor:"rgb(121, 196, 80)",height:"30px","text-algn":"center","line-height":"30px",color:"rgb(255, 255, 255)","-webkit-border-radius":"5px","-moz-border-radius":"5px","border-radius":"3px"}},{id:4,text:"一键拨号",btnStyle:{width:"90px",height:"30px",backgroundColor:"#fff","text-algn":"center",border:"1px solid #3FB816","line-height":"30px",color:"rgb(0, 0, 0)","-webkit-border-radius":"5px","-moz-border-radius":"5px","border-radius":"3px"}}],n.forEach(e.buttons,function(t,n){i.css.background&&i.css.background==t.btnStyle.background&&(e.btnIndex=n)})}]),n.module("scene.create.console.video",[]),n.module("scene.create.console.video").controller("VideoCtrl",["$scope","$timeout","obj",function(e,t,n){e.model||(e.model={}),e.model.src=n.properties.src,e.confirm=function(){return e.model.src?void e.$close(e.model.src):void alert("请输入视频地址")},e.cancel=function(){e.$dismiss()}}]),n.module("scene.create",["app.directives.editor","services.scene","confirm-dialog","services.modal","app.directives.component","services.pagetpl","scene.create.console","app.directives.comp.editor","app.directives.addelement","scene.my.upload","services.i18nNotifications"]),n.module("scene.create").controller("CreateSceneCtrl",["$timeout","$compile","$rootScope","$scope","$stateParams","$state","$location","sceneService","pageTplService","$modal","ModalService","security","$window","i18nNotifications",function(t,a,i,s,o,l,r,c,p,g,u,m,h,f){function v(e,t,a){s.loading=!0,$("#editBG").hide(),s.pageId=s.pages[e-1].id,c.getSceneByPage(s.pageId,t,a).then(function(o){s.loading=!1,s.tpl=o.data,
C=JSON.stringify(s.tpl),s.sceneId=s.tpl.obj.sceneId,s.tpl.obj.properties&&(s.tpl.obj.properties.image||s.tpl.obj.properties.scratch)?(s.tpl.obj.properties.scratch?s.scratch=s.tpl.obj.properties.scratch:s.tpl.obj.properties.image&&(s.scratch.image=s.tpl.obj.properties.image,s.scratch.percentage=s.tpl.obj.properties.percentage,s.tpl.obj.properties.tip&&(s.scratch.tip=s.tpl.obj.properties.tip)),s.effectName="涂抹",n.forEach(s.scratches,function(e){e.path==s.scratch.image.path&&(s.scratch.image=e)}),n.forEach(s.percentages,function(e){e.value==s.scratch.percentage.value&&(s.scratch.percentage=e)})):(s.scratch={},s.scratch.image=s.scratches[0],s.scratch.percentage=s.percentages[0]),s.tpl.obj.properties&&s.tpl.obj.properties.finger?(s.finger=s.tpl.obj.properties.finger,s.effectName="指纹",n.forEach(s.fingerZws,function(e){e.path==s.finger.zwImage.path&&(s.finger.zwImage=e)}),n.forEach(s.fingerBackgrounds,function(e){e.path==s.finger.bgImage.path&&(s.finger.bgImage=e)})):(s.finger={},s.finger.zwImage=s.fingerZws[0],s.finger.bgImage=s.fingerBackgrounds[0]),s.tpl.obj.properties&&s.tpl.obj.properties.effect&&"money"==s.tpl.obj.properties.effect.name&&(s.effectName="数钱",s.money={tip:s.tpl.obj.properties.effect.tip}),s.tpl.obj.properties&&s.tpl.obj.properties.fallingObject?(s.falling=s.tpl.obj.properties.fallingObject,n.forEach(s.fallings,function(e){e.path==s.falling.src.path&&(s.falling.src=e)}),s.effectName="环境"):s.falling={src:s.fallings[0],density:2},(t||a)&&(r.$$search={},r.search("pageId",++e),s.getPageNames()),s.pageNum=e,x=s.tpl.obj.scene.name,$(".nr").empty(),c.templateEditor.parse({def:s.tpl.obj,appendTo:".nr",mode:"edit"}),i.$broadcast("dom.changed")},function(){s.loading=!1})}function y(){f.pushForCurrentRoute("scene.save.success.nopublish","notify.success")}s.loading=!1,s.PREFIX_FILE_HOST=PREFIX_FILE_HOST,s.tpl={};var w,x="",C="",_="";s.templateType=1,s.categoryId=-1,s.isEditor=i.isEditor,s.createComp=c.createComp,s.createCompGroup=c.createCompGroup,s.updateCompPosition=c.updateCompPosition,s.updateCompAngle=c.updateCompAngle,s.updateCompSize=c.updateCompSize,s.openAudioModal=c.openAudioModal,s.isAllowToAccessScrollImage=m.isAllowToAccess(4);var T=null;s.scratch||(s.scratch={}),s.finger||(s.finger={}),s.effectList=[{type:"scratch",name:"涂抹",src:CLIENT_CDN+"images/create/waterdrop.jpg"},{type:"finger",name:"指纹",src:CLIENT_CDN+"images/create/fingers/zhiwen1.png"},{type:"money",name:"数钱",src:CLIENT_CDN+"images/create/money_thumb1.jpg"},{type:"fallingObject",name:"环境",src:CLIENT_CDN+"images/create/falling.png"}],s.scratches=[{name:"水滴",path:CLIENT_CDN+"images/create/waterdrop.jpg"},{name:"细沙",path:CLIENT_CDN+"images/create/sand.jpg"},{name:"花瓣",path:CLIENT_CDN+"images/create/flowers.jpg"},{name:"金沙",path:CLIENT_CDN+"images/create/goldsand.jpg"},{name:"白雪",path:CLIENT_CDN+"images/create/snowground.jpg"},{name:"模糊",path:CLIENT_CDN+"images/create/mohu.jpg"},{name:"落叶",path:CLIENT_CDN+"images/create/leaves.jpg"},{name:"薄雾",path:CLIENT_CDN+"images/create/smoke.png"}],s.percentages=[{id:1,value:.15,name:"15%"},{id:2,value:.3,name:"30%"},{id:3,value:.6,name:"60%"}],s.fingerZws=[{name:"粉色指纹",path:CLIENT_CDN+"images/create/fingers/zhiwen1.png"},{name:"白色指纹",path:CLIENT_CDN+"images/create/fingers/zhiwen2.png"},{name:"蓝色指纹",path:CLIENT_CDN+"images/create/fingers/zhiwen3.png"}],s.fingerBackgrounds=[{name:"粉红回忆",path:CLIENT_CDN+"images/create/fingers/bg1.jpg"},{name:"深蓝花纹",path:CLIENT_CDN+"images/create/fingers/bg2.jpg"},{name:"淡绿清新",path:CLIENT_CDN+"images/create/fingers/bg3.jpg"},{name:"深紫典雅",path:CLIENT_CDN+"images/create/fingers/bg4.jpg"},{name:"淡紫水滴",path:CLIENT_CDN+"images/create/fingers/bg5.jpg"},{name:"蓝白晶格",path:CLIENT_CDN+"images/create/fingers/bg6.jpg"},{name:"蓝色水滴",path:CLIENT_CDN+"images/create/fingers/bg7.jpg"},{name:"朦胧绿光",path:CLIENT_CDN+"images/create/fingers/bg8.jpg"},{name:"灰色金属",path:CLIENT_CDN+"images/create/fingers/bg9.jpg"}],s.fallings=[{name:"福字",path:CLIENT_CDN+"images/create/fallings/fuzi1.png",rotate:180,vy:3},{name:"红包",path:CLIENT_CDN+"images/create/fallings/hongbao2.png",rotate:180,vy:3},{name:"绿枫叶",path:CLIENT_CDN+"images/create/fallings/lvfengye.png",rotate:180,vy:3},{name:"星星",path:CLIENT_CDN+"images/create/fallings/xing.png",rotate:180,vy:3},{name:"雪花",path:CLIENT_CDN+"images/create/fallings/snow.png",rotate:0,vy:1}],s.scratch.image=s.scratches[0],s.scratch.percentage=s.percentages[0],s.finger.zwImage=s.fingerZws[0],s.finger.bgImage=s.fingerBackgrounds[0],s.$on("dom.changed",function(){a($(".nr"))(s)}),s.openUploadModal=function(){T||(T=g.open({windowClass:"upload-console",templateUrl:"my/upload.tpl.html",controller:"UploadCtrl",resolve:{category:function(){return{categoryId:"0",fileType:"1",scratch:"scratch"}}}}).result.then(function(e){s.scratch.image.path=s.PREFIX_FILE_HOST+e,s.scratch.image.name="",T=null},function(){T=null}))},s.cancel=function(){},s.cancelEffect=function(){s.effectType="",$("#modalBackdrop1").remove()};var k=null;s.$on("showCropPanel",function(e,t){var n=$(".content").eq(0);k?(i.$broadcast("changeElemDef",t),k.show()):k=a("<div crop-image></div>")(s),n.append(k)}),s.saveEffect=function(e){if(s.tpl.obj.properties={},"scratch"==s.effectType)s.tpl.obj.properties.scratch=e,s.effectName="涂抹";else if("finger"==s.effectType)s.tpl.obj.properties.finger=e,s.effectName="指纹";else if("money"==s.effectType){if(e&&e.tip&&d(e.tip)>24)return alert("提示文字不能超过24个字符！"),void(s.tpl.obj.properties=null);e||(e={tip:"握紧钱币，数到手抽筋吧！"}),s.tpl.obj.properties.effect={name:"money",tip:e.tip},s.effectName="数钱"}"fallingObject"==s.effectType&&(s.tpl.obj.properties.fallingObject=e,s.effectName="环境"),s.saveScene(),s.cancelEffect()};var I=null;s.$on("showStylePanel",function(e,t){var n=$(".content").eq(0);I?I.show():"style"==t.activeTab?I=a('<div style-modal active-tab="style"></div>')(s):"anim"==t.activeTab&&(I=a('<div style-modal active-tab="anim"></div>')(s)),n.append(I)}),s.$on("hideStylePanel",function(){I&&I.hide()});var k=null;s.$on("showCropPanel",function(e,t){var n=$(".content").eq(0);k?(i.$broadcast("changeElemDef",t),k.show()):k=a("<div crop-image></div>")(s),n.append(k)}),s.navTo=function(e,t){s.pageList=!0,!s.isEditor||1101!==s.sceneId&&1102!==s.sceneId&&1103!==s.sceneId||(s.pageLabelAll.length=0,s.pageIdTag=e.id,s.getPageTagLabel()),e.id!=s.tpl.obj.id&&s.saveScene(null,function(){v(t+1),r.$$search={},r.search("pageId",e.num)})},s.stopCopy=function(){b=!1},s.getOriginPageName=function(e){_=e.name},s.getPageNames=function(){var e=o.sceneId;c.getPageNames(e).then(function(e){s.pages=e.data.list,n.forEach(s.pages,function(e,t){e.name||(e.name="第"+(t+1)+"页")}),v(r.search().pageId?r.search().pageId:s.pages[0].num)})},s.getPageNames(),s.editableStatus=[],s.savePageNames=function(e,t){e.name||(e.name="第"+(t+1)+"页"),s.tpl.obj.name=e.name,_!=e.name&&c.savePageNames(s.tpl.obj).then(function(){})},s.stopCopy=function(){b=!1},s.removeScratch=function(e){e.stopPropagation(),s.tpl.obj.properties=null},s.$on("text.click",function(e,n){$("#btn-toolbar").remove(),$("body").append(a("<toolbar></toolbar>")(s));var i=$(n).offset().top;t(function(){$("#btn-toolbar").css("top",i-50),$("#btn-toolbar").show(),$("#btn-toolbar").bind("click mousedown",function(e){e.stopPropagation()}),$(n).wysiwyg_destroy(),$(n).wysiwyg(),n.focus()})}),s.updatePosition=function(e){var t,n,a=s.tpl.obj.elements,i=[];for(n=0;n<a.length;n++)if("3"==a[n].type){a[n].num=0,i.push(a[n]),a.splice(n,1);break}for(t=0;t<e.length;t++)for(n=0;n<a.length;n++)if(a[n].num==e[t]){a[n].num=t+1,i.push(a[n]),a.splice(n,1);break}s.tpl.obj.elements=i},s.updateEditor=function(){$(".nr").empty(),c.templateEditor.parse({def:s.tpl.obj,appendTo:".nr",mode:"edit"}),a($(".nr"))(s)},s.saveScene=function(e,t){return C==JSON.stringify(s.tpl)?(t&&t(),void(e&&(!s.tpl.obj.scene.publishTime||s.tpl.obj.scene.updateTime>s.tpl.obj.scene.publishTime?y():f.pushForCurrentRoute("scene.save.success.published","notify.success")))):(""===s.tpl.obj.scene.name&&(s.tpl.obj.scene.name=x),s.tpl.obj.scene.name=s.tpl.obj.scene.name.replace(/(<([^>]+)>)/gi,""),c.getSceneObj().obj.scene.image&&c.getSceneObj().obj.scene.image.bgAudio&&(s.tpl.obj.scene.image||(s.tpl.obj.scene.image={}),s.tpl.obj.scene.image.bgAudio=c.getSceneObj().obj.scene.image.bgAudio),c.resetCss(),s.tpl.obj.scene.image.isAdvancedUser=!(!i.isAdvancedUser&&!i.isVendorUser),void c.saveScene(s.tpl.obj).then(function(){s.tpl.obj.scene.updateTime=(new Date).getTime(),C=n.toJson(s.tpl),w&&(c.recordTplUsage(w),w=null),t&&t(),e&&y()},function(){}))},s.publishScene=function(){return s.tpl.obj.scene.publishTime&&s.tpl.obj.scene.updateTime<=s.tpl.obj.scene.publishTime&&C==n.toJson(s.tpl)?void r.path("my/scene/"+s.sceneId):void s.saveScene(null,function(){c.publishScene(s.tpl.obj.sceneId).then(function(e){e.data.success&&(f.pushForNextRoute("scene.publish.success","notify.success"),b=!1,r.path(s.tpl.obj.scene.publishTime?"my/scene/"+s.sceneId:"my/sceneSetting/"+s.sceneId))})})},s.exitScene=function(){b=!1,C==n.toJson(s.tpl)?h.history.back():u.openConfirmDialog({msg:"是否保存更改内容？",confirmName:"保存",cancelName:"不保存"},function(){s.saveScene(),h.history.back()},function(){h.history.back()})},s.duplicatePage=function(){s.saveScene(null,function(){v(s.pageNum,!1,!0)})},s.insertPage=function(){s.saveScene(null,function(){v(s.pageNum,!0,!1)}),$("#pageList").height()>=360&&t(function(){var e=document.getElementById("pageList");e.scrollTop=e.scrollHeight},200)},s.deletePage=function(e){e.stopPropagation(),s.loading||(s.loading=!0,c.deletePage(s.tpl.obj.id).then(function(){s.loading=!1,r.$$search={},s.pages.length==s.pageNum?(s.pages.pop(),r.search("pageId",--s.pageNum),v(s.pageNum,!1,!1)):(s.pages.splice(s.pageNum-1,1),r.search("pageId",s.pageNum),v(s.pageNum,!1,!1))},function(){s.loading=!1}))},s.removeBG=function(e){e.stopPropagation();var t,n=s.tpl.obj.elements;for(t=0;t<n.length;t++)if(3==n[t].type){n.splice(t,1);var a;for(a=t;a<n.length;a++)n[a].num--;break}$(".edit_area").parent().css({backgroundColor:"transparent",backgroundImage:"none"}),$("#editBG").hide()},s.removeBGAudio=function(e){e.stopPropagation(),delete s.tpl.obj.scene.image.bgAudio},$(".scene_title").on("paste",function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain")||prompt("Paste something..");document.execCommand("insertText",!1,t)}),s.showPageEffect=!1,s.openPageSetPanel=function(){s.showPageEffect||(s.showPageEffect=!0,$('<div id="modalBackdrop" class="modal-backdrop fade in" ng-class="{in: animate}" ng-style="{\'z-index\': 1040 + (index &amp;&amp; 1 || 0) + index*10}" modal-backdrop="" style="z-index: 1040;"></div>').appendTo("body").click(function(){s.showPageEffect=!1,s.$apply(),$(this).remove()}))},s.openOneEffectPanel=function(e){s.showPageEffect=!1,$("#modalBackdrop").remove(),s.effectType=e.type?e.type:e.image||e.scratch?"scratch":e.finger?"finger":e.fallingObject?"fallingObject":e.effect.name,$('<div id="modalBackdrop1" class="modal-backdrop fade in" ng-class="{in: animate}" ng-style="{\'z-index\': 1040 + (index &amp;&amp; 1 || 0) + index*10}" modal-backdrop="" style="z-index: 1040;"></div>').appendTo("body").click(function(){s.effectType="",s.$apply(),$(this).remove()})},s.getPageTplsByType=function(e){P(e)};var S=function(){var e="1"==s.type?3:4;s.childCatrgoryList&&s.childCatrgoryList.length>e?(s.otherCategory=s.childCatrgoryList.slice(e),s.childCatrgoryList=s.childCatrgoryList.slice(0,e)):s.otherCategory=[]},E={},P=function(e){E[e]?(s.childCatrgoryList=E[e],S(),s.getPageTplTypestemp(s.childCatrgoryList[0].id,e)):p.getPageTagLabel(e).then(function(t){s.childCatrgoryList=E[e]=t.data.list,S(),s.getPageTplTypestemp(s.childCatrgoryList[0].id,e)})},L={};s.getPageTagLabel=function(e){L[e]?(s.pageLabel=L[e],R()):p.getPageTagLabel(e).then(function(t){s.pageLabel=L[e]=t.data.list,R()})},s.pageLabelAll=[];var D,R=function(){p.getPageTagLabelCheck(s.pageIdTag).then(function(e){D=e.data.list;for(var t=0;t<s.pageLabel.length;t++){for(var n={id:s.pageLabel[t].id,name:s.pageLabel[t].name},a=0;a<D.length;a++){if(D[a].id===s.pageLabel[t].id){n.ischecked=!0;break}n.ischecked=!1}s.pageLabelAll.push(n)}})};s.pageChildLabel=function(){var e,t=[];for(e=0;e<s.pageLabelAll.length;e++)s.pageLabelAll[e].ischecked&&t.push(s.pageLabelAll[e].id);p.updataChildLabel(t,s.pageIdTag).then(function(){alert("分配成功！"),l.reload()},function(){})},s.getPageTplTypestemp=function(e,t){p.getPageTplTypestemp(e,t).then(function(t){if(s.categoryId=e,s.pageTpls=t.data.list&&t.data.list.length>0?t.data.list:[],s.otherCategory.length>0){var n;n=s.childCatrgoryList[0];for(var a=0;a<s.otherCategory.length;a++)s.categoryId==s.otherCategory[a].id&&(s.childCatrgoryList[0]=s.otherCategory[a],s.otherCategory[a]=n)}})},p.getPageTplTypes().then(function(e){s.pageTplTypes=e.data.list&&e.data.list.length>0?e.data.list.splice(0,3):[]}).then(function(){s.getPageTplsByType(s.pageTplTypes[0].value)}),s.exitPageTplPreview=function(){$(".nr").empty(),c.templateEditor.parse({def:s.tpl.obj,appendTo:".nr",mode:"edit"}),i.$broadcast("dom.changed")},s.insertPageTpl=function(e){s.loading=!0;var t=function(e){c.getSceneTpl(e).then(function(e){s.loading=!1,w=e.data.obj.id,s.tpl.obj.elements=c.getElements(),$(".nr").empty(),c.templateEditor.parse({def:s.tpl.obj,appendTo:".nr",mode:"edit"}),i.$broadcast("dom.changed")},function(){s.loading=!1})};s.tpl.obj.elements&&s.tpl.obj.elements.length>0?u.openConfirmDialog({msg:"页面模板会覆盖编辑区域已有组件，是否继续？",confirmName:"是",cancelName:"取消"},function(){t(e)}):t(e)},s.chooseThumb=function(){g.open({windowClass:"console",templateUrl:BASE_URL+"templates/scene.console.bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:"0"}}}}).result.then(function(e){s.tpl.obj.properties||(s.tpl.obj.properties={}),s.tpl.obj.properties.thumbSrc=e.data},function(){s.tpl.obj.properties.thumbSrc=null})},$(e).bind("beforeunload",function(){return"请确认您的场景已保存"}),s.$on("$destroy",function(){$(e).unbind("beforeunload")}),s.sortableOptions={placeholder:"ui-state-highlight ui-sort-position",containment:"#containment",update:function(e,t){var n=t.item.sortable.dropindex+1,a=s.pages[t.item.sortable.index].id;s.saveScene(null,function(){c.changePageSort(n,a).then(function(){v(n,!1,!1,!0),r.$$search={},r.search("pageId",n),s.pageNum=n})})}}}]).directive("changeColor",function(){return{link:function(e,t){t.bind("click",function(){$(t).addClass("current")})}}}),n.module("scene.create.new",["services.scene"]),n.module("scene.create.new").controller("SceneNewCtrl",["$scope","$location","sceneService","items",function(e,t,a,i){e.scene={name:""},i&&(e.scene.name=i.name),a.getSceneType().then(function(t){e.scene.types=t.data.list,i?n.forEach(e.scene.types,function(t){var n=""+i.type;t.value===n&&(e.scene.type=t)}):e.scene.type=t.data.list[0]}),e.create=function(){if(""===e.scene.name.trim())return void alert("请输入场景名称");var n=d(e.scene.name.trim());if(n>48)return void alert("场景名称不能超过48个字符或24个汉字");if(i){var s={id:i.id,name:e.scene.name,type:e.scene.type.value,pageMode:e.scene.pageMode.id};a.createByTpl(s).then(function(e){t.path("scene/create/"+e.data.obj),t.search("pageId",1)},function(){})}else a.createBlankScene(e.scene.name,e.scene.type.value,e.scene.pageMode.id).then(function(e){t.path("scene/create/"+e.data.obj),t.search("pageId",1)});e.$close()},e.cancel=function(){e.$dismiss()},e.pagemodes=[{id:2,name:"上下翻页"},{id:1,name:"左右翻页"}],e.scene.pageMode=e.pagemodes[0]}]),n.module("scene",["scene.create","services.scene","scene.create.new","app.directives.addelement"]),n.module("scene").controller("SceneCtrl",["$window","$scope","$location","sceneService","$modal",function(t,n,a,i,s){n.PREFIX_FILE_HOST=PREFIX_FILE_HOST,n.PREFIX_CLIENT_HOST=PREFIX_HOST,n.isActive="scene",n.scene={type:null},n.totalItems=0,n.currentPage=1,n.toPage="",n.tabindex=0,n.childcat=0,n.order="new";var o=12,l=0;n.pageChanged=function(e){return r.targetPage=e,1>e||e>n.totalItems/11+1?void alert("此页超出范围"):void n.getPageTpls(1,r.sceneType,r.tagId,e,o,n.order)},n.preview=function(t){var n=VIEW_URL+"v-"+t;e.open(n,"_blank")},n.createScene=function(e){s.open({windowClass:"login-container",templateUrl:"scene/createNew.tpl.html",controller:"SceneNewCtrl",resolve:{items:function(){return e}}})},n.getStyle=function(e){return{"background-image":"url("+(e.indexOf("syspic/")>=0?PREFIXSYS_FILE_HOST:USER_FILE_HOST)+e+")"}},n.show=function(e){console.log(e.target),$(e.target).children(".cc").css("display","block")},i.getSceneType().then(function(e){n.pageTplTypes=e.data.list&&e.data.list.length>0?e.data.list:[]}).then(function(){}),n.tplnew=function(e){n.order=e,r.orderby=e,r.tagId?n.getPageTpls(null,r.sceneType,r.tagId,l,o,e):n.getPageTpls(1)};var r={sceneType:null,tagId:"",orderby:"new",pageNo:"0",targetPage:""},c={};n.getPageTplsByType=function(e){r.sceneType=e,n.childcat=e,n.categoryId=0,c[e]?(n.childCatrgoryList=c[e],n.getPageTpls(1,r.sceneType,n.childCatrgoryList[0].id,l,o,n.order)):i.getPageTplTypesTwo(e,e).then(function(t){n.childCatrgoryList=c[e]=t.data.list,n.getPageTpls(1,r.sceneType,n.childCatrgoryList[0].id,l,o,n.order)})},n.allpage=function(e){r.sceneType=e,n.childcat=0,n.getPageTpls(1),n.childCatrgoryList=[]},n.getPageTpls=function(e,t,a,s,o){var o=11;n.categoryId=a,r.tagId=a,i.getPageTpls(e,t,a,s,o,r.orderby).then(function(e){e.data.list&&e.data.list.length>0?(n.tpls=e.data.list,n.totalItems=e.data.map.count,n.currentPage=e.data.map.pageNo,n.allPageCount=e.data.map.count,n.toPage=""):n.tpls=[]})},n.getPageTpls(1)}]),n.module("usercenter.relAccount",["services.usercenter"]),n.module("usercenter.relAccount").controller("RelAccountCtrl",["$rootScope","$scope","$window","$stateParams","usercenterService","security","$modal","ModalService","$location","userinfo",function(e,t,a,i,s,o,l,r,c,d){t.relAccount=function(){var a=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return a.test(t.user.email)?t.user.password.trim()?void s.relAccount(d.id,t.user.email,t.user.password).then(function(a){if(200==a.data.code){alert("绑定成功！"),/qq/gi.test(a.data.msg)&&(t.relType="qq"),/weixin/gi.test(a.data.msg)&&(t.relType="weixin"),/weibo/gi.test(a.data.msg)&&(t.relType="weibo");var i={type:t.relType,email:n.copy(t.user.email)};t.$close(i),e.$broadcast}else t.relErr=a.data.msg},function(){t.$dismiss()}):void alert("密码不能为空！"):void alert("请输入正确得邮箱格式")},t.checkUpperCase=function(){/[A-Z]/g.test(t.user.email)&&(t.user.email=t.user.email.toLowerCase(),alert("请用小写字母邮箱注册，已将邮箱中的大写字母自动转换成小写"))},t.cancel=function(){t.$dismiss()}}]),n.module("usercenter.request",["services.usercenter","app.directives.qrcode"]),n.module("usercenter.request").controller("UsercenterrequestCtrl",["$rootScope","$scope","$window","$stateParams","usercenterService","security","$modal","ModalService","$location",function(e,t,n,a,i,s){t.PREFIX_CLIENT_HOST=PREFIX_HOST,t.currentUser=s.currentUser,t.cancel=function(){t.$dismiss()}}]),n.module("usercenter.transfer",["services.usercenter"]),n.module("usercenter.transfer").controller("UsercentertransferCtrl",["$rootScope","$scope","$window","$stateParams","usercenterService","security","$modal","ModalService","$location","username",function(e,t,n,a,i,s,o,l,r,c){t.actionerror=!1,t.retrieverror=!1,t.transfer=!0,t.userXd={toUser:"",xdCount:""},t.submit=!1,t.getUserXd=function(){i.getUserXd().then(function(e){e.data.success&&(t.xdCount=e.data.obj)})},t.getUserXd(),t.confirm=function(){t.submit=!0,t.getgiveXd()},t.getgiveXd=function(){return t.userXd.toUser?t.userXd.toUser==c?void(t.actionerror="不能把积分转送给自己"):/^\+?[1-9][0-9]*$/.test(t.userXd.xdCount)?(t.userXd.xdCount>t.xdCount&&(t.retrieverror="积分不足"),void i.getgiveXd(t.userXd).then(function(e){200==e.data.code?t.transfer=!1:1003==e.data.code?(t.actionerror=e.data.msg,t.retrieverror=""):1010==e.data.code&&(t.retrieverror=e.data.msg,t.actionerror="")})):void(t.retrieverror="正确填写积分数目"):void(t.actionerror="账号不能为空")},t.cancel=function(){t.$dismiss()}}]),n.module("usercenter",["usercenter.transfer","usercenter.request","services.usercenter","services.localizedMessages","security.service","app.directives.addelement","services.modal","usercenter.relAccount"]),n.module("usercenter").controller("UserCenterCtrl",["$rootScope","$scope","$window","$stateParams","usercenterService","security","$modal","ModalService","$location","$filter","fixnumFilter",function(e,t,a,i,s,o,l,r,c){t.PREFIX_FILE_HOST=PREFIX_FILE_HOST,t.PREFIX_SERVER_HOST=PREFIX_URL,t.PREFIX_CLIENT_HOST=PREFIX_HOST,t.isVendorUser=o.isVendorUser(),t.password={},t.pageSize=5,t.XdpageSize=10,t.XdpageNo=1,t.XdtoPage="",t.pageNo=1,t.XdcurrentPage=1,t.msgCurrentPage=1,t.toPage=1,t.getUserInfo=function(){s.getUserInfo().then(function(e){t.userinfo=e.data.obj,t.master=n.copy(t.userinfo),t.userinfo.headImg?/^http.*/.test(t.userinfo.headImg)&&(t.headImg=t.userinfo.headImg):t.headImg=CLIENT_CDN+"images/defaultuser.jpg";var a=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;"eqs"!=t.userinfo.loginName.substr(0,3)||a.test(t.userinfo.loginName)||(t.userinfo.noRel="未绑定",t.showRelButton=!0),/qq/gi.test(t.userinfo.relType)&&(t.qqRel=!0),/weixin/gi.test(t.userinfo.relType)&&(t.wxRel=!0),/weibo/gi.test(t.userinfo.relType)&&(t.wbRel=!0)})},t.getUserInfo(),t.saveUserInfo=function(e){var n=/^1\d{10}$/;if(e.phone&&!n.test(e.phone))return alert("手机号码格式错误"),void(e.phone="");var a=/(^[1-9]\d*$)/;if(e.qq&&!a.test(e.qq))return alert("qq号码格式错误"),void(e.qq="");if(e.tel&&!a.test(e.tel))return alert("电话号码格式错误"),void(e.tel="");var i={id:e.id,name:e.name,sex:e.sex,phone:e.phone,tel:e.tel,qq:e.qq,headImg:e.headImg};s.saveUserInfo(i).then(function(e){e.data.success&&(t.isEditable=!1,alert("保存成功"))})},t.tabid=i.id,t.getUserXd=function(){s.getUserXd().then(function(e){e.data.success&&(t.xdCounts=e.data.obj)})},t.getUserXd(),t.getXdlog=function(e){var n=e;s.getXdlog(n,t.XdpageSize).then(function(e){e.data.success&&(t.xdLogs=e.data.list,t.XdCount=e.data.map.count,t.XdcurrentPage=e.data.map.pageNo,t.XdNumPages=Math.ceil(t.XdCount/t.XdpageSize))})},t.getXdlog(t.XdpageNo),t.XdpageChanged=function(e){t.XdcurrentPage=e,t.getXdlog(e)},t.getXdStat=function(){s.getXdStat().then(function(e){t.getXdStat=e.data.map})},t.getXdStat(),t.reset=function(){return t.password.newPw!=t.password.confirm?(t.authError="新密码与重复密码不一致",t.password.newPw="",t.password.confirm="",void $('input[name="newPassword"]').focus()):n.equals(t.master,t.password)?void alert("请不要重复提交！"):void o.resetPassword(t.password.old,t.password.newPw).then(function(e){e.data.success?(t.authError="",alert("修改成功"),t.master=n.copy(t.password)):t.authError=e.data.msg})},t.openXd=function(){l.open({windowClass:"transfer_contain",templateUrl:"usercenter/transfer.tpl.html",controller:"UsercentertransferCtrl",resolve:{username:function(){return t.userinfo.loginName}}}).result.then(function(){},function(){})},t.customerUpload=function(){l.open({windowClass:"upload-console",templateUrl:"my/upload.tpl.html",controller:"UploadCtrl",resolve:{category:function(){return{categoryId:"0",fileType:"1",headerImage:"headerImage"}}}}).result.then(function(e){$showCustomButton=!1,t.userinfo.headImg=e;var n={headImg:e,id:t.userinfo.id};s.saveUserInfo(n).then(function(e){e.data.success&&(t.isEditable=!1,alert("保存成功"))})},function(){})},t.cancel=function(){t.userinfo=n.copy(t.master),t.isEditable=!1},t.getUserMsg=function(e){var a=e;s.getNewMessage(a,t.pageSize).then(function(e){n.forEach(e.data.list,function(e){1==e.bizType?e.type="系统通知":2==e.bizType?e.type="审核通知":3==e.bizType&&(e.type="活动通知")}),t.newMsgs=e.data.list,t.msgCount=e.data.map.count,t.msgNumPages=Math.ceil(t.msgCount/t.pageSize)})},t.getUserMsg(t.pageNo),t.$watch("msgCurrentPage",function(e,n){e!=n&&(t.getUserMsg(e),t.toPage=e)}),t.pageChanged=function(e){t.msgCurrentPage=e},t.setRead=function(t){var a=[];n.forEach(t,function(e){1==e.status&&this.push(e.id)},a);var i=a.join();s.setRead(i).then(function(i){200==i.data.code&&(e.$broadcast("minusCount",a.length),n.forEach(t,function(e){e.status=2}))})},t.goBaseInfo=function(){c.path("/usercenter/userinfo",!1),t.tabid="userinfo"},t.goXd=function(){c.path("/usercenter/xd",!1),t.tabid="xd"},t.goReset=function(){c.path("/usercenter/reset",!1),t.tabid="reset"},t.goMessage=function(){c.path("/usercenter/message",!1),t.tabid="message"},t.goAccount=function(){c.path("/usercenter/account",!1),t.tabid="account"},t.relAccount=function(){l.open({windowClass:"transfer_contain",templateUrl:"usercenter/console/relAccount.tpl.html",controller:"RelAccountCtrl",resolve:{userinfo:function(){return{id:t.userinfo.id}}}}).result.then(function(e){console.log(e),t.userinfo.noRel=null,t.userinfo.loginName=e.email,/qq/gi.test(e.type)&&(t.qqRel=!0),/weixin/gi.test(e.type)&&(t.wxRel=!0),/weibo/gi.test(e.type)&&(t.wbRel=!0)},function(){})}}]),n.module("app.directives.addelement",[]).directive("addElement",["$compile",function(e){return{restrict:"EA",link:function(t,a,i){var s=$("#emailAddress"),o=$("#emailAddress").size()+1;a.bind("click",function(){var a=n.element('<div><input type="text" id="p_scnt" style="width:100%; height: 30px; margin-top: 15px;" ng-model="attrs.addElement" name="p_scnt_'+o+'" placeholder="Input Value" /></div>');s.append(a);var l=a.find("input");console.log(i.addElement),e(l)(t),o++})}}}]).directive("showIcon",["$compile","$timeout",function(e){return{restrict:"EA",require:"ngModel",scope:{check:"&callbackFn"},link:function(t,n,a,i){var s,o,l=e('<a><span class = "glyphicon glyphicon-ok-circle" ng-show="enabled" style = "margin-top: 8px; color: #9ad64b; font-size: 15px;"></span></a>')(t);t.update=function(){n[0].blur(),t.check({arg1:{name:i.$name}})},n.bind("focus",function(){s=i.$viewValue,n.parent().after(l),t.enabled=!0,("email"===a.name||"mobile"===a.name||"tel"===a.name)&&(t.enabled=!1),t.$apply()}).bind("blur",function(){t.enabled=!1,o=i.$viewValue;var e=new RegExp(/(\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$/g);if("mobile"===a.name&&o&&!e.test(n.val()))return void alert("手机号码格式错误");if("email"===a.name&&o){var l=new RegExp(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/g);if(!l.test(n.val()))return void alert("邮箱格式错误")}(o||s)&&s!==o&&t.update(),t.$apply()})}}}]).directive("ngHover",function(){return{restrict:"EA",link:function(e,t){$(t).hover(function(){$(t.children()[0]).css("display","block"),$(t.children()[3]).css("display","block"),$(t.children()[4]).css("display","block")},function(){$(t.children()[0]).css("display","none"),$(t.children()[3]).css("display","none"),$(t.children()[4]).css("display","none")})}}}).directive("imgClick",function(){return{restrict:"EA",link:function(e,t){$(t).bind("click",function(){$(t).find("img").css("border","4px solid #F60"),$(t).siblings().find("img").css("border",0)})}}}).directive("customFocus",function(){return{restrict:"EA",link:function(e,t){$(t).siblings().bind("click",function(){t[0].focus()})}}}).directive("blurChildren",function(){return{restrict:"EA",link:function(e,t){$(t).on("click",function(e){(e.target==t[0]||$(e.target).hasClass("badge"))&&$(".blurClass").find("input:visible").blur()})}}}).directive("forbiddenClose",function(){return{restrict:"EA",link:function(e,t){$(t).on("click",function(e){e.stopPropagation()})}}}).directive("customeImage",function(){return{restrict:"EA",link:function(e,t){$(t).hover(function(){$("<div><a></a></div>")},function(){})}}}).directive("slides",function(){return{restrict:"EA",link:function(e,t){$(t).slides({preload:!0,play:5e3,pause:2500,hoverPause:!0})}}}).directive("addClass",function(){return{restrict:"EA",link:function(e,t){$(t).closest(".textbox-wrap").find("[autofocus]").focus(),$(t).on("blur",function(){$(t).closest(".textbox-wrap").removeClass("focused")}).on("focus",function(){$(t).closest(".textbox-wrap").addClass("focused")})}}}).directive("loadScript",["$http","$timeout","$rootScope",function(e){return{link:function(t,a){var i=function(){t.captchaLoaded=!0};t.$watch(function(){return a[0].getAttribute("src")},function(t){t&&e.jsonp(a[0].getAttribute("src")).success(i).error(i)}),t.$on("$destroy",function(){n.element(".gt_widget").remove()})}}}]),n.module("colorpicker.module",[]).factory("Helper",function(){return{closestSlider:function(e){var t=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return t.bind(e)("I")?e.parentNode:e},getOffset:function(e,t){for(var n=0,a=0,i=0,s=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)n+=e.offsetLeft,a+=e.offsetTop,t||"BODY"!==e.tagName?(i+=e.scrollLeft,s+=e.scrollTop):(i+=document.documentElement.scrollLeft||e.scrollLeft,s+=document.documentElement.scrollTop||e.scrollTop),e=e.offsetParent;return{top:a,left:n,scrollX:i,scrollY:s}},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}]}}).factory("Color",["Helper",function(e){return{value:{h:1,s:1,b:1,a:1},rgb:function(){var e=this.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hex:function(){return this.toHex()},RGBtoHSB:function(e,t,n,a){e/=255,t/=255,n/=255;var i,s,o,l;return o=Math.max(e,t,n),l=o-Math.min(e,t,n),i=0===l?null:o===e?(t-n)/l:o===t?(n-e)/l+2:(e-t)/l+4,i=(i+360)%6*60/360,s=0===l?0:l/o,{h:i||1,s:s,b:o,a:a||1}},setColor:function(t){t=t.toLowerCase();for(var n in e.stringParsers)if(e.stringParsers.hasOwnProperty(n)){var a=e.stringParsers[n],i=a.re.exec(t),s=i&&a.parse(i);if(s)return this.value=this.RGBtoHSB.apply(null,s),!1}},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,n,a){e||(e=this.value.h,t=this.value.s,n=this.value.b),e*=360;var i,s,o,l,r;return e=e%360/60,r=n*t,l=r*(1-Math.abs(e%2-1)),i=s=o=n-r,e=~~e,i+=[r,l,0,0,l,r][e],s+=[l,r,r,l,0,0][e],o+=[0,0,l,r,r,l][e],{r:Math.round(255*i),g:Math.round(255*s),b:Math.round(255*o),a:a||this.value.a}},toHex:function(e,t,n,a){var i=this.toRGB(e,t,n,a);return"#"+(1<<24|parseInt(i.r,10)<<16|parseInt(i.g,10)<<8|parseInt(i.b,10)).toString(16).substr(1)}}}]).factory("Slider",["Helper",function(t){var n={maxLeft:0,maxTop:0,callLeft:null,callTop:null,knob:{top:0,left:0}},a={};return{getSlider:function(){return n},getLeftPosition:function(e){return Math.max(0,Math.min(n.maxLeft,n.left+((e.pageX||a.left)-a.left)))},getTopPosition:function(e){return Math.max(0,Math.min(n.maxTop,n.top+((e.pageY||a.top)-a.top)))},setSlider:function(i,s){var o=t.closestSlider(i.target),l=t.getOffset(o,s);n.knob=o.children[0].style,n.left=i.pageX-l.left-e.pageXOffset+l.scrollX,n.top=i.pageY-l.top-e.pageYOffset+l.scrollY,a={left:i.pageX,top:i.pageY}},setSaturation:function(e,t){n={maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},this.setSlider(e,t)},setHue:function(e,t){n={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},this.setSlider(e,t)},setAlpha:function(e,t){n={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"},this.setSlider(e,t)},setKnob:function(e,t){n.knob.top=e+"px",n.knob.left=t+"px"}}}]).directive("colorpicker",["$document","$compile","Color","Slider","Helper",function(e,t,a,i,s){return{require:"?ngModel",restrict:"A",link:function(o,l,r,c){var d,p=r.colorpicker?r.colorpicker:"hex",g=n.isDefined(r.colorpickerPosition)?r.colorpickerPosition:"bottom",u=!!n.isDefined(r.colorpickerInline)&&r.colorpickerInline,m=!!n.isDefined(r.colorpickerFixedPosition)&&r.colorpickerFixedPosition,h=n.isDefined(r.colorpickerParent)?l.parent():n.element(document.body),f=!!n.isDefined(r.colorpickerWithInput)&&r.colorpickerWithInput,v=f?'<input type="text" name="colorpicker-input">':"",b=u?"":'<button type="button" class="close close-colorpicker">&times;</button>',y='<div class="colorpicker dropdown"><div class="dropdown-menu"><colorpicker-saturation><i></i></colorpicker-saturation><colorpicker-hue><i></i></colorpicker-hue><colorpicker-alpha><i></i></colorpicker-alpha><colorpicker-preview></colorpicker-preview>'+v+b+"</div></div>",w=n.element(y),x=a,C=w.find("colorpicker-hue"),_=w.find("colorpicker-saturation"),T=w.find("colorpicker-preview"),k=w.find("i");
if(t(w)(o),f){var I=w.find("input");I.on("mousedown",function(e){e.stopPropagation()}).on("keyup",function(e){var t=this.value;l.val(t),c&&o.$apply(c.$setViewValue(t)),e.stopPropagation(),e.preventDefault()}),l.on("keyup",function(){I.val(l.val())})}var $=function(){e.on("mousemove",E),e.on("mouseup",P)};"rgba"===p&&(w.addClass("alpha"),d=w.find("colorpicker-alpha"),d.on("click",function(e){i.setAlpha(e,m),E(e)}).on("mousedown",function(e){i.setAlpha(e,m),$()})),C.on("click",function(e){i.setHue(e,m),E(e)}).on("mousedown",function(e){i.setHue(e,m),$()}),_.on("click",function(e){i.setSaturation(e,m),E(e)}).on("mousedown",function(e){i.setSaturation(e,m),$()}),m&&w.addClass("colorpicker-fixed-position"),w.addClass("colorpicker-position-"+g),"true"===u&&w.addClass("colorpicker-inline"),h.append(w),c&&(c.$render=function(){l.val(c.$viewValue)},o.$watch(r.ngModel,function(){L()})),l.on("$destroy",function(){w.remove()});var S=function(){try{T.css("backgroundColor",x[p]())}catch(e){T.css("backgroundColor",x.toHex())}_.css("backgroundColor",x.toHex(x.value.h,1,1,1)),"rgba"===p&&(d.css.backgroundColor=x.toHex())},E=function(e){var t=i.getLeftPosition(e),n=i.getTopPosition(e),a=i.getSlider();i.setKnob(n,t),a.callLeft&&x[a.callLeft].call(x,t/100),a.callTop&&x[a.callTop].call(x,n/100),S();var s=x[p]();return l.val(s),c&&o.$apply(c.$setViewValue(s)),f&&I.val(s),!1},P=function(){e.off("mousemove",E),e.off("mouseup",P)},L=function(){x.setColor(l.val()),k.eq(0).css({left:100*x.value.s+"px",top:100-100*x.value.b+"px"}),k.eq(1).css("top",100*(1-x.value.h)+"px"),k.eq(2).css("top",100*(1-x.value.a)+"px"),S()},D=function(){var e,t=s.getOffset(l[0]);return n.isDefined(r.colorpickerParent)&&(t.left=0,t.top=0),"top"===g?e={top:t.top-147,left:t.left}:"right"===g?e={top:t.top,left:t.left+126}:"bottom"===g?e={top:t.top+l[0].offsetHeight+2,left:t.left}:"left"===g&&(e={top:t.top,left:t.left-150}),{top:e.top+"px",left:e.left+"px"}},R=function(){N()};u===!1?l.on("click",function(){L(),w.addClass("colorpicker-visible").css(D()),e.on("mousedown",R)}):(L(),w.addClass("colorpicker-visible").css(D())),w.on("mousedown",function(e){e.stopPropagation(),e.preventDefault()});var A=function(e){c&&o.$emit(e,{name:r.ngModel,value:c.$modelValue})},N=function(){w.hasClass("colorpicker-visible")&&(w.removeClass("colorpicker-visible"),A("colorpicker-closed"),e.off("mousedown",R))};w.find("button").on("click",function(){N()})}}}]),n.module("app.directives.rightclick",[]).directive("rightClick",["$compile",function(e){return{restrict:"EA",link:function(t,n){var a;$(n).on("contextmenu",function(i){if(i.preventDefault(),a&&a[0]&&a.remove(),"0"==t.categoryId){a=$('<ul class="right-menu dropdown-menu"></ul>'),a.appendTo($(n)),a.css({left:i.pageX-$(n).offset().left,top:i.pageY-$(n).offset().top}).show();for(var s in t.myTags){var o='<li class="tag_list" ng-class="{selected: dropTagIndex == '+s+'}" ng-click="selectTag('+t.myTags[s].id+","+s+')">'+t.myTags[s].name+"</li>",l=e(o)(t);a.append(l)}var r=e('<li class="tag_list add_cate clearfix" style="border-top:1px solid #ccc;margin-bottom:0px;" ng-click="createCategory()"><em>+</em><span>创建分类</span></li>')(t);a.append(r);var c=e('<li class="btn-main" style="width:100%; padding:0px; border: 0;margin:0px;height:25px; line-height:25px;"><a style="height:25px;line-height:25px;text-indent:0;color:#FFF;padding:0px;text-align:center;" ng-click="setCategory('+t.dropTagIndex+","+t.img.id+')">确定</a></li>')(t);a.append(c),$(c).on("click",function(){a.hide()}),$(document).mousemove(function(e){(e.pageX<a.offset().left-20||e.pageX>a.offset().left+a.width()+20||e.pageY<a.offset().top-20||e.pageY>a.offset().top+a.height()+20)&&(a.hide(),$(this).unbind("mousemove"))})}})}}}]),n.module("app.directives.dataDraggable",[]).directive("itemDraggable",function(){return{restrict:"A",link:function(e,t){$(t).draggable({zIndex:2700,scroll:!1,iframeFix:!1,revert:!1,helper:"clone"})}}}).directive("itemDroppable",function(){return{restrict:"A",link:function(e,t){$(t).droppable({hoverClass:"active",out:function(){},drop:function(t,n){e.$parent.associateData[$(t.target).attr("item-id")]=n.draggable.attr("item-id");var a=$(t.target).find(".list_darggable");a.length>0&&(delete e.$parent.associateData[$(t.target).attr("item-id")],$(".item_remove_droppable").append(a)),n.draggable.css({left:0,top:0}).prependTo(this)}})}}}).directive("itemRemoveDroppable",function(){return{restrict:"A",link:function(e,t){$(t).droppable({hoverClass:"active",drop:function(t,n){$(n.draggable).parents(".list_attribute").length>0&&delete e.$parent.associateData[$(n.draggable).parents(".list_attribute").attr("item-id")],n.draggable.css({left:0,top:0}).appendTo(this)}})}}}),n.module("app.directives.limitInput",[]).directive("limitInput",function(){return{require:"ngModel",link:function(e,t,n,a){"transform"==n.cssItem&&e.$on("updateTransform",function(e,t){a.$setViewValue(parseInt(t,10)),a.$render()}),"borderRadius"==n.cssItem&&e.$on("updateMaxRadius",function(t,n){e.maxRadius=parseInt(Math.min($(n).outerWidth(),$(n).outerHeight())/2+10,10),e.maxRadius<e.model.borderRadius&&(a.$setViewValue(e.maxRadius),a.$render()),e.$apply()}),e.$watch(function(){return $(t).val()},function(e){+e>n.max&&(a.$setViewValue(n.max),a.$render()),+e<n.min&&(a.$setViewValue(n.min),a.$render())})}}}),n.module("app.directives.lineChart",[]).directive("lineChart",["$compile",function(){return{restrict:"EA",link:function(e,t,n){var a,i;e.$watch(function(){return n.data},function(){n.data&&(a=JSON.parse(n.data)),i?(i.destroy(),i=new Chart(t[0].getContext("2d")).Line(a)):i=new Chart(t[0].getContext("2d")).Line(a)})}}}]),n.module("app.directives.loading",[]).directive("loginLoading",function(){return{restrict:"EA",link:function(e,t){e.$on("loginLoading",function(){var e=$('<div class="homeMask" style="position: absolute;width: 100%;top:0;bottom:0;background-color:#ccc;opacity:0.8;">正在跳转，请稍后...</div>');e.appendTo($(t))})}}}),n.module("app.directives.comp.editor",[]).directive("mapEditor",function(){return{restrict:"AE",templateUrl:"directives/mapeditor.tpl.html",link:function(e){var t=new BMap.Map("l-map");t.centerAndZoom(new BMap.Point(116.404,39.915),15);var n={onSearchComplete:function(e){if(a.getStatus()==BMAP_STATUS_SUCCESS){for(var t=[],n=0;n<e.getCurrentNumPois();n++)t.push(e.getPoi(n).title+", "+e.getPoi(n).address);document.getElementById("r-result").innerHTML=t.join("<br/>")}}},a=new BMap.LocalSearch(t,n);e.searchAddress=function(){a.search(e.address)}}}}),n.module("app.directives.notification",[]).directive("notificationFadeout",["i18nNotifications",function(e){return{restrict:"EA",link:function(t,n){var a=$(n);a.fadeOut(4e3,function(){e.remove(t.notification)})}}}]),n.module("app.directives.pageTplTypes",[]).directive("pageTplTypes",["pageTplService",function(e){return{restrict:"EA",replace:!0,templateUrl:"directives/page-tpl-types.tpl.html",link:function(t){e.getPageTplTypes().then(function(e){t.pageTplTypes=e.data.list&&e.data.list.length>0?e.data.list:[]})}}}]),n.module("app.directives.pieChart",[]).directive("pieChart",["$compile",function(){return{restrict:"EA",link:function(e,t,n){var a,i;e.$watch(function(){return n.data},function(){n.data&&(i=JSON.parse(n.data)),a?(a.destroy(),a=new Chart(t[0].getContext("2d")).Pie(i)):a=new Chart(t[0].getContext("2d")).Pie(i)})}}}]),n.module("app.directives.qrcode",[]).directive("qrCode",function(){return{restrict:"A",link:function(e,t,n){e.$watch(function(){return n.qrUrl},function(){$("canvas",t).length>0&&$("canvas",t).remove(),n.qrUrl&&$(t).qrcode({render:"canvas",width:200,height:200,text:n.qrUrl+(/\?/.test(n.qrUrl)?"&":"?")+"eqrcode=1"})})}}}),n.module("app.directives.register",[]).directive("qqButton",function(){return{restrict:"EA",scope:{someCtrlFn:"&callbackFn",openid:"=",accesstoken:"="},link:function(e,t,n){QC.Login({btnId:n.id,scope:"all"},function(t){var n=t;QC.Login.check()&&QC.Login.getMe(function(t,a){e.openid=t,e.accesstoken=a,e.someCtrlFn({arg1:{openId:t,accessToken:a,type:"qq",userInfo:n}})})},function(){alert("QQ登录 注销成功")}),$("#qqLoginBtn a").removeAttr("onclick").click(function(){alert("第三方注册功能即将开放")})}}}).directive("wbButton",function(){return{restrict:"EA",link:function(){WB2.anyWhere(function(e){e.widget.connectButton({id:"wb_connect_btn",type:"3,2",callback:{login:function(){},logout:function(){}}})}),$("#wb_connect_btn").removeAttr("onclick").click(function(e){return e.stopPropagation(),e.preventDefault(),alert("新浪微博注册功能即将开放"),!1})}}}),n.module("app.directives.responsiveImage",[]).directive("responsiveImage",["$compile",function(){return{restrict:"EA",link:function(e,t){"0"!=e.fileType&&$(t).bind("load",function(){$(this).removeAttr("style");var e=$(this).parent().width(),t=$(this).parent().height();this.width>this.height?(this.style.width=e+"px",this.style.height=this.height*e/this.width+"px",this.style.top="50%",this.style.marginTop="-"+this.height/2+"px"):(this.style.height=t+"px",this.style.width=this.width*t/this.height+"px",this.style.left="50%",this.style.marginLeft="-"+this.width/2+"px")})}}}]),n.module("app.directives.numChangeAnim",[]).directive("numChangeAnim",["$filter",function(e){return{restrict:"A",scope:{content:"@"},link:function(t,n){function a(e,t){return Math.floor(e+Math.random()*(t-e))}function i(e,t){e=e>0?e:1;for(var n=Math.floor(Math.log10(e)),i=Math.floor(e/Math.pow(10,n)),s=0,o=10,l=0;o>l;l++)!function(l){setTimeout(function(){if(10>o)s=l;else{var r=n>l?l:n,c=Math.pow(10,r)*i;c=c.toString().length==e.toString().length?e:c,s=a(s,c)}t(s,9==l)},(l*l+l+2)/2*30)}(l)}function s(t,n){$(t).children("span").text(e("number")(n))}t.$watch("content",function(e){if(e){var t=parseInt(e,10);i(t,function(e,a){s(n,e),a&&(s(n,t),$(n).addClass("heartbeat").css({"animation-duration":"1s"}))})}})}}}]),n.module("app.directives.style",[]).directive("panelDraggable",function(){return{restrict:"A",link:function(e,t){e.$on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),t.on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),$(t).draggable()}}}),n.module("app.directives.component",["services.scene"]).directive("compDraggable",function(){return{restrict:"A",link:function(e,t,n){e.$on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),t.on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),$(t).draggable({revert:!1,stack:".comp-draggable",helper:"panel"==n.compDraggable||"page"==n.compDraggable?"clone":"",appendTo:"parent",containment:"panel"==n.compDraggable||"page"==n.compDraggable?"":"parent",zIndex:1049,opacity:.35,stop:function(e){$(e.toElement).one("click",function(e){e.stopImmediatePropagation()})}})}}}).directive("compDroppable",function(){return{restrict:"A",link:function(e,t){e.$on("$destroy",function(){$(t).droppable(),$(t).droppable("destroy"),t=null}),t.on("$destroy",function(){$(t).droppable(),$(t).droppable("destroy"),t=null}),$(t).droppable({accept:".comp-draggable",hoverClass:"drop-hover",drop:function(t,n){if(3!=n.draggable.attr("ctype")){var a={left:n.offset.left-$(this).offset().left+"px",top:n.offset.top-$(this).offset().top+"px"};"panel"==n.draggable.attr("comp-draggable")?e.createComp(n.draggable.attr("ctype"),a):e.updateCompPosition(n.draggable.attr("id"),a)}else e.createComp(3)}})}}}).directive("compSortable",function(){return{restrict:"A",link:function(e,t){$(t).sortable({axis:"y",update:function(){}})}}}).directive("compResizable",function(){return{restrict:"A",link:function(e,t){$(t).resizable({autoHide:!1,containment:"parent",stop:function(t,n){if("4"==$(n.element).attr("ctype").charAt(0)){var a={width:n.size.width,height:n.size.height,imgStyle:{width:n.element.find("img").width(),height:n.element.find("img").height(),marginTop:n.element.find("img").css("marginTop"),marginLeft:n.element.find("img").css("marginLeft")}};e.updateCompSize(n.element.attr("id"),a)}else e.updateCompSize(n.element.attr("id"),n.size);$(t.toElement).one("click",function(e){e.stopImmediatePropagation()})},resize:function(e,n){var a=$(t).find("img").width()/$(t).find("img").height();if("4"==$(n.element).attr("ctype").charAt(0)){var i=n.size.width/n.size.height,s=n.element.find("img");a>=i?(s.outerHeight(n.size.height),s.outerWidth(n.size.height*a),s.css("marginLeft",-(s.outerWidth()-n.size.width)/2),s.css("marginTop",0)):(s.outerWidth(n.size.width),s.outerHeight(n.size.width/a),s.css("marginTop",-(s.outerHeight()-n.size.height)/2),s.css("marginLeft",0))}else n.element.find(".element").outerWidth(n.size.width),n.element.find(".element").outerHeight(n.size.height)}})}}}).directive("photoDraggable",function(){return{restrict:"A",link:function(e,t){e.$on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),t.on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),$(t).draggable({revert:!1,helper:"clone",appendTo:".img_list",zIndex:1049,opacity:.35,stop:function(e){$(e.toElement).one("click",function(e){e.stopImmediatePropagation()})}})}}}).directive("cropDroppable",function(){return{restrict:"A",link:function(e,t){e.$on("$destroy",function(){$(t).droppable(),$(t).droppable("destroy"),t=null}),t.on("$destroy",function(){$(t).droppable(),$(t).droppable("destroy"),t=null}),$(t).droppable({accept:"li",hoverClass:"drop-hover",drop:function(t,n){e.preSelectImage(n.draggable.attr("photo-draggable"))}})}}}).directive("compRotate",function(){return{restrict:"A",link:function(e,t){var n=$(t),a=$('<div class="bar bar-rotate bar-radius">');n.append(a).append('<div class="bar bar-line">');var i,s={},o=new Hammer(a.get(0));o.get("pan").set({threshold:0}),o.on("panstart",function(){n.addClass("no-drag"),$("body").css({"user-select":"none"});var e=n.parent();s={x:parseFloat(n.css("left"))+e.offset().left+n.width()/2,y:parseFloat(n.css("top"))+e.offset().top+n.height()/2}}),o.on("panmove",function(e){var t=e.center,a=t.x-s.x,o=t.y-s.y,l=Math.abs(a/o);i=Math.atan(l)/(2*Math.PI)*360,a>0&&0>o?i=360+i:a>0&&o>0?i=180-i:0>a&&o>0?i=180+i:0>a&&0>o&&(i=360-i),i>360&&(i-=360),n.css({transform:"rotateZ("+i+"deg)"})}),o.on("panend",function(){n.removeClass("no-drag"),$("body").css({"user-select":"initial",cursor:"default"}),e.updateCompAngle(n.attr("id"),i),e.$broadcast("updateTransform",i)})}}}).directive("compDrag",function(){return{restrict:"A",link:function(e,t){var n,a=0,i=0,s={},o={},l={},r={},c=$(t),d=c.parent(),p={width:d.width(),height:d.height()},g=new Hammer(c.get(0));g.get("pan").set({threshold:0}),g.on("panstart",function(e){if(e.preventDefault(),e.srcEvent.preventDefault(),!c.hasClass("no-drag")){c.css("opacity",.35),$("body").css({"user-select":"none",cursor:"default"}),n=d.offset();var t={width:c.width(),height:c.height()};a=c.get(0).style.transform||c.get(0).style.webkitTransform||0,a=a&&a.replace("rotateZ(","").replace("deg)",""),a=a&&parseFloat(a),a>=90&&180>a&&(a=180-a),a>=180&&270>a&&(a=270-a),a>=270&&360>a&&(a=360-a),i=2*a*Math.PI/360;var g=0==i?t.height:(t.width/2+t.height/2/Math.tan(i))*Math.sin(i)*2,u=0==i?t.width:(t.width/2+t.height/2/Math.tan(Math.PI/2-i))*Math.sin(Math.PI/2-i)*2;r={height:g,width:u},l=c.offset();var m=c.position();o=e.center,o.top=o.y-m.top,o.bottom=o.y+p.height-(m.top+r.height),o.left=o.x-m.left,o.right=o.x+p.width-(m.left+r.width),s.x=e.center.x-(parseFloat(c.css("left"))+n.left),s.y=e.center.y-(parseFloat(c.css("top"))+n.top)}}),g.on("panmove",function(e){e.preventDefault(),"img"==e.target.tagName.toLowerCase()&&(e.target.ondragstart=function(){return!1}),c.hasClass("no-drag")||(e.center.y>=o.top&&e.center.y<=o.bottom&&c.css("top",e.center.y-n.top-s.y),e.center.x>=o.left&&e.center.x<=o.right&&c.css("left",e.center.x-n.left-s.x))}),g.on("panend",function(t){c.css("opacity",1),$("body").css({"user-select":"initial",cursor:"default"});var n=(c.position(),{top:c.css("top"),left:c.css("left")});e.updateCompPosition(c.attr("id"),n),$(t.srcEvent.target).one("click",function(e){return e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),!1})})}}}).directive("compResize",function(){function e(e,t,n,a){var i={},s=e/t,o=n/a;return s>o?(i.width=n,i.height=n/s):(i.height=a,i.width=a*s),i}function t(t){var n=t.children(".element-box"),a={width:n.width(),height:n.height()};if("4"==t.attr("ctype").charAt(0)){var i=t.find("img"),s=i.width()/i.height(),o=a.width/a.height;s>=o?(i.outerHeight(a.height),i.outerWidth(a.height*s),i.css("marginLeft",-(i.outerWidth()-a.width)/2),i.css("marginTop",0)):(i.outerWidth(a.width),i.outerHeight(a.width/s),i.css("marginTop",-(i.outerHeight()-a.height)/2),i.css("marginLeft",0))}else if("p"==t.attr("ctype").charAt(0)){var l=t.find("li"),r=t.find("img");r.each(function(t){var n=$(this),i=e(n.width(),n.height(),a.width,a.height);n.css({width:i.width,height:i.height}),l.eq(t).css({lineHeight:a.height+"px"})})}else t.find(".element").css({width:a.width,height:a.height})}function n(e,t){var n={width:t.width(),height:t.height()};if("4"==t.attr("ctype").charAt(0)){var a=t.find("img"),i={width:n.width,height:n.height,imgStyle:{width:a.width(),height:a.height(),marginTop:a.css("marginTop"),marginLeft:a.css("marginLeft")}};e.updateCompSize(t.attr("id"),i)}else if("p"==t.attr("ctype").charAt(0)){var s=t.find(".slide"),o=s.find(".dot"),l=s.attr("id"),r=s.attr("length");INTERVAL_OBJ[l]&&(clearInterval(INTERVAL_OBJ[l]),delete INTERVAL_OBJ[l]),s.swipeSlide({autoSwipe:"true"==s.attr("autoscroll"),continuousScroll:!0,speed:s.attr("interval"),transitionType:"cubic-bezier(0.22, 0.69, 0.72, 0.88)",lazyLoad:!0,clone:!1,length:r},function(e,t){--e<0&&(e=r-1),o.children().eq(e).addClass("cur").siblings().removeClass("cur"),t&&(INTERVAL_OBJ[l]=t)}),e.updateCompSize(t.attr("id"),n)}else e.updateCompSize(t.attr("id"),n)}function a(e,a,s,o){var l,r,c,d,p=$(a),g=p.closest("ul"),u=0,m=0,h=parseFloat(p.css("min-width")||50),f=parseFloat(p.css("min-height")||30),v=new Hammer($(s).get(0));v.get("pan").set({threshold:0,direction:Hammer.DIRECTION_ALL}),v.on("panstart",function(){p.addClass("no-drag"),l=p.width(),r=p.height(),c=parseFloat(p.css("left")),d=parseFloat(p.css("top")),g.css("cursor",o),$("body").css({"user-select":"none",cursor:"default"}),u=p.get(0).style.transform,u=u&&u.replace("rotateZ(","").replace("deg)",""),u=u&&parseFloat(u),m=2*u*Math.PI/360}),v.on("panmove",function(e){switch(o){case i.RESIZE_W:if(l-e.deltaX<=h)break;p.css({left:c+e.deltaX,width:l-e.deltaX});break;case i.RESIZE_E:p.css({width:l+e.deltaX});break;case i.RESIZE_N:if(r-e.deltaY<=f)break;p.css({top:d+e.deltaY,height:r-e.deltaY});break;case i.RESIZE_S:p.css({height:r+e.deltaY});break;case i.RESIZE_SE:p.css({height:r+e.deltaY,width:l+e.deltaX});break;case i.RESIZE_SW:if(l-e.deltaX<=h)break;p.css({left:c+e.deltaX,height:r+e.deltaY,width:l-e.deltaX});break;case i.RESIZE_NE:if(r-e.deltaY<=f)break;p.css({top:d+e.deltaY,height:r-e.deltaY,width:l+e.deltaX});break;case i.RESIZE_NW:r-e.deltaY>f&&p.css("top",d+e.deltaY),l-e.deltaX>h&&p.css("left",c+e.deltaX),p.css({height:r-e.deltaY,width:l-e.deltaX})}e.deltaX>0&&p.width()>320-parseFloat(p.css("left"))&&p.width(320-parseFloat(p.css("left"))),e.deltaX<0&&p.width()>c+l&&(p.width(c+l),p.css("left",0)),e.deltaY>0&&p.height()>486-parseFloat(p.css("top"))&&p.height(486-parseFloat(p.css("top"))),e.deltaY<0&&p.height()>d+r&&(p.height(d+r),p.css("top",0)),t(p)}),v.on("panend",function(){p.removeClass("no-drag"),g.css("cursor","default"),$("body").css({"user-select":"initial",cursor:"default"}),n(e,p),e.$broadcast("updateMaxRadius",p)})}var i={RESIZE_W:"w-resize",RESIZE_E:"e-resize",RESIZE_N:"n-resize",RESIZE_S:"s-resize",RESIZE_SE:"se-resize",RESIZE_SW:"sw-resize",RESIZE_NE:"ne-resize",RESIZE_NW:"nw-resize"};return{restrict:"A",link:function(e,t){var n=t,s=$('<div class="bar bar-n" >'),o=$('<div class="bar bar-s" >'),l=$('<div class="bar bar-e" >'),r=$('<div class="bar bar-w" >'),c=$('<div class="bar bar-ne bar-radius">'),d=$('<div class="bar bar-nw bar-radius">'),p=$('<div class="bar bar-se bar-radius">'),g=$('<div class="bar bar-sw bar-radius">');n.append(s).append(o).append(l).append(r).append(c).append(d).append(p).append(g).unbind("mousedown").mousedown(function(){$(this).children(".bar").show().end().siblings().children(".bar").hide()}),n.parent().unbind("mousedown").mousedown(function(t){$(t.target).closest("li").length||($(this).children("li").find(".bar").hide(),e.$emit("hideStylePanel"))}),a(e,n,l,i.RESIZE_E),a(e,n,r,i.RESIZE_W),a(e,n,s,i.RESIZE_N),a(e,n,o,i.RESIZE_S),a(e,n,c,i.RESIZE_NE),a(e,n,d,i.RESIZE_NW),a(e,n,p,i.RESIZE_SE),a(e,n,g,i.RESIZE_SW)}}}).directive("pasteElement",["sceneService",function(e){function t(){var t=$('<ul id="pasteMenu" class="dropdown-menu" style="min-width: 100px; display: block;" role="menu" aria-labelledby="dropdownMenu1">                            <li class="paste" role="presentation"><a role="menuitem" tabindex="-1"><div class="fa fa-paste" style="color: #08a1ef;"></div>&nbsp;&nbsp;粘贴</a></li>                    </ul>').css({position:"absolute","user-select":"none"});return t.find(".paste").on("click",function(){e.pasteElement(e.originalElemDef,e.copyElemDef,e.sameCopyCount),t.hide()}),t}return{restrict:"EA",link:function(e,n){var a=$(n);a.on("contextmenu",function(e){if(b){var n=t(),a=$("#pasteMenu");a.length>0&&a.remove(),$("#eq_main").append(n),n.css({left:e.pageX+$("#eq_main").scrollLeft()+15,top:e.pageY+$("#eq_main").scrollTop()}).show(),$("#eq_main").mousemove(function(e){(e.pageX<$("#pasteMenu").offset().left-20||e.pageX>$("#pasteMenu").offset().left+$("#pasteMenu").width()+20||e.pageY<$("#pasteMenu").offset().top-20||e.pageY>$("#pasteMenu").offset().top+$("#pasteMenu").height()+20)&&($("#pasteMenu").hide(),$(this).unbind("mousemove"))})}return!1})}}}]),n.module("app.directives.editor",[]).directive("toolbar",["$compile",function(e){return{restrict:"EA",replace:!0,templateUrl:"directives/toolbar.tpl.html",link:function(t){t.internalLinks=n.copy(t.pages),t.internalLink||t.externalLink||(t.internalLink=t.internalLinks[0],t.externalLink="http://");var a=["#000000","#7e2412","#ff5400","#225801","#0c529e","#333333","#b61b52","#f4711f","#3bbc1e","#23a3d3","#888888","#d34141","#f7951e","#29b16a","#97daf3","#cccccc","#ec7c7c","#fdea02","#79c450","#563679","#ffffff","#ffcccc","#d9ef7f","#c3f649"],i=$(".color-menu"),s=$(".bgcolor-menu");$.each(a,function(e,t){i.append($('<li><a dropdown-toggle class="btn" data-edit="foreColor '+t+'" style="background-color: '+t+'"></a></li>'))}),e(i.append($('<li><a dropdown-toggle class="btn glyphicon glyphicon-remove" data-edit="foreColor transparent" style="background-color: transparent"></a></li>')))(t);var o=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,a){return t+t+n+n+a+a});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null};$.each(a,function(e,t){var n=o(t);s.append($('<li><a dropdown-toggle class="btn" data-edit="backColor rgba('+n.r+","+n.g+","+n.b+', 0.3)" style="background-color: rgba('+n.r+","+n.g+","+n.b+', 0.3)"></a></li>'))}),e(s.append($('<li><a dropdown-toggle class="btn glyphicon glyphicon-remove" data-edit="backColor transparent" style="background-color: transparent"></a></li>')))(t)}}}]),n.module("app.directives.uislider",[]).value("uiSliderConfig",{}).directive("uiSlider",["uiSliderConfig","$timeout",function(e,t){return e=e||{},{require:"ngModel",compile:function(){return function(i,s,o,l){function r(e,t){return t?parseFloat(e):parseInt(e,10)}function c(){s.slider("destroy")}var d=n.extend(i.$eval(o.uiSlider)||{},e),p={min:null,max:null},g=["min","max","step"],u=!n.isUndefined(o.useDecimals),m=function(){n.isArray(l.$viewValue)&&d.range!==!0&&(console.warn("Change your range option of ui-slider. When assigning ngModel an array of values then the range option should be set to true."),d.range=!0),n.forEach(g,function(e){n.isDefined(o[e])&&(d[e]=r(o[e],u))}),s.slider(d),m=n.noop};n.forEach(g,function(e){o.$observe(e,function(t){t&&(m(),d[e]=r(t,u),s.slider("option",e,r(t,u)),l.$render())})}),o.$observe("disabled",function(e){m(),s.slider("option","disabled",!!e)}),i.$watch(o.uiSlider,function(e){m(),e!==a&&s.slider("option",e)},!0),t(m,0,!0),s.bind("slide",function(e,t){l.$setViewValue(t.values||t.value),i.$apply()}),l.$render=function(){m();var e=d.range===!0?"values":"value";d.range||!isNaN(l.$viewValue)||l.$viewValue instanceof Array?d.range&&!n.isDefined(l.$viewValue)&&(l.$viewValue=[0,0]):l.$viewValue=0,d.range===!0&&(n.isDefined(d.min)&&d.min>l.$viewValue[0]&&(l.$viewValue[0]=d.min),n.isDefined(d.max)&&d.max<l.$viewValue[1]&&(l.$viewValue[1]=d.max),l.$viewValue[0]>l.$viewValue[1]&&(p.min>=l.$viewValue[1]&&(l.$viewValue[0]=p.min),p.max<=l.$viewValue[0]&&(l.$viewValue[1]=p.max)),p.min=l.$viewValue[0],p.max=l.$viewValue[1]),s.slider(e,l.$viewValue)},i.$watch(o.ngModel,function(){d.range===!0&&l.$render()},!0),s.bind("$destroy",c)}}}}]),n.module("security.authorization",["security.service"]).provider("securityAuthorization",{requireAdminUser:["securityAuthorization",function(e){return e.requireAdminUser()}],requireAuthenticatedUser:["securityAuthorization",function(e){return e.requireAuthenticatedUser()}],$get:["security","securityRetryQueue",function(e,t){var n={requireAuthenticatedUser:function(){var a=e.requestCurrentUser().then(function(){return e.isAuthenticated()?void 0:t.pushRetryFn("unauthenticated-client",n.requireAuthenticatedUser)});return a},requireAdminUser:function(){var a=e.requestCurrentUser().then(function(){return e.isAdmin()?void 0:t.pushRetryFn("unauthorized-client",n.requireAdminUser)});return a}};return n}]}),n.module("security",["security.service","security.interceptor","security.login","security.authorization"]),n.module("security.interceptor",["security.retryQueue"]).factory("securityInterceptor",["$injector","$location","securityRetryQueue",function(e,t,n){return function(a){return a.then(null,function(i){if(401===i.status){if("/home"==t.path()||"/home/login"==t.path()||"/home/register"==t.path()||"/home/reset"==t.path()||"/agreement"==t.path()||"/reg"==t.path()||"/sample"==t.path()||"/error"==t.path())return;a=n.pushRetryFn("unauthorized-server",function(){return e.get("$http")(i.config)})}return 403===i.status&&(alert("对不起，您没有查看此内容的权限"),t.path("/home")),a})}}]).config(["$httpProvider",function(e){e.responseInterceptors.push("securityInterceptor")}]),n.module("security.login.form",["services.localizedMessages","app.directives.addelement"]).controller("LoginFormController",["$scope","$timeout","security","localizedMessages","$location","$sce",function(e,t,n,a,i,s){e.user={},e.retrieve={},e.showLogin=!0,e.sendPassword=!1,e.unExist=!1,e.weiChatUrl=n.thirdPartyUrl.weiChatUrl,e.qqUrl=n.thirdPartyUrl.qqUrl,e.weiboUrl=n.thirdPartyUrl.weiboUrl,e.openWeibo=function(){alert("新浪微博注册功能即将开放!")},e.authError=null,e.isValidateCodeLogin=n.isValidateCodeLogin,e.validateCodeSrc=PREFIX_URL+"servlet/validateCodeServlet",e.authReason=null,n.getLoginReason()&&(e.authReason=a.get(n.isAuthenticated()?"login.reason.notAuthorized":"login.reason.notAuthenticated")),e.rotate=function(n){$(".modal-content").addClass("flip"),$(".login-form-section").fadeOut(600),t(function(){e.showLogin=!n,$(".login-form-section").fadeIn(0),$(".modal-content").removeClass("flip")},600)},e.login=function(){e.authError=null;var t={username:e.user.email,password:e.user.password,rememberMe:e.user.rememberMe};return!e.isValidateCodeLogin||(t.geetest_challenge=challenge,t.geetest_validate=validate,t.geetest_seccode=seccode,challenge&&validate&&seccode)?e.user.email?e.user.password?void n.login($.param(t)).then(function(t){challenge=null,validate=null,seccode=null,t?(selectorA&&selectorA(".gt_refresh_button").click(),1005===t.code,e.isValidateCodeLogin=t.map.isValidateCodeLogin,e.authReason="",e.authError=t.msg):(e.authError=a.get("login.error.invalidCredentials"),submit=!1)},function(t){e.authError=a.get("login.error.serverError",{exception:t})}):(e.authReason="",void(e.authError="密码不能为空")):(e.authReason="",void(e.authError="帐号不能为空")):(e.authReason="",void(e.authError="验证码不能为空"))},e.openRegister=function(){i.path("/home/register",!1)},e.clearForm=function(){e.user={}},e.cancelLogin=function(){n.cancelLogin()},e.reset=function(){e.user={},e.retrieve={}};var o="http://api.geetest.com/get.php?gt=1ebc844c9e3a8c23e2ea4b567a8afd2d&time="+(new Date).getTime();e.validateCodeUrl=s.trustAsResourceUrl(o),t(function(){$('input[name="userEmail"]').focus()},300),e.retrievePassword=function(){return e.retrieve.email?submit?challenge&&validate&&seccode?void n.retrievePassword(e.retrieve.email,challenge,validate,seccode).then(function(t){challenge="",validate="",seccode="",200==t.data.code?(e.sendPassword=!0,submit=!1):(selectorA&&selectorA(".gt_refresh_button").click(),1003==t.data.code?e.retrieveError="账号不存在":1005==t.data.code&&(e.retrieveError="验证码错误"))}):void(e.retrieveError="验证码不能为空"):void(e.retrieveError="验证码匹配错误"):void(e.retrieveError="邮箱不能为空")}}]),n.module("security.login.reset",["services.localizedMessages"]).controller("ResetFormController",["$scope","security","localizedMessages","$location","resetKey",function(e,t,n,a,i){e.password={},e.reset=function(){return e.password.newPw!=e.password.confirm?(e.authError=n.get("login.reset.notmatch"),e.password.newPw="",e.password.confirm="",void $('input[name="newPassword"]').focus()):void t.resetPassByKey(e.password.newPw,i).then(function(t){200==t.data.code?(alert("修改成功"),e.$close(),a.path("/main").search({})):1011==t.data.code&&(e.authError=t.data.msg)})},e.cancel=function(){e.$dismiss()}}]).directive("equals",function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,a){if(a){e.$watch(n.ngModel,function(){i()}),n.$observe("equals",function(){i()});var i=function(){var e=a.$viewValue,t=n.equals;a.$setValidity("equals",e===t)}}}}}),n.module("security.login",["security.login.form","security.login.reset","security.login.toolbar"]),n.module("security.login.toolbar",["services.usercenter"]).directive("loginToolbar",["security","$rootScope","usercenterService",function(e,t,n){var a={templateUrl:"security/login/toolbar.tpl.html",restrict:"E",replace:!0,scope:!0,link:function(a){a.PREFIX_FILE_HOST=PREFIX_FILE_HOST,a.isAuthenticated=e.isAuthenticated,a.login=e.showLogin,a.logout=e.logout,a.requestResetPassword=e.requestResetPassword,a.isAdvancedUser=t.isAdvancedUser,a.isEditor=t.isEditor,a.isVendorUser=t.isVendorUser,a.$watch(function(){return e.currentUser},function(e){a.currentUser=e,a.currentUser.headImg?/^http.*/.test(e.headImg)&&(a.headImg=e.headImg):a.headImg=CLIENT_CDN+"images/defaultuser.jpg"}),a.$on("minusCount",function(e,t){a.count-=t,a.newMsgCount=a.count>9?"9+":a.count}),a.getNewMessage=function(e,t,i){n.getNewMessage(e,t,i).then(function(e){a.newMsgs=e.data.list,a.count=e.data.map.count,a.newMsgCount=e.data.map.count>9?"9+":e.data.map.count})},a.getNewMessage(1,4,!0),a.openMsgPanel=function(){$(".mes_con").hasClass("open")||a.getNewMessage(1,4,!0)}}};return a}]),n.module("security.otherregister.form",["services.localizedMessages","app.directives.register"]),n.module("security.otherregister.form").controller("OtherRegisterFormController",["$scope","$timeout","security","localizedMessages","$location","$http","$window","otherRegisterInfo",function(e,t,n,a,i,s,o,l){e.user={},e.user.agreement=!0,e.getUserDetail=function(){var t={type:"qq",openId:l.openId,accessToken:l.accessToken};n.getUserDetail(t.type,t.openId,t.accessToken).then(function(t){e.otherUserInfo=t.data.obj})},e.getUserDetail()}]),n.module("security.register.form",["services.localizedMessages","app.directives.register"]),n.module("security.register.form").controller("RegisterFormController",["$scope","$timeout","security","localizedMessages","$location","$http","$window",function(e,t,n,a,i){e.user={},e.user.agreement=!0,e.weiChatUrl=n.thirdPartyUrl.weiChatUrl,e.qqUrl=n.thirdPartyUrl.qqUrl,e.weiboUrl=n.thirdPartyUrl.weiboUrl,e.openWeibo=function(){alert("新浪微博注册功能即将开放!")},e.register=function(){var t={email:e.user.email,password:e.user.password
},i=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return i.test(e.user.email)?void(e.user.password===e.user.repeatPassword&&e.user.agreement?n.register($.param(t)).then(function(t){t&&(e.regErr=t.msg)},function(t){e.regErr=a.get("register.error.serverError",{exception:t})}):e.regErr=a.get(e.user.password!=e.user.repeatPassword?"register.error.match":"register.error.agreement")):void(e.regErr="请输入正确的邮箱格式")},e.checkUpperCase=function(){/[A-Z]/g.test(e.user.email)&&(e.user.email=e.user.email.toLowerCase(),alert("请用小写字母邮箱注册，已将邮箱中的大写字母自动转换成小写"))},e.openLogin=function(){i.path("/home/login",!1)},e.reset=function(){e.user={}}}]).controller("BindingController",["$rootScope","$scope","$timeout","security","localizedMessages","$location","$http","$window",function(e,t){t.qq_url="https://graph.qq.com/oauth2.0/authorize?response_type=token&client_id=101149132&redirect_uri="+redirect_uri+"&display=pc",t.weibo_url="https://api.weibo.com/oauth2/authorize?client_id=3508809852&response_type=token&redirect_uri="+PREFIX_HOST}]),n.module("security.register",["security.register.form","security.otherregister.form"]),n.module("security.retryQueue",[]).factory("securityRetryQueue",["$q","$log",function(e,t){var i=[],s={onItemAddedCallbacks:[],hasMore:function(){return i.length>0},push:function(e){i.push(e),n.forEach(s.onItemAddedCallbacks,function(n){try{n(e)}catch(e){t.error("securityRetryQueue.push(retryItem): callback threw an error"+e)}})},pushRetryFn:function(t,n){1===arguments.length&&(n=t,t=a);var i=e.defer(),o={reason:t,retry:function(){e.when(n()).then(function(e){i.resolve(e)},function(e){i.reject(e)})},cancel:function(){i.reject()}};return s.push(o),i.promise},retryReason:function(){return s.hasMore()&&i[0].reason},cancelAll:function(){for(;s.hasMore();)i.shift().cancel()},retryAll:function(){for(;s.hasMore();)i.shift().retry()}};return s}]),n.module("security.service",["security.retryQueue","security.login","security.register","ui.bootstrap.modal"]).factory("security",["$http","$q","$location","securityRetryQueue","$modal","ModalService",function(t,n,a,i,s,o){function l(t){t=t||"/",e.location.href=t}function r(){if(y&&(c(y,!1),y=null),v)throw new Error("Trying to open a dialog that is already open!");v=s.open({windowClass:"login-container",keyboard:!1,templateUrl:"security/login/form.tpl.html",controller:"LoginFormController"}),v.result.then(d,d)}function c(e,t){e.close(t)}function d(e){v=null,e?("/home/login"==a.path()&&a.path("/home",!1),i.retryAll()):(i.cancelAll(),l())}function p(e){if(b)throw new Error("Trying to open a dialog that is already open!");b=s.open({windowClass:"login-container",keyboard:!1,templateUrl:"security/login/reset.tpl.html",controller:"ResetFormController",resolve:{resetKey:function(){return e}}}),b.result.then(function(){b=null},function(){alert("cancel"),C.currentUser||a.path("/home",!1).search({}),b=null})}function g(){if(v&&(c(v,!0),v=null),y)throw new Error("Trying to open a dialog that is already open!");y=s.open({windowClass:"login-container",keyboard:!1,templateUrl:"security/register/register.tpl.html",controller:"RegisterFormController"}),y.result.then(function(){y=null},function(){"/home/register"==a.path()&&a.path("/home",!1),y=null})}function u(e){if(w)throw new Error("Trying to open a dialog that is already open!");w=s.open({windowClass:"login-container",keyboard:!1,templateUrl:"security/register/otherregister.tpl.html",controller:"OtherRegisterFormController",resolve:{otherRegisterInfo:function(){return e}}})}function m(e){x=e}function h(){return x}var f={2:{code:5,name:"普通用户"},3:{code:5,name:"运维用户"},4:{code:7,name:"编辑用户"},5:{code:5,name:"编辑用户"},10:{code:7,name:"高级用户"},11:{code:7,name:"服务商用户"}},v=null,b=null,y=null,w=null;i.onItemAddedCallbacks.push(function(){i.hasMore()&&("unauthorized-server"==i.retryReason()&&C.showLogin(),"down-server"==i.retryReason()&&o.openMsgDialog({msg:"服务器忙碌，请稍后再试！"}))});var x={},C={getLoginReason:function(){return i.retryReason()},showLogin:function(){r()},showRegister:function(){g()},showOtherRegister:function(){u()},getUserDetail:function(e,n,a){var i=PREFIX_URL+"base/relUserInfo?type="+e+"&openId="+n+"&accessToken="+a,s=new Date;return i+="&date="+s.getTime(),t({method:"GET",url:i,withCredentials:!0})},addRegisterInfo:m,getRegisterInfo:h,login:function(e){var n=this,i=t.post(JSON_URL+"?c=user&a=login",e,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});return i.then(function(e){if(200===e.status){if(n.isValidateCodeLogin=!1,e.data.success!==!0)return e.data;("/home"==a.path()||"/home/login"==a.path())&&a.path("main"),C.requestCurrentUser(),c(v,!0)}else C.isAuthenticated()},function(){C.isAuthenticated()})},register:function(e){var n=t.post(JSON_URL+"?c=user&a=register",e,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});return n.then(function(e){if(200===e.status){if(e.data.success!==!0)return e.data;("/home"==a.path()||"/home/register"==a.path())&&a.path("main"),C.requestCurrentUser(),c(y,!0)}else C.isAuthenticated()},function(){C.isAuthenticated()})},thirdPartLogin:function(e){var n=t.post(PREFIX_URL+"eqs/relAccount",$.param(e),{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});return n.then(function(e){if(200===e.status){if(e.data.success!==!0)return e.data;("/home"==a.path()||"/home/login"==a.path())&&a.path("main"),C.requestCurrentUser(),c(w,!0)}else C.isAuthenticated()},function(){C.isAuthenticated()})},weiChatLogin:function(e){return t.post(PREFIX_URL+"eqs/relWechatAccount?code="+e+"&isMobile=1&time="+(new Date).getTime(),{},{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},cancelRegister:function(){c(y,!1),l("#/reg")},hasRel:function(e){y&&c(y,!1);var n=new Date,i=PREFIX_URL+"base/user/hasRel?type="+e.type+"&openId="+e.openId+"&time="+n.getTime(),s=t.get(i,{withCredentials:!0});s.then(function(t){200===t.status?t.data.success===!0?(("/home"==a.path()||"/home/login"==a.path())&&a.path("main"),C.requestCurrentUser()):"未关联账号"==t.data.msg&&u(e):C.isAuthenticated()},function(){C.isAuthenticated()})},cancelLogin:function(){c(v,!1),l()},logout:function(e){t({withCredentials:!0,method:"GET",url:PREFIX_URL+"logout"}).then(function(){C.currentUser=null,l(e)},function(){C.currentUser=null,l(e)})},requestCurrentUser:function(){if(C.isAuthenticated())return n.when(C.currentUser);var e=new Date;return t.get(JSON_URL+"?c=user&a=check&time="+e.getTime(),{withCredentials:!0}).then(function(e){return e&&(C.currentUser=e.data.obj,(!C.currentUser.roleIdList||C.currentUser.roleIdList.length<=0)&&(C.currentUser.roleIdList=[2])),C.currentUser})},resetPassByKey:function(e,n){var a={key:n,newPwd:e};return t.post(PREFIX_URL+"eqs/pwd/reset",$.param(a),{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},currentUser:null,isAuthenticated:function(){return!!C.currentUser},accessDef:{CREATE_STYLE_SETTING:1,SCENE_HIDE_LASTPAGE_SETTING:2,CREATE_SCROLL_IMAGE:4},thirdPartyUrl:{weiChatUrl:"https://open.weixin.qq.com/connect/qrconnect?appid=wxc5f1bbae4bb93ced&redirect_uri=http%3A%2F%2Fe.wesambo.com&response_type=code&scope=snsapi_login&state=STATE#wechat_redirect",qqUrl:"https://graph.qq.com/oauth2.0/authorize?response_type=token&client_id=101149132&redirect_uri=http%3A%2F%2Fe.wesambo.com&scope=get_user_info",weiboUrl:"https://api.weibo.com/oauth2/authorize?client_id=3508809852&response_type=token&redirect_uri=http://e.wesambo.com"},isAllowToAccess:function(e){for(var t=0;t<C.currentUser.roleIdList.length;t++)if(f[C.currentUser.roleIdList[t]]){var n=f[C.currentUser.roleIdList[t]].code;if((n&e)>0)return!0}return!1},isEditor:function(){if(!C.currentUser)return!1;var e=C.currentUser.roleIdList;if(!e)return!1;for(var t=0;t<e.length;t++)if("4"==e[t])return!0;return!1},isAdvancedUser:function(){if(!C.currentUser)return!1;var e=C.currentUser.roleIdList;if(!e)return!1;for(var t=0;t<e.length;t++)if("10"==e[t])return!0;return!1},isVendorUser:function(){if(!C.currentUser)return!1;var e=C.currentUser.roleIdList;if(!e)return!1;for(var t=0;t<e.length;t++)if("11"==e[t])return!0;return!1},requestResetPassword:function(e){p(e)},validateToken:function(e){var n="changepw?token="+e;return t.get(PREFIX_URL+n,{withCredentials:!0})},resetPassword:function(e,n){var a=PREFIX_URL+"m/base/user/changePwd",i={oldPwd:e,newPwd:n};return t.post(a,$.param(i),{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},retrievePassword:function(e,n,a,i){var s=PREFIX_URL+"eqs/pwd/retrieve",o={email:e,geetest_challenge:n,geetest_validate:a,geetest_seccode:i};return t.post(s,$.param(o),{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}};return C}]),n.module("services.breadcrumbs",[]),n.module("services.breadcrumbs").factory("breadcrumbs",["$rootScope","$location",function(e,t){var n=[],a={};return e.$on("$stateChangeSuccess",function(){var e,a=t.path().split("/"),i=[],s=function(e){return"/"+a.slice(0,e+1).join("/")};for(a.shift(),e=0;e<a.length;e++)i.push({name:a[e],path:s(e)});n=i}),a.getAll=function(){return n},a.getFirst=function(){return n[0]||{}},a}]),n.module("services.crud",["services.crudRouteProvider"]),n.module("services.crud").factory("crudEditMethods",function(){return function(e,t,a,i,s){var o={};return o[e]=t,o[e+"Copy"]=n.copy(t),o.save=function(){this[e].$saveOrUpdate(i,i,s,s)},o.canSave=function(){return this[a].$valid&&!n.equals(this[e],this[e+"Copy"])},o.revertChanges=function(){this[e]=n.copy(this[e+"Copy"])},o.canRevert=function(){return!n.equals(this[e],this[e+"Copy"])},o.remove=function(){this[e].$id()?this[e].$remove(i,s):i()},o.canRemove=function(){return t.$id()},o.getCssClasses=function(e){var t=this[a][e];return{error:t.$invalid&&t.$dirty,success:t.$valid&&t.$dirty}},o.showError=function(e,t){return this[a][e].$error[t]},o}}),n.module("services.crud").factory("crudListMethods",["$location",function(e){return function(t){var n={};return n.new=function(){e.path(t+"/new")},n.edit=function(n){e.path(t+"/"+n)},n}}]),function(){function e(e){this.$get=n.noop,this.routesFor=function(t,i,s){var o=t.toLowerCase(),l="/"+t.toLowerCase();s=s||i,n.isString(i)&&""!==i&&(o=i+"/"+o),null!==s&&s!==a&&""!==s&&(l="/"+s+l);var r=function(e){return o+"/"+t.toLowerCase()+"-"+e.toLowerCase()+".tpl.html"},c=function(e){return t+e+"Ctrl"},d={whenList:function(e){return d.when(l,{templateUrl:r("List"),controller:c("List"),resolve:e}),d},whenNew:function(e){return d.when(l+"/new",{templateUrl:r("Edit"),controller:c("Edit"),resolve:e}),d},whenEdit:function(e){return d.when(l+"/:itemId",{templateUrl:r("Edit"),controller:c("Edit"),resolve:e}),d},when:function(t,n){return e.when(t,n),d},otherwise:function(t){return e.otherwise(t),d},$stateProvider:e};return d}}e.$inject=["$stateProvider"],n.module("services.crudRouteProvider",["ngRoute"]).provider("crudRoute",e)}(),n.module("services.data",[]),n.module("services.data").factory("dataService",["$http",function(e){var t={};return t.getDataBySceneId=function(t,n,a){n=n||1,a=a||10;var i="?c=scenedata&a=getdata&id="+t+"&pageNo="+n+"&pageSize="+a,s=new Date;return i+="&time="+s.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+i})},t.getDataDetail=function(t){var n="m/c/detail/"+t,a=new Date;return n+="?time="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},t.getAllData=function(t){var n="m/c/data?pageSize=10&pageNo="+t,a=new Date;return n+="&time="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},t.getProspectDataAccount=function(){"m/c/prospectCount?time="+(new Date).getTime();return e("")},t.getAllPageView=function(){var t="?c=scene&a=pvcount&time="+(new Date).getTime();return e({withCredentials:!0,method:"GET",url:JSON_URL+t})},t.deleteDataById=function(t){var n="m/c/delete/"+t;return e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},t.getAllDataCount=function(){var t="c-count.php",n=new Date;return t+="?time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})},t.getOpenCount=function(){var t="?c=scene&a=opencount",n=new Date;return t+="&time="+n.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+t})},t.getAllSceneDataCount=function(){var t="?c=scenedata&a=getcount",n=new Date;return t+="&time="+n.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+t})},t.saveData=function(t){var n=PREFIX_URL+"m/c/save",a=e.post(n,t,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});return a.then(function(e){200===e.status&&(e.data.success===!0||alert(e.data.msg))},function(){})},t.getSceneField=function(t){var n="m/c/formField/"+t,a=new Date;return n+="?time="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},t.getPremergeScenes=function(){var t="m/scene/newDataScene",n=new Date;return t+="?time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})},t.mergeSceneData=function(t,n){var a="m/c/imps/"+t;return e({withCredentials:!0,method:"POST",url:PREFIX_URL+a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(n)})},t}]),n.module("services.exceptionHandler",["services.i18nNotifications"]),n.module("services.exceptionHandler").factory("exceptionHandlerFactory",["$injector",function(e){return function(t){return function(n,a){var i=e.get("i18nNotifications");t(n,a),i.pushForCurrentRoute("error.fatal","error",{},{exception:n,cause:a})}}}]),n.module("services.exceptionHandler").config(["$provide",function(e){e.decorator("$exceptionHandler",["$delegate","exceptionHandlerFactory",function(e,t){return t(e)}])}]),n.module("services.file",[]),n.module("services.file").factory("fileService",["$http",function(e){var t={};return t.listFileCategory=function(t){var n="class-"+("1"==t?"tpType":"bgType")+".htm",a=new Date;return n+="?time="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},t.deleteFile=function(t){var n=JSON_URL+"?c=upfile&a=delete",a={id:t,keycode:getCookie("MD5STR"),UID:getCookie("USERID")};return e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)})},t.createCategory=function(t){var n="?c=tag&a=create",a={tagName:t};return e({withCredentials:!0,method:"POST",url:JSON_URL+n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)})},t.getCustomTags=function(){var t="?c=tag&a=my&?time"+(new Date).getTime();return e({withCredentials:!0,method:"GET",url:JSON_URL+t})},t.deleteTag=function(t){var n="?c=tag&a=delete",a={id:t};return e({withCredentials:!0,method:"POST",url:JSON_URL+n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)})},t.setCategory=function(t,n){var a="?c=tag&a=set",i={tagId:t,fileIds:n};return e({withCredentials:!0,method:"POST",url:JSON_URL+a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(i)})},t.getImagesByTag=function(t,n,a,i){var s="?c=upfile&a=userlist&";return s+="fileType="+n,t&&(s+="&tagId="+t),s+="&pageNo="+(a?a:1),s+="&pageSize="+(i?i:12),s+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+s})},t.getImagesBySysTag=function(t,n,a,i,s){var o="?c=upfile&a=syslist&";return o+="tagId="+t,o+="&fileType="+n,o+="&bizType="+s,o+="&pageNo="+(a?a:1),o+="&pageSize="+(i?i:12),o+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+o})},t.unsetTag=function(t,n){var a="m/base/file/tag/unset",i={tagId:t,fileIds:n};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(i)})},t.getChildCategory=function(t){var n="?c=upfile&a=systag&type=11";return t&&(n+="&bizType="+t),n+=(/\?/.test(n)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+n})},t.getFileByCategory=function(t,n,a,i){var s="?c=upfile&a=syslist&";0==a&&2==i&&(s="?c=upfile&a=userlist&"),s+="pageNo="+(t?t:1),s+="&pageSize="+(n?n:12),a&&"all"!=a&&(s+="&bizType="+(a?a:-1)),s+="&fileType="+(i?i:-1);var o=new Date;return s+="&time="+o.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+s})},t.cropImage=function(t){var n="m/base/file/crop";return e({withCredentials:!0,method:"POST",url:PREFIX_URL+n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},t}]),n.module("services.httpRequestTracker",[]),n.module("services.httpRequestTracker").factory("httpRequestTracker",["$http",function(e){var t={};return t.hasPendingRequests=function(){return e.pendingRequests.length>0},t}]),n.module("services.i18nNotifications",["services.notifications","services.localizedMessages"]),n.module("services.i18nNotifications").factory("i18nNotifications",["localizedMessages","notifications",function(e,t){var a=function(t,a,i,s){return n.extend({message:e.get(t,i),type:e.get(a,i)},s)},i={pushSticky:function(e,n,i,s){return t.pushSticky(a(e,n,i,s))},pushForCurrentRoute:function(e,n,i,s){return t.pushForCurrentRoute(a(e,n,i,s))},pushForNextRoute:function(e,n,i,s){return t.pushForNextRoute(a(e,n,i,s))},getCurrent:function(){return t.getCurrent()},remove:function(e){return t.remove(e)}};return i}]),n.module("services.localizedMessages",[]).factory("localizedMessages",["$interpolate","I18N.MESSAGES",function(e,t){var n=function(e,t){return e||"?"+t+"?"};return{get:function(a,i){var s=t[a];return s?e(s)(i):n(s,a)}}}]),n.module("services.mine",[]),n.module("services.mine").factory("MineService",["$http",function(e){var t={};return t.getMyScenes=function(t,n,a){var i="?c=scene&a=my&type";t&&(i+="="+t),i+="&pageNo="+(n?n:1),i+="&pageSize="+(a?a:12);var s=new Date;return i+=(/\?/.test(i)?"&":"?")+"time="+s.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+i})},t}]),n.module("services.modal",["confirm-dialog","message-dialog"]).factory("ModalService",["$modal",function(e){var t={};return t.openConfirmDialog=function(t,n,a){e.open({backdrop:"static",keyboard:!1,backdropClick:!1,windowClass:"confirm-dialog",templateUrl:"dialog/confirm.tpl.html",controller:"ConfirmDialogCtrl",resolve:{confirmObj:function(){return t}}}).result.then(n,a)},t.openMsgDialog=function(t,n,a){e.open({backdrop:"static",keyboard:!1,backdropClick:!1,windowClass:"message-dialog",templateUrl:"dialog/message.tpl.html",controller:"MessageDialogCtrl",resolve:{msgObj:function(){return t}}}).result.then(n,a)},t}]),n.module("I18N.MESSAGES",[]).constant("I18N.MESSAGES",{"notify.success":"success","notify.info":"info","notify.danger":"danger","notify.warning":"warning","errors.route.changeError":"Route change error","crud.user.save.success":"A user with id '{{id}}' was saved successfully.","crud.user.remove.success":"A user with id '{{id}}' was removed successfully.","crud.user.remove.error":"Something went wrong when removing user with id '{{id}}'.","crud.user.save.error":"Something went wrong when saving a user...","crud.project.save.success":"A project with id '{{id}}' was saved successfully.","crud.project.remove.success":"A project with id '{{id}}' was removed successfully.","crud.project.save.error":"Something went wrong when saving a project...","login.reason.notAuthorized":"离开久了，麻烦再登录一次吧！","login.reason.notAuthenticated":"离开久了，麻烦再登录一次吧！","login.error.invalidCredentials":"登录失败，请检查帐号和密码是否正确。","login.error.serverError":"There was a problem with authenticating: {{exception}}.","register.error.serverError":"There was a problem with authenticating: {{exception}}.","login.reset.notmatch":"新密码和重复密码不匹配","register.error.match":"两次输入密码不一致","register.error.agreement":"请先同意注册协议再完成注册","file.bg.pageSize":"18","scene.save.success.published":"场景已保存成功！","scene.save.success.nopublish":"保存成功，还需要发布哦！","scene.publish.success":"发布成功！"}),n.module("services.notifications",[]).factory("notifications",["$rootScope",function(e){var t={STICKY:[],ROUTE_CURRENT:[],ROUTE_NEXT:[]},a={},i=function(e,t){if(!n.isObject(t))throw new Error("Only object can be added to the notification service");return e.push(t),t};return e.$on("$stateChangeSuccess",function(){t.ROUTE_CURRENT.length=0,t.ROUTE_CURRENT=n.copy(t.ROUTE_NEXT),t.ROUTE_NEXT.length=0}),a.getCurrent=function(){return[].concat(t.STICKY,t.ROUTE_CURRENT)},a.pushSticky=function(e){return i(t.STICKY,e)},a.pushForCurrentRoute=function(e){return i(t.ROUTE_CURRENT,e)},a.pushForNextRoute=function(e){return i(t.ROUTE_NEXT,e)},a.remove=function(e){n.forEach(t,function(t){var n=t.indexOf(e);n>-1&&t.splice(n,1)})},a.removeAll=function(){n.forEach(t,function(e){e.length=0})},a}]),n.module("services.pagetpl",[]),n.module("services.pagetpl").factory("pageTplService",["$http","$rootScope","$modal","$q",function(e){var t={};return t.getPageTpls=function(t){var n="?c=scene&a=syspagetpl&id="+t,a=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+a.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+n})},t.getPageTplTypes=function(){var t="pageTplType.htm",n=new Date;return t+=(/\?/.test(t)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})},t.getPageTagLabel=function(t){var n="?c=upfile&a=systag&type=1";null!=t&&(n+=(/\?/.test(n)?"&":"?")+"bizType="+t);var a=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+a.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+n})},t.getPageTagLabelCheck=function(t){var n="/m/scene/tag/page/list?id="+t,a=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},t.getPageTplTypestemp=function(t,n){var a="?c=scene&a=syspagetpl",i=new Date;return null!=t&&(a+=(/\?/.test(a)?"&":"?")+"tagId="+t),null!=n&&(a+=(/\?/.test(a)?"&":"?")+"bizType="+n),a+=(/\?/.test(a)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+a})},t.updataChildLabel=function(t,n){var a="/m/eqs/tag/page/set/?ids="+t;null!=n&&(a+=(/\?/.test(a)?"&":"?")+"pageId="+n);var i=new Date;return a+=(/\?/.test(a)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"POST",url:PREFIX_URL+a})},t}]),n.module("services.sample",[]).factory("sampleService",["$rootScope","$http",function(e,t){var n={};return n.getSamples=function(e,n,a){var i=PREFIX_S1_URL+"eqs/promotion";return e&&(i+="?type="+e),n&&(i+=/\?/.test(i)?"&":"?",i+="pageNo="+n),a&&(i+=/\?/.test(i)?"&":"?",i+="pageSize="+a),i+=(/\?/.test(i)?"&":"?")+"time="+(new Date).getTime(),t({withCredentials:!0,method:"GET",url:i})},n.getSamplesPV=function(){var e=PREFIX_S1_URL+"eqs/topThree?time="+(new Date).getTime();return t({withCredentials:!0,method:"GET",url:e})},n}]),n.module("services.scene",["scene.create.console"]),n.module("services.scene").factory("sceneService",["$http","$rootScope","$modal","$q","security","$cacheFactory",function(e,t,a,i,s,o){function l(e,t){var n={},a=$(".edit_area"),i=a.children().last(),s=a.children(".maxIndex"),o=0;if(o=s.length>0?parseInt(s.css("z-index"))+1:i.length>0?parseInt(i.css("z-index"))+1:101,t)return t.zIndex=o,t;var l=i;return n=l.length<=0?{top:"30px",left:"0px"}:l.position().top+l.outerHeight()>$(".edit_area").outerHeight()-10?{top:l.position().top,left:l.position().left+10+"px"}:{top:l.position().top+l.outerHeight()+10+"px",left:l.position().left+"px"},n.zIndex=o,n}function r(e,t){var n=parseInt(e.css.top.substring(0,e.css.top.length-2))+34*E.sameCopyCount,a=parseInt(e.css.left.substring(0,e.css.left.length-2));n+34>$(".edit_area").outerHeight()?(t.css.top=n+"px",t.css.left=a+10+"px"):(t.css.top=n+34+"px",t.css.left=e.css.left,E.sameCopyCount++)}function c(e,t,n){var a,i={};if(3==(""+e).charAt(0)){if($("#editBG:visible").length>0){var s;for(s=0;s<D.length;s++)if(3==D[s].type){i=D[s];break}return i}i={content:null,css:{},id:100*Math.random(),num:0,pageId:L.obj.id,properties:{bgColor:null,imgSrc:null},sceneId:L.obj.sceneId,title:null,type:3}}return 1==(""+e).charAt(0)&&(i={id:Math.ceil(100*Math.random()),properties:{title:"提交"},type:1,pageId:L.obj.id,sceneId:L.obj.sceneId}),8==(""+e).charAt(0)&&(a=l(e,t),$.extend(!0,a,{color:"#676767",borderWidth:"1",borderStyle:"solid",borderColor:"#ccc",borderRadius:"5",backgroundColor:"#f9f9f9"}),i={content:"",css:a,id:Math.ceil(100*Math.random()),num:1,pageId:L.obj.id,properties:{title:"一键拨号",number:""},sceneId:L.obj.sceneId,title:null,type:8}),2==(""+e).charAt(0)&&(a=l(e,t),i={content:"点击此处进行编辑",css:a,id:Math.ceil(100*Math.random()),num:1,pageId:L.obj.id,properties:{},sceneId:L.obj.sceneId,title:null,type:2}),4==(""+e).charAt(0)&&(a=l(e,t),a.width="100px",a.height="100px",i={content:"",css:a,id:Math.ceil(100*Math.random()),num:1,pageId:L.obj.id,properties:{width:"100px",height:"100px",src:""},sceneId:L.obj.sceneId,title:null,type:4}),5==(""+e).charAt(0)&&(a=l(e,t),$.extend(!0,a,{color:"#676767",borderWidth:"1",borderStyle:"solid",borderColor:"#ccc",borderRadius:"5",backgroundColor:"#f9f9f9"}),i={content:"",css:a,id:Math.ceil(100*Math.random()),num:1,pageId:L.obj.id,properties:{placeholder:"请命名"},isInput:1,sceneId:L.obj.sceneId,title:"请命名",type:5}),6==(""+e).charAt(0)&&(a=l(e,t),$.extend(!0,a,{color:"#676767",borderWidth:"1",borderStyle:"solid",borderColor:"#ccc",borderRadius:"5",backgroundColor:"#f9f9f9"}),i={content:"",css:a,id:Math.ceil(100*Math.random()),num:1,pageId:L.obj.id,properties:{title:"提交"},sceneId:L.obj.sceneId,title:null,type:6}),"p"==e&&(a=l(e,t),i={content:"",css:a,id:Math.ceil(100*Math.random()),num:1,pageId:L.obj.id,properties:{title:"图集"},sceneId:L.obj.sceneId,title:null,type:"p"}),"v"==e&&(a=l(e,t),a.width="48px",a.height="48px",i={content:"",css:a,id:Math.ceil(100*Math.random()),num:1,pageId:L.obj.id,properties:{src:""},sceneId:L.obj.sceneId,title:null,type:"v"}),n&&$.extend(!0,i,n),D.push(i),R[i.id]=i,i}function d(e,n){var a=P.wrapComp(n,"edit");$(".edit_area").append(a);for(var i=P.getInterceptors(),s=0;s<i.length;s++)i[s](a,n);P.getEventHandlers()[(""+e).charAt(0)](a,n),t.$broadcast("dom.changed")}function p(e){var t=[];return"g101"==e&&(t.push(N("501")),t.push(N("502")),t.push(N("503")),t.push(N("601"))),t}function g(e,n){$(e).css("cursor","text"),$(e).parents("li").hasClass("inside-active")||($(e).bind("click",function(e){e.stopPropagation()}),$(document).bind("mousedown",function(){$(e).css("cursor","default"),$("#btn-toolbar").find("input[type=text][data-edit]").blur(),$("#btn-toolbar")&&$("#btn-toolbar").remove(),$(e).unbind("click"),n.content=$(e).html(),$(e).parents("li").removeClass("inside-active").css("user-select","none"),$(e).removeAttr("contenteditable"),$(document).unbind("mousedown")}),$(e).parents("li").addClass("inside-active").css("user-select","initial"),t.$broadcast("text.click",e))}function u(e){_(e,function(t){e.properties.src=t.data;var n=t.width/t.height,a=$("#"+e.id);if(a.length>0){var i=$("#inside_"+e.id).width(),s=$("#inside_"+e.id).height(),o=i/s;n>=o?(a.outerHeight(s),a.outerWidth(s*n),a.css("marginLeft",-(a.outerWidth()-i)/2),a.css("marginTop",0)):(a.outerWidth(i),a.outerHeight(i/n),a.css("marginTop",-(a.outerHeight()-s)/2),a.css("marginLeft",0)),a.attr("src",PREFIX_FILE_HOST+t.data),e.properties.imgStyle={},e.properties.imgStyle.width=a.outerWidth(),e.properties.imgStyle.height=a.outerHeight(),e.properties.imgStyle.marginTop=a.css("marginTop"),e.properties.imgStyle.marginLeft=a.css("marginLeft")}else t.width>$(".edit_area").width()&&(t.width=$(".edit_area").width(),t.height=t.width/n),t.height>$(".edit_area").height()&&(t.height=$(".edit_area").height(),t.width=t.height*n),e.css.width=t.width,e.css.height=t.height,e.properties.imgStyle={},e.properties.imgStyle.width=t.width,e.properties.imgStyle.height=t.height,e.properties.imgStyle.marginTop="0",e.properties.imgStyle.marginLeft="0",d(e.type,e)},function(){e.properties.src||(D.splice(D.indexOf(R[e.id]),1),delete R[e.id])})}function m(e){a.open({windowClass:"console",templateUrl:"scene/console/button.tpl.html",controller:"ButtonConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){e.properties.title=t.title;var n=t.title.replace(/ /g,"&nbsp;");$("#"+e.id).html(n)})}function h(e){U||(U=a.open({windowClass:"console",templateUrl:"scene/console/tel.tpl.html",controller:"TelConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){U=null,e.properties.title=t.title,e.properties.number=t.number,t.title.replace(/ /g,"&nbsp;"),$.extend(!0,e.css,t.btnStyle),$("#"+e.id).length>0&&$("#"+e.id).parents("li").remove(),d(e.type,e)},function(){U=null,$("#"+e.id).length||(D.splice(D.indexOf(R[e.id]),1),delete R[e.id])}))}function f(e){U||(U=a.open({windowClass:"console",templateUrl:"scene/console/input.tpl.html",controller:"InputConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){U=null,t.type&&(e.type=t.type),e.properties.placeholder=t.title,e.properties.required=t.required,e.title=t.title,$("#"+e.id).length>0?($("#"+e.id).attr("placeholder",t.title),$("#"+e.id).attr("required",t.required)):d(e.type,e)},function(){U=null,$("#"+e.id).length||(D.splice(D.indexOf(R[e.id]),1),delete R[e.id])}))}function v(e){U||(U=a.open({windowClass:"console",templateUrl:"scene/console/pic_lunbo.tpl.html",controller:"picsCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){U=null,e.properties=t;var n=$("#inside_"+e.id);n.length&&n.remove(),d(e.type,e)},function(){U=null,$("#"+e.id).length||(D.splice(D.indexOf(R[e.id]),1),delete R[e.id])}))}function y(e){U||(U=a.open({windowClass:"console",templateUrl:"scene/console/video.tpl.html",controller:"VideoCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){U=null,e.properties.src=t,$("#"+e.id).length||d(e.type,e)},function(){U=null,$("#"+e.id).length||(D.splice(D.indexOf(R[e.id]),1),delete R[e.id])}))}function w(e){a.open({windowClass:"console",templateUrl:"scene/console/microweb.tpl.html",controller:"MicroConsoleCtrl",resolve:{obj:function(){return e.properties.labels||(e.properties.labels=[{id:1,title:"栏目一",color:{backgroundColor:"#23A3D3",color:""},link:""},{id:2,title:"栏目二",color:{backgroundColor:"#23A3D3",color:""},link:""}]),e}}}).result.then(function(t){$("#"+e.id).length>0?(e.properties.labels=[],n.forEach(t,function(t){delete t.selected,delete t.mousedown,delete t.$$hashKey,e.properties.labels.push(t)}),$("#"+e.id).parents("li").remove(),d(e.type,e)):(e.css={left:"0px",width:"100%",bottom:"0px",height:"50px",zIndex:999},e.properties.labels=[],n.forEach(t,function(t){delete t.selected,delete t.mousedown,delete t.$$hashKey,e.properties.labels.push(t)}),position=null,d(e.type,e))},function(){$("#"+e.id).length||(D.splice(D.indexOf(R[e.id]),1),delete R[e.id]),console.log(e)})}function x(e){_(e,function(t){var n=document.getElementsByClassName("edit_area")[0];if(n=$(n).parent()[0],"imgSrc"==t.type){var a=t.data;n.style.backgroundImage="url("+(a.indexOf("syspic/")>=0?PREFIXSYS_FILE_HOST:USER_FILE_HOST)+a+")",e.properties.bgColor=null,e.properties.imgSrc=a}"backgroundColor"==t.type&&(n.style.backgroundImage="none",n.style.backgroundColor=t.color,e.properties.imgSrc=null,e.properties.bgColor=t.color),$("#editBG").unbind("click"),$("#editBG").show().bind("click",function(){x(e)})},function(){})}function C(){U||(U=a.open({windowClass:"console",templateUrl:"scene/console/audio.tpl.html",controller:"AudioConsoleCtrl",resolve:{obj:function(){return L.obj.scene.image&&L.obj.scene.image.bgAudio?L.obj.scene.image.bgAudio:{}}}}).result.then(function(e){U=null,"bgAudio"==e.compType&&(L.obj.scene.image||(L.obj.scene.image={}),L.obj.scene.image.bgAudio=e.bgAudio)},function(){U=null}))}function _(e,t,n){if(!U){var i="0";3==e.type&&(i="0"),4==e.type&&(i="1"),U=a.open({windowClass:"console img_console",templateUrl:BASE_URL+"templates/scene.console.bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:i,elemDef:e}}}}).result.then(function(e){U=null,t(e)},function(e){U=null,n(e)})}}function T(e){E.currentElemDef=e,t.$broadcast("showStylePanel",{activeTab:"style"})}function k(e){E.currentElemDef=e,t.$broadcast("showStylePanel",{
activeTab:"anim"})}function I(e){console.log(e),E.currentElemDef=e,M=t.$broadcast("showCropPanel",e)}function S(e){a.open({windowClass:"console",templateUrl:"scene/console/link.tpl.html",controller:"LinkConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){t&&"http://"!=t?(e.properties.url=isNaN(t)?PREFIX_S1_URL+"scenedata-links?id="+e.sceneId+"&url="+encodeURIComponent(t):t,$("#inside_"+e.id).find(".fa-link").removeClass("fa-link").addClass("fa-anchor")):(delete e.properties.url,$("#inside_"+e.id).find(".fa-anchor").removeClass("fa-anchor").addClass("fa-link"))})}var E={},P=eqShow.templateParser("jsonParser"),L=null,D=null,R={},A=($(".edit_area"),E.createCompGroup=function(e,t){for(var n=p(e),a=0;a<n.length;a++){var i=c(n[a].type,t,n[a]);t=null,d(n[a].type,i)}}),N=function(e){var t;return"501"==e&&(t={properties:{placeholder:"姓名"},title:"姓名",type:501}),"502"==e&&(t={properties:{placeholder:"手机"},title:"手机",type:502}),"503"==e&&(t={properties:{placeholder:"邮箱"},title:"邮箱",type:503}),"601"==e&&(t={properties:{title:"提交"},type:601}),t};E.createComp=function(e,t){if("g"==(""+e).charAt(0))return void A(e,t);if("9"==(""+e).charAt(0))return void C();if(1==e){if($(".comp_title").length>0)return void alert("已存在一个标签");var n=c(e,t);return void w(n)}var n=c(e,t);return 4==e?void u(n):5==e?void f(n):8==e?void h(n):"p"==e?void v(n):"v"==e?void y(n):void(3==e?x(n):d(e,n))},E.updateCompPosition=function(e,t){for(var n=0;n<D.length;n++)"inside_"+D[n].id==e&&(D[n].css?(D[n].css.left=t.left,D[n].css.top=t.top):D[n].css=t)},E.updateCompAngle=function(e,t){for(var n=0;n<D.length;n++)"inside_"+D[n].id==e&&(D[n].css?D[n].css.transform="rotateZ("+t+"deg)":D[n].css={})},E.getPageNames=function(t){var n="?c=scene&a=pageList&id="+t+"&date="+(new Date).getTime();return e({withCredentials:!0,method:"GET",url:JSON_URL+n})},E.changePageSort=function(t,n){var a="m/scene/pageSort?id="+n+"&pos="+t+"&date="+(new Date).getTime();return e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})},E.updateCompSize=function(e,t){for(var n=0;n<D.length;n++)"inside_"+D[n].id==e&&(D[n].css||(D[n].css={}),D[n].css.width=t.width,D[n].css.height=t.height,D[n].properties.width=t.width,D[n].properties.height=t.height,t.imgStyle&&(D[n].properties.imgStyle=t.imgStyle))},E.savePageNames=function(t){var n="m/scene/savePage",a={id:t.id,sceneId:t.sceneId,name:t.name};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)})},E.resetCss=function(){$(".edit_area li").each(function(e,t){var n=R[t.id.replace(/inside_/g,"")];n&&(n.css||(n.css={}),n.css.zIndex=t.style.zIndex?t.style.zIndex:"0")})},E.copyElement=function(e){var t=n.copy(e);b=!0,E.originalElemDef=e,E.copyElemDef=t},E.pasteElement=function(e,t){t.id=Math.ceil(100*Math.random()),t.pageId=L.obj.id,t.id=Math.ceil(100*Math.random()),E.pageId==t.pageId?r(e,t):(E.sameCopyCount=0,t.css=n.copy(e.css));var a=n.copy(t);D.push(a),R[a.id]=a,d(a.type,a),E.pageId=L.obj.id};var U=null,M=null;return P.addInterceptor(function(e,i){function o(){var n=$('<ul id="popMenu" class="dropdown-menu" style="min-width: 100px; display: block;" role="menu" aria-labelledby="dropdownMenu1">                                <li class="edit" role="presentation"><a role="menuitem" tabindex="-1"><div class="glyphicon glyphicon-edit" style="color: #08a1ef;"></div>&nbsp;&nbsp;编辑</a></li>                                <li class="style" role="presentation"><a role="menuitem" tabindex="-1"><div class="fa fa-paint-brush" style="color: #08a1ef;"></div>&nbsp;&nbsp;样式</a></li>                                <li class="animation" role="presentation"><a role="menuitem" tabindex="-1"><div class="fa fa-video-camera" style="color: #08a1ef;"></div>&nbsp;&nbsp;动画</a></li>                                <li class="link" role="presentation"><a role="menuitem" tabindex="-1"><div class="fa fa-link" style="color: #08a1ef;"></div>&nbsp;&nbsp;链接</a></li>                                <li class="copy" role="presentation" style="margin-bottom:5px;"><a role="menuitem" tabindex="-1"><div class="fa fa-copy" style="color: #08a1ef;"></div>&nbsp;&nbsp;复制</a></li>                                <li class="cut" role="presentation" style="margin-bottom:5px;"><a role="menuitem" tabindex="-1"><div class="fa fa-cut" style="color: #08a1ef;"></div>&nbsp;&nbsp;裁剪</a></li>                                <li role="presentation" class="bottom_bar">                                    <a title="上移一层"><div class="up" style="display: inline-block; width: 26px;height: 22px; background: url(http://static.parastorage.com/services/skins/2.1127.3/images/wysiwyg/core/themes/editor_web/button/fpp-buttons-icons4.png) 0px -26px no-repeat;"></div></a>                                    <a title="下移一层"><div class="down" style="display: inline-block; width: 26px;height: 22px; background: url(http://static.parastorage.com/services/skins/2.1127.3/images/wysiwyg/core/themes/editor_web/button/fpp-buttons-icons4.png) 0px -80px no-repeat;"></div></a>                                    <a title="删除"><div class="remove" style="display: inline-block; width: 26px;height: 22px; background: url(http://static.parastorage.com/services/skins/2.1127.3/images/wysiwyg/core/themes/editor_web/button/fpp-buttons-icons4.png) 0px -1px no-repeat;"></div></a>                                </li>                            </ul>').css({position:"absolute","user-select":"none"});return b&&n.find(".copy").after($('<li class="paste" role="presentation"><a role="menuitem" tabindex="-1"><div class="fa fa-paste" style="color: #08a1ef;"></div>&nbsp;&nbsp;粘贴</a></li>')),n.find(".edit").click(function(t){switch(t.stopPropagation(),i.type.toString().charAt(0)){case"1":break;case"2":g(e.find(".element").get(0),i);break;case"3":break;case"4":u(i);break;case"5":f(i);break;case"6":m(i);break;case"7":break;case"8":h(i);break;case"9":break;case"g":break;case"p":v(i);break;case"v":y(i)}n.hide()}),n.find(".style").click(function(t){s.isAllowToAccess(s.accessDef.CREATE_STYLE_SETTING)?(t.stopPropagation(),T(i,function(t){if(1==i.type)for(var n in i.properties.labels)t.backgroundColor&&(i.properties.labels[n].color.backgroundColor=t.backgroundColor,$(".label_content").css("background-color",t.backgroundColor)),t.color&&(i.properties.labels[n].color.color=t.color,$(".label_content").css("color",t.color));else $(".element-box",e).css(t),$.extend(!0,i.css,t)})):(t.stopPropagation(),a.open({windowClass:"console",templateUrl:"scene/console/fake.tpl.html",controller:"FakeConsoleCtrl",resolve:{type:function(){return"style"}}})),n.hide()}),n.find(".animation").click(function(e){e.stopPropagation(),k(i,function(e){i.properties.anim=e}),n.hide()}),n.find(".link").click(function(e){e.stopPropagation(),S(i),n.hide()}),n.find(".remove").click(function(a){a.stopPropagation(),e.remove(),D.splice(D.indexOf(R[i.id]),1),INTERVAL_OBJ[i.id]&&(clearInterval(INTERVAL_OBJ[i.id]),delete INTERVAL_OBJ[i.id]),n.hide(),t.$broadcast("hideStylePanel")}),n.find(".down").click(function(){var t=e.prev();if(!(t.length<=0)){var n=e.css("zIndex");e.css("zIndex",t.css("zIndex")),t.css("zIndex",n),t.before(e);for(var a=0;a<D.length;a++)if(D[a].id==i.id&&a>0){var n=D[a].css.zIndex;D[a].css.zIndex=D[a-1].css.zIndex,D[a-1].css.zIndex=n;break}}}),n.find(".up").click(function(){var t=e.next();if(!(t.length<=0)){var n=e.css("zIndex");e.css("zIndex",t.css("zIndex")),t.css("zIndex",n),t.after(e);for(var a=0;a<D.length;a++)if(D[a].id==i.id&&a<D.length-1){var n=D[a].css.zIndex;D[a].css.zIndex=D[a+1].css.zIndex,D[a+1].css.zIndex=n;break}}}),n.find(".copy").click(function(e){e.stopPropagation(),E.sameCopyCount=0,E.pageId=L.obj.id,$(".modal-dialog")[0]||E.copyElement(i),n.hide()}),n.find(".paste").click(function(e){e.stopPropagation(),$(".modal-dialog")[0]||E.pasteElement(E.originalElemDef,E.copyElemDef),n.hide()}),n.find(".cut").click(function(e){e.stopPropagation(),I(i),n.hide()}),4!=i.type&&(n.find(".link").hide(),n.find(".cut").hide()),"p"==i.type&&(n.find(".animation").hide(),n.find(".style").hide()),n}var l=$("#eq_main");e.on("click contextmenu",".element-box",function(e){e.stopPropagation(),$("#btn-toolbar")[0]||(E.elemDefTpl=n.copy(i)),$("#comp_setting:visible").length>0&&"p"!=i.type&&(E.currentElemDef=i,t.$broadcast("showStylePanel"));var a=o(),s=$("#popMenu");return s.length>0&&s.remove(),l.append(a),a.css({left:e.pageX+l.scrollLeft()+15,top:e.pageY+l.scrollTop()}).show(),l.mousemove(function(e){(e.pageX<a.offset().left-20||e.pageX>a.offset().left+a.width()+20||e.pageY<a.offset().top-20||e.pageY>a.offset().top+a.height()+20)&&(a.hide(),$(this).unbind("mousemove"))}),!1}),e.attr("title","按住鼠标进行拖动，点击鼠标进行编辑")}),$(document).on("keydown",function(e){!e.ctrlKey&&!e.metaKey||86!=e.keyCode||!E.elemDefTpl||$("#btn-toolbar")[0]||$(".modal-dialog")[0]||(e.preventDefault(),b&&(e.preventDefault(),E.pasteElement(E.originalElemDef,E.copyElemDef)))}),$(document).keydown(function(e){!e.ctrlKey&&!e.metaKey||67!=e.keyCode||!E.elemDefTpl||$("#btn-toolbar")[0]||$(".modal-dialog")[0]||(e.preventDefault(),E.pageId=L.obj.id,E.sameCopyCount=0,E.copyElement(E.elemDefTpl))}),P.bindEditEvent("1",function(e,t){$(e).unbind("dblclick"),$(e).show().bind("dblclick",function(){w(t)})}),P.bindEditEvent("2",function(e,t){var n=$(".element",e)[0];$(n).mousedown(function(e){$(this).parents("li").hasClass("inside-active")&&e.stopPropagation()}),$(n).bind("contextmenu",function(e){$(this).parents("li").hasClass("inside-active")?e.stopPropagation():$(this).blur()}),n.addEventListener("dblclick",function(e){g(n,t),$("#popMenu").hide(),e.stopPropagation()})}),P.bindEditEvent("3",function(e,t){$("#editBG").unbind("click"),$("#editBG").show().bind("click",function(){x(t)})}),P.bindEditEvent("v",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){y(t),$("#popMenu").hide()})}),P.bindEditEvent("4",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){u(t),$("#popMenu").hide()})}),P.bindEditEvent("5",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){f(t),$("#popMenu").hide()})}),P.bindEditEvent("p",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){v(t),$("#popMenu").hide()})}),P.bindEditEvent("6",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){m(t),$("#popMenu").hide()})}),P.bindEditEvent("8",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){h(t),$("#popMenu").hide()})}),P.bindEditEvent("7",function(e,t){var n=$(".element",e)[0];n.addEventListener("click",function(){U||a.open({windowClass:"",templateUrl:"scene/console/map.tpl.html",controller:"MapConsoleCtrl"}).result.then(function(e){var n=new BMap.Map("map_"+t.id);n.clearOverlays();var a=new BMap.Point(e.lng,e.lat),i=new BMap.Marker(a);n.addOverlay(i);var s=new BMap.Label(e.address,{offset:new BMap.Size(20,(-10))});i.setLabel(s),n.centerAndZoom(a,12),t.properties.pointX=e.lng,t.properties.pointY=e.lat,t.properties.x=e.lng,t.properties.y=e.lat,t.properties.markTitle=e.address})})}),E.templateEditor=P,E.getTplById=function(t){var n="m/scene/select?id="+t,a=new Date;return n+="&time="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},E.createByTpl=function(t){var n=JSON_URL+"?c=scene&a=createBySys";return e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},E.getSceneDetail=function(t){var n="?c=scene&a=detail&id="+t;return e({withCredentials:!0,method:"GET",url:JSON_URL+n})},E.saveSceneSettings=function(t){var n="?c=scene&a=saveSettings";return e({withCredentials:!0,method:"POST",url:JSON_URL+n,headers:{"Content-Type":"text/plain; charset=UTF-8"},data:JSON.stringify(t)})},E.publishScene=function(t){var n="scene-publish.htm?id="+t,a=new Date;return n+="&time="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},E.closeScene=function(t){var n="?c=scene&a=off&id="+t,a=new Date;return n+="&time="+a.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+n})},E.openScene=function(t){var n="?c=scene&a=on&id="+t,a=new Date;return n+="&time="+a.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+n})},E.createBlankScene=function(t,n,a){var i={name:t,type:n,pageMode:a},s="?c=scene&a=create";return e({withCredentials:!0,method:"POST",url:JSON_URL+s,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(i)})},E.copySceneById=function(t){var n="?c=scene&a=createByCopy&id="+t;return e({withCredentials:!0,method:"GET",url:JSON_URL+n})},E.deleteSceneById=function(t){var n="?c=scene&a=delscene&id="+t;return e({withCredentials:!0,method:"GET",url:JSON_URL+n})},E.getCoverImages=function(){var t="?c=upfile&a=userlist&bizType=99&fileType=1&time="+(new Date).getTime();return e({withCredentials:!0,method:"GET",url:JSON_URL+t})},E.getSceneByPage=function(t,n,a){var s="";n||a?(s="?c=scene&a=createPage&id="+t,a&&(s+="&copy=true")):s="?c=scene&a=design&id="+t;var o=i.defer(),l=new Date;return s+=(/\?/.test(s)?"&":"?")+"time="+l.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+s}).then(function(e){o.resolve(e),L=e.data,L.obj.elements||(L.obj.elements=[]),D=L.obj.elements;for(var t=0;D&&t<D.length;t++)R[D[t].id]=D[t]},function(e){o.reject(e)}),o.promise},E.previewSceneTpl=function(t){var n="?c=scene&a=syspageinfo&id="+t,a=(i.defer(),new Date);return n+=(/\?/.test(n)?"&":"?")+"time="+a.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+n})},E.recordTplUsage=function(t){var n="?c=scene&a=usepage&id="+t;return e({withCredentials:!0,method:"POST",url:JSON_URL+n})},E.getSceneTpl=function(t){var n=o.get("tplCache")?o.get("tplCache"):o("tplCache"),a=i.defer();if(n.get(t)){var s=$.extend(!0,{},n.get(t));s.data.obj.scene&&s.data.obj.scene.image&&s.data.obj.scene.image.bgAudio&&(L.obj.scene.image||(L.obj.scene.image={}),L.obj.scene.image.bgAudio=s.data.obj.scene.image.bgAudio);for(var l=0;l<s.data.obj.elements.length;l++){var r=s.data.obj.elements[l];r.id=Math.ceil(100*Math.random()),r.sceneId=L.obj.sceneId,r.pageId=L.obj.id}D=s.data.obj.elements;for(var c=0;c<D.length;c++)R[D[c].id]=D[c];a.resolve(s)}else{var d="?c=scene&a=syspageinfo&id="+t,p=new Date;d+=(/\?/.test(d)?"&":"?")+"time="+p.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+d}).then(function(e){n.put(e.data.obj.id,$.extend(!0,{},e)),e.data.obj.scene&&e.data.obj.scene.image&&e.data.obj.scene.image.bgAudio&&(L.obj.scene.image||(L.obj.scene.image={}),L.obj.scene.image.bgAudio=e.data.obj.scene.image.bgAudio);for(var t=0;t<e.data.obj.elements.length;t++){var i=e.data.obj.elements[t];i.id=Math.ceil(100*Math.random()),i.sceneId=L.obj.sceneId,i.pageId=L.obj.id}D=e.data.obj.elements;for(var s=0;s<D.length;s++)R[D[s].id]=D[s];a.resolve(e)},function(e){a.reject(e)})}return a.promise},E.saveScene=function(t){var n="?c=scene&a=savepage";return e({withCredentials:!0,method:"POST",url:JSON_URL+n,headers:{"Content-Type":"text/plain; charset=UTF-8"},data:JSON.stringify(t)})},E.deletePage=function(t){var n="?c=scene&a=delPage&id="+t;return e({withCredentials:!0,method:"GET",url:JSON_URL+n})},E.getBgImages=function(t){var n="m/scene/gallery/"+t,a=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},E.createCustomComp=N,E.openAudioModal=C,E.getElements=function(){return D},E.getSceneObj=function(){return L},E.getTpls=function(t,n,a,i){var s="?c=scene&a=syslist";null!=t&&(s+=(/\?/.test(s)?"&":"?")+"sceneType="+t),s+=(/\?/.test(s)?"&":"?")+"pageNo="+(n?n:1),s+=(/\?/.test(s)?"&":"?")+"pageSize="+(a?a:12),i&&(s+=(/\?/.test(s)?"&":"?")+"orderBy="+i);var o=new Date;return s+=(/\?/.test(s)?"&":"?")+"time="+o.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+s})},E.getSceneType=function(){var t="?c=statics&a=typelist";return e({withCredentials:!0,method:"GET",url:JSON_URL+t})},E.getPageTpls=function(t,n,a,i,s,o){var l="?c=scene&a=syslist";t&&(l+=(/\?/.test(l)?"&":"?")+"tplType=1"),n&&(l+=(/\?/.test(l)?"&":"?")+"bizType="+n),a&&(l+=(/\?/.test(l)?"&":"?")+"tagId="+a),o&&(l+=(/\?/.test(l)?"&":"?")+"orderBy="+o);var r=new Date;return l+=(/\?/.test(l)?"&":"?")+"pageNo="+(i?i:1),l+=(/\?/.test(l)?"&":"?")+"pageSize="+(s?s:12),l+=(/\?/.test(l)?"&":"?")+"time="+r.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+l})},E.getPageTplTypesTwo=function(t,n){var a="?c=upfile&a=systag&type=2&bizType="+n,i=new Date;return a+=(/\?/.test(a)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"GET",url:JSON_URL+a})},E}]),n.module("services.spread",[]),n.module("services.spread").factory("SpreadService",["$http",function(e){var t={};return t.getDataBySceneId=function(t,n,a,i,s){var o="m/scene/stat?id="+t;n&&(o+="&startDate="+n),a&&(o+="&endDate="+a),i&&(o+="&pageSize="+i),s&&(o+="&pageNo="+s);var l=new Date;return o+="&time="+l.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+o})},t.getActivities=function(){var t=new Date;return e({withCredentials:!0,method:"GET",url:PREFIX_URL+"m/u/promotion/list?type=pc&time="+t.getTime()})},t.getActivityDetail=function(t){var n=new Date;return e({withCredentials:!0,method:"GET",url:JSON_URL+"?c=statics&a=all&line=7174&code="+t+"&time="+n.getTime()})},t}]),n.module("services.usercenter",[]).factory("usercenterService",["$http",function(e){var t={};return t.getUserInfo=function(){var t=PREFIX_URL+"m/u/info";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},t.saveUserInfo=function(t){var n=PREFIX_URL+"m/u/save";return e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},t.getUserXd=function(){var t=PREFIX_URL+"m/u/xd";return t+="?time="+(new Date).getTime(),e("")},t.getgiveXd=function(t){var n=PREFIX_URL+"m/u/giveXd";return n+="?toUser="+t.toUser,n+="&xdCount="+t.xdCount,n+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:n})},t.getXdlog=function(t,n){var a=PREFIX_URL+"m/u/xdlog?pageNo="+t+"&pageSize="+n;return a+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:a})},t.getXdStat=function(){var t=PREFIX_URL+"m/u/xdStat";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},t.relAccount=function(t,n,a){var i=PREFIX_URL+"eqs/bindAccount?relUser="+t+"&loginName="+n+"&loginPassword="+a;return i+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},t.setRead=function(t){var n=PREFIX_URL+"m/u/markRead?ids="+t;return n+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},t.getNewMessage=function(t,n,a){var i=JSON_URL+"?c=statics&a=all&line=7248&pageNo="+t+"&pageSize="+n;return a&&(i+="&unread="+a),i+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:i})},t}]),n.module("templates-app",["about.tpl.html","data/associateData.tpl.html","data/editData.tpl.html","dialog/confirm.tpl.html","dialog/message.tpl.html","error.tpl.html","error/error.tpl.html","footer.tpl.html","header.tpl.html","help.tpl.html","home/home.tpl.html","main/customer.tpl.html","main/main.tpl.html","main/spread.tpl.html","main/spreadDetail.tpl.html","main/userGuide.tpl.html","my/myscene.tpl.html","my/sceneSetting.tpl.html","my/upload.tpl.html","notifications.tpl.html","reg/agreement.tpl.html","reg/reg.tpl.html","sample/sample.tpl.html","scene/console.tpl.html","scene/console/angle-knob.tpl.html","scene/console/anim.tpl.html","scene/console/audio.tpl.html",BASE_URL+"templates/scene.console.bg.tpl.html","scene/console/button.tpl.html","scene/console/category.tpl.html","scene/console/cropimage.tpl.html","scene/console/fake.tpl.html","scene/console/input.tpl.html","scene/console/link.tpl.html","scene/console/map.tpl.html","scene/console/microweb.tpl.html","scene/console/pic_lunbo.tpl.html","scene/console/setting.tpl.html","scene/console/style.tpl.html","scene/console/tel.tpl.html","scene/console/video.tpl.html","scene/create.tpl.html","scene/createNew.tpl.html","scene/effect/falling.tpl.html","scene/scene.tpl.html","usercenter/console/relAccount.tpl.html","usercenter/request_reg.tpl.html","usercenter/transfer.tpl.html","usercenter/usercenter.tpl.html"]),n.module("about.tpl.html",[]).run(["$templateCache",function(e){e.put("about.tpl.html",'<div class="about">\n    <div class="header">\n        <div class="content">\n            <div class="logo"><img ng-src="{{CLIENT_CDN}}images/logo.png" alt=""></div>\n        </div>\n    </div>\n    <div class="banner">\n    \t<img ng-src="{{CLIENT_CDN}}images/contact1.jpg"/>\n    </div>\n    <div class="main clearfix">\n    \t<h1>关于我们</h1>\n        <p>一秀是专门为中小微企业营销人员精心打造的移动场景营销管家，旨在帮助中小微企业的营销人员通过移动互联网，轻松构建业务场景，轻量化展示产品和服务，多渠道推广，吸引沉淀客户，再营销，从而持续积累客户，提升营销效果，创造更高更好的市场业绩。</p>\n        <p>如果您需要借助移动互联网做新产品发布、客户培训会、用户沟通沙龙、移动环境中的产品演示、线上调研沟通、服务预约报名等业务活动时，就来一秀吧，我们相信如是微营销一定能帮到您。</p>\n\n        <img ng-src="{{CLIENT_CDN}}images/contact2.jpg"/>\n\n        <p>联系我们：</p>\n        <p>诗 18611538643 </p>\n        <p>邮件：vip@e.wesambo.com</p>\n        <p>QQ：2523238422</p>\n        <p>微信公众号： \n            <img style="display: block;" src="{{CLIENT_CDN}}images/code_about.jpg"/>\n        </p>\n    </div>\n</div>\n<div ng-include="\'footer.tpl.html\'"></div>')}]),n.module("data/associateData.tpl.html",[]).run(["$templateCache",function(e){e.put("data/associateData.tpl.html",'<div class="modal-header">\n    <span>导入客户</span>\n</div>\n<div class="data_associate">\n  <form class="form-horizontal" role="form">\n\t<ui-select ng-model="person.selected" theme="bootstrap">\n\t\t<ui-select-match placeholder="选择待导入场景">{{$select.selected.TITLE}}</ui-select-match>\n\t\t<ui-select-choices repeat="person in PremergeScenes | propsFilter: {TITLE: $select.search}">\n\t\t  <div ng-click="selectScene(person.ID)" ng-bind-html="person.TITLE | highlight: $select.search"></div>\n\t\t</ui-select-choices>\n\t</ui-select>\n\n\t<div class="panel panel-default" ng-show="fields">\n\t  \t<div class="panel-body">\t  \t\n\t\t\t<div class="form-group" ng-repeat="(findex, field) in fields">\n\t\t\t  \t<label class="col-sm-2 control-label">{{field.title}}</label>\n\t\t\t  \t<div class="col-sm-10">\n\t\t\t  \t\t<select class="form-control" ng-change="associate($index)" ng-model="associateMap[findex]" ng-options="staticFiled.name for staticFiled in staticFileds"></select>\n\t\t\t  \t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n  </form>\n</div>\n<div class="modal-footer">\n    <a class="btn-main login" style="width: 88px;" ng-click="confirm()">确定</a>\n    <a class="btn-grey0 cancel" style="width: 88px;" ng-click="cancel()">取消</a>\n</div>')}]),n.module("data/editData.tpl.html",[]).run(["$templateCache",function(e){e.put("data/editData.tpl.html",'<div class="panel panel-default">\n  <div class="panel-body">\n    <form name="formName" class="form-horizontal" role="form" style="padding-left:25px;">\n      <div class="form-group form-group-sm">\n        <label for="userName" class="col-sm-2 control-label">\n          姓名\n        </label>\n        <div class="col-sm-8">\n          <input type="text" name="name" ng-model="dataDetail.name" class="form-control"\n          id="userName" placeholder="姓名" show-icon callback-fn="updateData(arg1)">\n        </div>\n      </div>\n      <div class="form-group form-group-sm">\n        <label for="sex" class="col-sm-2 control-label">\n          性别\n        </label>\n        <div class="col-sm-8">\n          <!-- <input type="text" name=" sex" ng-model=" dataDetail.sex" class="form-control"\n          id="sex" placeholder="性别" show-icon callback-fn="updateData(arg1)"> -->\n          <select class="form-control input-sm" ng-model="sex" ng-options="sexOption.name for sexOption in sexOptions"\n          ng-change="updateSex(sex)">\n          </select>\n        </div>\n      </div>\n      <!-- <div class="form-group form-group-sm">\n      <label for="mobile" class="col-sm-2 control-label">手机</label>\n      <div class="col-sm-8">\n      <input type="text" name = "mobile" ng-model = "dataDetail.mobile" class="form-control" id="mobile" placeholder="手机" show-icon callback-fn="updateData(arg1)">\n      </div>\n      </div> -->\n      <div class="form-group form-group-sm" ng-repeat="mobile in formMobiles track by $index">\n        <label for="mobile" class="col-sm-2 control-label" ng-show="$index==0">\n          手机\n        </label>\n        <label for="手机" class="col-sm-2 control-label" ng-show="$index!=0">\n        </label>\n        <div class="col-sm-8" id="mobileAddress">\n          <div class="input-group">\n            <input type="text" name="mobile" ng-model="formMobiles[$index]" class="form-control"\n            placeholder="手机" show-icon callback-fn="updateData(arg1,formMobiles)">\n            <span class="input-group-btn" >\n              <button class="btn btn-default add-btn btn-sm" ng-click="removeInputs($index, \'mobile\', formMobiles)"\n              type="button">\n                <span class="fa fa-minus" >\n                </span>\n              </button>\n            </span>\n          </div>\n        </div>\n        <div class="col-sm-1">\n          <span style="padding-top:10px;" ng-click="addInputs(formMobiles)" ng-show="$index==0" class="fa fa-plus add-inputs">\n          </span>\n        </div>\n      </div>\n      <div class="form-group form-group-sm" ng-repeat="email in formEmails track by $index">\n        <label for="email" class="col-sm-2 control-label" ng-show="$index==0">\n          邮箱\n        </label>\n        <label for="email" class="col-sm-2 control-label" ng-show="$index!=0">\n        </label>\n        <div class="col-sm-8" id="emailAddress">\n          <div class="input-group">\n            <input type="text" name="email" ng-model="formEmails[$index]" class="form-control"\n            placeholder="邮箱" show-icon callback-fn="updateData(arg1,formEmails, formName.emial.$invalid)">\n            <span class="input-group-btn">\n              <button class="btn btn-default add-btn btn-sm" ng-click="removeInputs($index, \'email\', formEmails)"\n              type="button">\n                <span class="fa fa-minus">\n                </span>\n              </button>\n            </span>\n          </div>\n          <!-- /input-group -->\n        </div>\n        <div class="col-sm-1">\n          <span style="padding-top:10px;" ng-click="addInputs(formEmails)" ng-show="$index==0" class="fa fa-plus add-inputs">\n          </span>\n        </div>\n      </div>\n      <div class="form-group form-group-sm">\n        <label for="company" class="col-sm-2 control-label">\n          公司\n        </label>\n        <div class="col-sm-8">\n          <input type="text" name="company" ng-model="dataDetail.company" class="form-control"\n          id="company" placeholder="公司" show-icon callback-fn="updateData(arg1)">\n        </div>\n      </div>\n      <div class="form-group form-group-sm">\n        <label for="job" class="col-sm-2 control-label">\n          职务\n        </label>\n        <div class="col-sm-8">\n          <input type="text" name="job" ng-model="dataDetail.job" class="form-control"\n          id="job" placeholder="职务" show-icon callback-fn="updateData(arg1)" required>\n        </div>\n      </div>\n      <!-- <div class="form-group form-group-sm">\n      <label for="tel" class="col-sm-2 control-label">固定电话</label>\n      <div class="col-sm-8">\n      <input type="text" name = "tel" ng-model = "dataDetail.tel" class="form-control" id="tel" placeholder="固定电话" show-icon callback-fn="updateData(arg1)">\n      </div>\n      </div> -->\n      <div class="form-group form-group-sm" ng-repeat="tel in formTels track by $index">\n        <label for="tel" class="col-sm-2 control-label" ng-show="$index==0">\n          固定电话\n        </label>\n        <label for="tel" class="col-sm-2 control-label" ng-show="$index!=0">\n        </label>\n        <div class="col-sm-8" id="tel">\n          <div class="input-group">\n            <input type="text" name="tel" ng-model="formTels[$index]" class="form-control"\n            placeholder="固定电话" show-icon callback-fn="updateData(arg1,formTels)">\n            <span class="input-group-btn">\n              <button class="btn btn-default add-btn btn-sm" ng-click="removeInputs($index, \'email\', formTels)"\n              type="button">\n                <span class="fa fa-minus">\n                </span>\n              </button>\n            </span>\n          </div>\n          <!-- /input-group -->\n        </div>\n        <div class="col-sm-1">\n          <span style="padding-top:10px;" ng-click="addInputs(formTels)" ng-show="$index==0" class="fa fa-plus add-inputs">\n          </span>\n        </div>\n      </div>\n      <div class="form-group form-group-sm">\n        <label for="address" class="col-sm-2 control-label">\n          地址\n        </label>\n        <div class="col-sm-8">\n          <input type="text" name="address" ng-model="dataDetail.address" class="form-control"\n          id="address" placeholder="地址" show-icon callback-fn="updateData(arg1)">\n        </div>\n      </div>\n      <div class="form-group form-group-sm">\n        <label for="website" class="col-sm-2 control-label">\n          个人网址\n        </label>\n        <div class="col-sm-8">\n          <input type="text" name="website" ng-model="dataDetail.website" class="form-control"\n          id="website" placeholder="网址" show-icon callback-fn="updateData(arg1)">\n        </div>\n      </div>\n      <div class="form-group form-group-sm">\n        <label for="qq" class="col-sm-2 control-label">\n          QQ号\n        </label>\n        <div class="col-sm-8">\n          <input type="text" name="qq" ng-model="dataDetail.qq" class="form-control"\n          id="qq" placeholder="QQ号" show-icon callback-fn="updateData(arg1)">\n        </div>\n      </div>\n      <div class="form-group form-group-sm">\n        <label for="weixin" class="col-sm-2 control-label">\n          微信号\n        </label>\n        <div class="col-sm-8">\n          <input type="text" name="weixin" ng-model="dataDetail.weixin" class="form-control"\n          id="weixin" placeholder="微信号" show-icon callback-fn="updateData(arg1)">\n        </div>\n      </div>\n      <div class="form-group form-group-sm">\n        <label for="yixin" class="col-sm-2 control-label">\n          易信号\n        </label>\n        <div class="col-sm-8">\n          <input type="text" name="yixin" ng-model="dataDetail.yixin" class="form-control"\n          id="yixin" placeholder="易信号" show-icon callback-fn="updateData(arg1)">\n        </div>\n      </div>\n      <div class="form-group form-group-sm">\n        <label for="weibo" class="col-sm-2 control-label">\n          微博号\n        </label>\n        <div class="col-sm-8">\n          <input type="text" name="weibo" ng-model="dataDetail.weibo" class="form-control"\n          id="weibo" placeholder="微博号" show-icon callback-fn="updateData(arg1)">\n        </div>\n      </div>\n      <div class="form-group form-group-sm">\n        <label for="laiwang" class="col-sm-2 control-label">\n          来往号\n        </label>\n        <div class="col-sm-8">\n          <input type="text" name="laiwang" ng-model="dataDetail.laiwang" class="form-control"\n          id="inputEmail3" placeholder="来往号" show-icon callback-fn="updateData(arg1)">\n        </div>\n      </div>\n      <div class="form-group form-group-sm">\n        <label for="remark" class="col-sm-2 control-label">\n          其它\n        </label>\n        <div class="col-sm-8">\n          <input type="text" name="remark" ng-model="dataDetail.remark" class="form-control"\n          id="remark" placeholder="其它" show-icon callback-fn="updateData(arg1)">\n        </div>\n      </div>\n    </form>\n      <div class="edit-bar" style="text-align:center;">\n        <a class="btn btn-main backicon" ng-click="saveData()">\n          <span>保存</span>\n        </a>\n      </div>    \n  </div>\n</div>');
}]),n.module("dialog/confirm.tpl.html",[]).run(["$templateCache",function(e){e.put("dialog/confirm.tpl.html",'<div class="modal-header">\n    <span class="glyphicon glyphicon-exclamation-sign"></span>\n    <span>提示</span>\n</div>\n<div class="modal-body" ng-if="confirmObj.msg">\n\t<!-- confirm message -->\n\t<div class="confirm-msg">{{confirmObj.msg}}</div>\n</div>\n<div class="modal-footer">\n    <a ng-click="ok();" class="btn-main"\n    style="width: 88px;">\n        {{confirmObj.confirmName || \'是\'}}\n    </a>\n    <a ng-click="cancel();" class="btn-grey0"\n    style="width: 88px;margin-left: 15px;">\n        {{confirmObj.cancelName || \'取消\'}}\n    </a>\n</div>')}]),n.module("dialog/message.tpl.html",[]).run(["$templateCache",function(e){e.put("dialog/message.tpl.html",'<div class="modal-header">\n    <span class="glyphicon glyphicon-exclamation-sign"></span>\n    <span>{{msgObj.title || \'提示\'}}</span>\n</div>\n<div class="modal-body" ng-if="msgObj.msg">\n    <div class="msg" ng-class="msgObj.title ? \'\' : \'msg-padding\'">{{msgObj.msg}}</div>\n</div>\n<div class="modal-footer">\n\t<a ng-click="close();" class="btn-main"\n    style="width: 88px;">关闭</a>\n</div>')}]),n.module("error.tpl.html",[]).run(["$templateCache",function(e){e.put("error.tpl.html",'<div class="error">\n    <div class="header">\n        <div class="content">\n            <div class="logo"><img ng-src="{{CLIENT_CDN}}images/logo.png" alt=""></div>\n        </div>\n    </div>\n    <div class="error_contain">\n        <div class="error_con">\n            <img ng-src="{{CLIENT_CDN}}images/404_03.png" alt="" />\n            <p style="font-size:24px;margin-top:30px;margin-bottom:15px;">对不起，您想要进入的页面已经去火星了！</p>\n            <p style="text-align:left;"><a href="#/home">返回地球</a></p>\n        </div>\n    </div>\n</div>\n<div ng-include="\'footer.tpl.html\'"></div>')}]),n.module("error/error.tpl.html",[]).run(["$templateCache",function(e){e.put("error/error.tpl.html",'<div class="error">\n    <div class="header">\n        <div class="content">\n            <div class="logo"><img ng-src="{{CLIENT_CDN}}images/logo.png" alt="" /></div>\n        </div>\n    </div>\n    <div class="error_contain">\n        <div class="error_con">\n            <img ng-src="{{CLIENT_CDN}}images/404_03.png" alt="" />\n            <p style="font-size:24px;margin-top:30px;margin-bottom:15px;">对不起，您想要进入的页面已经去火星了！</p>\n            <p style="text-align:left;"><a href="#/home">返回地球</a></p>\n        </div>\n    </div>\n</div>\n<div ng-include="\'footer.tpl.html\'"></div>')}]),n.module("footer.tpl.html",[]).run(["$templateCache",function(e){e.put("footer.tpl.html",'<footer>\n\t<div class="content_center">\n\t\t<article class="footer">\n\t\t\t\t<p>\n\t\t\t\t<img ng-src="{{CLIENT_CDN}}images/logo.png">\n\t\t\t\t      \t\t<a target="_blank" href="javascript:void(0);">加入我们</a>|<a target="_blank" href="javascript:void(0);">意见反馈</a>|<a target="_blank" href="javascript:void(0);">内容举报</a>|<a target="_blank" href="javascript:void(0);">关于我们</a>|<a href="javascript:void(0);">论坛</a> ©2015 <a href="http://e.wesambo.com">e.wesambo.com</a>. All rights reserved\n        \t</p>\n        </article>\n\t</div>\n</footer>')}]),n.module("header.tpl.html",[]).run(["$templateCache",function(e){e.put("header.tpl.html",'<div class="header_tpl">\n\t<div class="content clearfix">\n\t\t<div class="logo" id="logo"><a href="#/main"><img ng-src="{{CLIENT_CDN}}images/logo.png" alt=""></a></div>\n\t\t<div class="head_nav" ng-show="showToolBar();">\n\t\t\t<ul class="clearfix head_navs">\n\t\t\t\t<li ng-class="{hover:isActive == \'main\'}"><a href="#/main">我的场景</a></li><li ng-class="{hover:isActive == \'spread\'}"><a href="#/main/spread">我的推广</a></li><li ng-class="{hover:isActive == \'customer\'}"><a href="#/main/customer">我的客户</a></li>\n <li ng-class="{hover:isActive == \'update\'}"><a href="/img/price.html">账号升级</a></li>\n\t\t\t\t<!--<li class="help_center_con" style="height:300px;"  ng-mouseover="showCode2 = true" ng-mouseleave="showCode2 = flase">\n\t\t\t\t\t<a>帮助中心</a>\n\t\t\t\t\t<div class="help_center" ng-show="showCode2 == true">\n\t\t\t\t\t\t<div><a href="javascript:void(0);">入门必读</a></div>\n\t\t\t\t\t\t<div><a href="javascript:void(0);">问题反馈</a></div>\n\t\t\t\t\t\t<div><a href="javascript:void(0);">关于积分</a></div>\n\t\t\t\t\t\t<div><a href="javascript:void(0);">论坛帮助</a></div>\n\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t</li>--><li ng-class="{hover:isActive == \'scene\'}"><a href="#/scene">创建场景</a></li><li><a target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=319871217&site=qq&menu=yes">付费升级</a></li><li><a target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=319870408&site=qq&menu=yes">内容举报</a></li><li><a  href="/index.php?c=user&a=logout">退出登录</a></li><li><a target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=319870408&site=qq&menu=yes"><img border="0" src="http://wpa.qq.com/pa?p=2:319870408:51" alt="联系客服" /></a></li>\t\t\t\t\n\t\t\t</ul>\n\t\t\n\t\t\t<login-toolbar></login-toolbar>\n\t\t</div>\n\t    \n\t</div>\n</div>\t\n')}]),n.module("help.tpl.html",[]).run(["$templateCache",function(e){e.put("help.tpl.html",'<div ng-include="\'header.tpl.html\'"></div>\n<div id = "usercenter" class="min_contain">\n  <div class = "main clearfix">\n    <div class="help_content">\n        <h1>快速获得积分</h1>\n        <p>1.场景展示得积分</p>\n        <table>\n            <tr><th class="col-sm-3">账号属性</th><th class="col-sm-3">获取积分条件</th><th class="col-sm-8">积分计算</th></tr>\n            <tr><td>普通账号</td><td>分享尾页展示</td><td>5000展示=100积分</td></tr>\n            <tr><td>高级账号</td><td>末页底标展示</td><td>10000展示=100积分</td></tr>\n            <tr><td>服务账号</td><td>末页底标展示</td><td>10000展示=100积分</td></tr>\n            <!-- <tr><td>企业账号</td><td>末页底标</td><td>5000展示=100积分</td></tr> -->\n        </table>\n        <p>2.推荐会员得积分</p>\n        <table>\n            <tr><td class="col-sm-3">推荐会员</td><td class="col-sm-3">注册会员</td><td class="col-sm-8">推荐一个会员，可以获得20个积分</td></tr>\n        </table>\n        <h1 style="margin:20px 0;">积分使用</h1>\n        <table>\n            <tr><th class="col-sm-3">账号属性</th><th class="col-sm-3">使用内容</th><th class="col-sm-8">所需积分</th></tr>\n            <tr><td>普通账号</td><td>去除分享尾页</td><td>100个</td></tr>\n            <tr><td>高级账号</td><td>去除末页底标</td><td>100个</td></tr>\n            <tr><td>服务账号</td><td>去除末页底标/修改载入logo</td><td>100个/500个</td></tr>\n        </table>\n    </div>\n  </div>\n</div>\n<div ng-include="\'footer.tpl.html\'"></div>')}]),n.module("home/home.tpl.html",[]).run(["$templateCache",function(e){e.put("home/home.tpl.html","<div ng-include=\"'footer.tpl.html'\"></div>")}]),n.module("main/customer.tpl.html",[]).run(["$templateCache",function(e){e.put("main/customer.tpl.html",'<div ng-include="\'header.tpl.html\'"></div>\n<div id="main" class="min_contain">\n    <div class="main clearfix">\n        <ul class="create_btn_group">\n            <li class="btn-main" ng-show="isEditor" page-tpl-types ng-href="#/scene/create/2442?pageId=1">页面模板</li>            \n            <!-- <li><a class="btn-main hint--bottom hint--rounded" ng-click="createScene()" data-hint = "通过组件工具和页面模板创建">自主创建</a></li>\n            <li><a class="btn-secondary hint--rounded hint--bottom" href="#/scene" data-hint = "在推荐的样例场景上直接修改">样例创建</a></li> -->\n<!--             <li><a class="btn-main hint--bottom hint--rounded" href="#/scene" data-hint = "空白创建或通过已有样例创建场景">创建场景</a></li> -->\n        </ul>   \n\n        <div class="info">\n            <ul class="clearfix">\n                <li>\n                    <!-- <span class="glyphicon glyphicon-user secondaryColor"></span> -->\n                    <div class="shou">\n                        <h1 class="">{{allDataCount || 0 | fixnum}}</h1>\n                        <h2>已收集客户</h2>\n                    </div>\n                </li>\n                <li>\n                    <!-- <span class="glyphicon glyphicon-import lightVioletColor"></span> -->\n                    <div class="wei">\n                        <h1 class="lightVioletColor">{{prospectDataAccount || 0 | fixnum}}</h1>\n                        <h2>未导入数据</h2>\n                    </div>\n                </li>\n            </ul>\n        </div> \n\n        <tabset justified="true">     \n                <!-- <div ng-show="editData" ng-include="\'data/editData.tpl.html\'"></div> -->\n                <div class="data" ng-hide="editData">\n                    <div class="data_bar">\n                        <!-- <select ng-show="myScenes" class="scene_dropdown fl" ng-change="selectScene(selectedScene.id)" ng-model="selectedScene" ng-options="scene.name for scene in myScenes">\n                            <option value="" selected="selected">全部来源</option>\n                        </select> -->\n<!--                         \n                        <a style="display:none" class="btn btn-main fr hint--bottom hint--rounded daoru" ng-click="openDataAssociateModal()" tooltip-placement="bottom" tooltip="将数据导入到我的客户中"><span>导入数据</span></a>\n                        <h6 class="fr" style="margin: 18px 20px 0;">小提示：可将场景收集的数据导入到我的客户中</h6> -->\n                        <ul class="tab_head mt20" ng-init="tabcustom = \'custom\'">\n                            <li ng-class="{hover: tabcustom == \'custom\'}" ng-click="tabcustom =\'custom\'">客户信息</li><li style="display:none;" ng-class="{hover: tabcustom == \'daoru\'}" ng-click="tabcustom = \'daoru\'">导入数据</li>\n                        </ul>\n                    </div>\n                    <div class="custom_contain">\n                        <div ng-show="tabcustom == \'custom\'">\n                            <div  class="new_daochu clearfix">\n                                <div class="fr" ng-show="false"><a class="btn btn-secondary hint--bottom hint--rounded daochu" style="margin-left:1px;" ng-href="{{PREFIX_URL + \'m/c/exp\'}}" tooltip-placement="bottom" tooltip="将数据导出为excel文件" tooltip-append-to-body="true"><span>导出Excel</span></a></div>\n                                <!-- <div class="newcustom" ng-click="addCustom()"><span>+</span>新增客户</div> -->\n                            </div> \n                            <div ng-show="customerDatas">                  \n                                <table class = "col-sm-12 table table-bordered text-center data-table" >\n                                    <thead>\n                                        <tr>\n                                            <th>姓名</th>\n                                            <th>手机</th>\n                                            <th>客户群组</th>\n                                            <th>客户来源</th>\n                                            <th>管理</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        <tr ng-class="{hovercolor: trIndex==$index}" ng-repeat="customerData in customerDatas" ng-mouseenter="addColor($index)" ng-mouseleave="removeColor()">\n                                            <td>{{customerData.name}}</td>\n                                            <td>{{customerData.mobile}}</td>\n                                            <td>{{customerData.groupName}}</td>\n                                            <td>{{customerData.originName}}</td>\n                                            <!-- ng-click="editCustomer(customerData)" -->\n                                            <td><a style = "" class="glyphicon glyphicon-cog" ng-click="editCustom(customerData, $index)"></a><a style="margin-left: 30px;" class="glyphicon glyphicon-trash" ng-click="removeCustomer(customerData)"></a></td>\n                                        </tr>\n                                    </tbody>\n                                </table>\n                                <pagination style="float: left" first-text="首页" last-text="尾页" previous-text="上一页" next-text="下一页" max-size="10" items-per-page="10" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination>\n                                <div class="current_page">\n                                    <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null">\n                                    <a ng-click="pageChanged(toPage)" class="go">GO</a>\n                                    <span>当前: {{currentPage}} / {{numPages}} 页</span>\n                                </div>\n                            </div>\n                        </div>\n                        <div ng-show="tabcustom == \'daoru\'">\n                            <div class="new_daochu wai_daoru clearfix">\n                                <!-- <div class="newcustom fr" ng-click="addCustom()"><span>+</span>新增客户</div>  -->                               \n                                <div class="custom_data">可导入数据：<span>{{prospectDataAccount || 0 | fixnum}}</span><!-- <span>上传外部表格</span> --></div>\n\n                            </div>\n                            <div class="daoru_contain clearfix" style="text-align:center;" ng-show="importDatas">\n                                <div class="select_cj fl" style="text-align:left;">\n                                    <h2>1.选择新数据场景</h2>\n                                    <ul style="height:489px;">\n                                        <li ng-repeat="importData in importDatas" ng-click="selectScene(importData.ID,$index)" ng-class="{active: select == $index}"><span>{{importData.TITLE}}</span></li>\n                                    </ul>\n                                </div>\n                                <div class="tuo_data ml20 mr20 fl">\n                                    <h2>2.拖拽导入的数据</h2>\n                                    <ul class="item_remove_droppable" style="height:489px;overflow-y:auto;width:210px;" item-remove-droppable>\n                                        <li item-draggable item-id="{{field.id}}" class="list_darggable" ng-repeat="field in fields"><span>{{field.title}}</span></li>\n                                    </ul>                                    \n                                </div>\n                                <div class="nametoname fl">\n                                    <h2>3.拖入对应名称</h2>\n                                    <div class="clearfix tuozhuai" style="height:489px;">\n                                        <div >\n                                            <ul>\n                                                <li style="border-bottom:none;" class="clearfix" ng-repeat="staticFiled in staticFileds">\n                                                    <div class="list_attribute fl" item-droppable item-id="{{staticFiled.id}}">拖拽到此处</div>\n                                                    <div class="list_field fr">{{staticFiled.name}}</div>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="action" style="text-align:right" ng-show="importDatas">\n                                <span style="padding-right:60px;">拖拽名称标签放到右侧对应名称中</span>\n                                <span style="padding-right:182px;">导入后原场景数据不会删除</span>\n                                <a type="button" class="btn btn-main" ng-click="confirm()">导入</a>\n                            </div>\n                        </div>\n                    </div>\n                </div>      \n        </tabset>\n    </div>\n</div>\n<div ng-include="\'footer.tpl.html\'"></div>')}]),n.module("main/main.tpl.html",[]).run(["$templateCache",function(e){e.put("main/main.tpl.html",'<div ng-include="\'header.tpl.html\'"></div>\n<div id="main" class="min_contain">\n    <div class="main clearfix">\n        <ul class="create_btn_group">\n            <li class="btn-main" ng-show="isEditor" page-tpl-types ng-href="#/scene/create/2442?pageId=1">页面模板</li>            \n        </ul>\n\n        <div class="info"><!-- \n            <h3>我的场景</h3> -->\n            <ul ng-show = "showScene" ng-init="showScene=true;showCustomer=false" class="clearfix">\n                <li style = "float:right;">\n                    <a href="#/scene" alt="创建场景" title="创建场景"><div class="chuangjian"><img ng-src="{{CLIENT_CDN}}images/chuangjian.png" /></div></a>\n                </li>                 \n                <li>\n                    <div class="phone">\n                        <h1 class="baseColor">{{allPageCount || 0 | fixnum}}</h1>\n                        <h2>场景总计</h2>\n                    </div>\n                </li>\n                <li><a href="#/main/spread">\n                    <div class="eye">\n                        <h1 class="secondaryColor"><span>{{allPageView || 0 | fixnum}}</span></h1>\n                        <h2>场景展示</h2>\n                    </div></a>\n                </li>\n                <li>\n                    <div class="show">\n                        <h1 class="secondaryColor"><span>{{allSceneDataCount || 0 | fixnum}}</span></h1>\n                        <h2>收集数据</h2>\n                    </div>\n                </li>               \n            </ul>\n        </div>        \n\n        <tabset justified="true">\n                <div class="content clearfix">\n                    <div class="scene_type">\n                        <select ng-model="scene.type" ng-change="getMyScenes()" ng-options="scenetype.name for scenetype in scene.types">\n                            <option value="">全部</option>\n                        </select>\n                    </div>\n                    <div ng-hide="myScenes">\n                        该分类下还没有创建场景，请\n                        <a href="#/scene">创建场景</a>\n                    </div>\n                    <div class="mask fl" ng-show="myScenes">\n                        <ul class="scene_list">\n                            <li ng-repeat="scene in myScenes track by $index" ng-class="{mr0: $index%4 == 3}">\n                                <div ng-click="showDetail(scene.id)" class="scene_contain" ng-mouseover="scene.showCode = true" ng-mouseleave="scene.showCode = false">\n                                    <a class="f1_container">\n                                        <div class="f1_card" style=" width: 100%; height: 235px;position:relative;" >\n                                            <!-- todo: 给发布过但未更新的场景加标志-->\n                                            <div style="position: absolute;width: 0;height: 0;border-top: 36px solid #000;border-left: 36px solid transparent;top:0px;right:0px;opacity:0.6;" ng-if="!scene.publishTime || (scene.updateTime > scene.publishTime && scene.status != -1)" ng-click="publishScene(scene, $event);" title="点击发布场景">\n                                                <span style="position:relative;top:-40px;right:25px;color:#fff;" class="fa fa-refresh"></span>\n                                            </div>\n                                            <div ng-if="!scene.showCode" class="front face" ng-style="getStyle(scene.image.imgSrc)">\n                                                <div class="check-state rejected" ng-if="scene.status == -1" style="">\n                                                    <em class="fa fa-ban"></em>未通过审核\n                                                </div>\n                                                <div class="check-state checking" ng-if="scene.status == -2" style="">\n                                                    <em class="fa fa-clock-o"></em>场景审核中\n                                                </div>\n                                            </div>\n                                            <div ng-if="scene.showCode" class="face front  qrcode" qr-code qr-url="{{PREFIX_CLIENT_HOST + \'v-\' + scene.code}}">\n                                            </div>\n                                        </div>\n                                    </a>\n                                </div>\n                                <div class="scene_desc" title="{{scene.name}}">\n                                    <span class="item_title">{{scene.name}}</span>\n                                    \n                                    <div class="btn-group">\n                                          <div title="管理场景" class="glyphicon glyphicon-cog dropdown-toggle" data-toggle="dropdown">\n                                          </div>\n                                          <ul class="dropdown-menu" role="menu">\n                                            <li ng-click="sceneSettings(scene.id)"><span class="glyphicon glyphicon-phone baseColor"></span><span>设置</span></li>\n                                            <li ng-click="editScene(scene.id)"><span class="glyphicon glyphicon-edit baseColor"></span><span>编辑</span></li>\n                                            <li ng-if="(!scene.publishTime || scene.updateTime > scene.publishTime && scene.status != -1) && scene.status != -1" ng-click="publishScene(scene)"><span class="fa fa-paper-plane baseColor"></span><span>发布</span></li>\n                                            <li ng-if="scene.status != -1 && scene.status != -2" ng-click="copyScene(scene.id)"><span class="fa fa-copy baseColor"></span><span>复制</span></li>\n                                            <li ng-click="deleteScene(scene.id)"><span class="glyphicon glyphicon-trash baseColor"></span><span>删除</span></li>\n                                          </ul>\n                                    </div>        \n                                </div>\n                                <div class="bottom_info">\n                                    <div style = "position:relative; top:32px; float: right; margin-right: 15px; cursor: pointer;">\n                                        <div ng-if="!scene.publishTime">\n                                            未发布\n                                            <span style="color: #ff0000; display:inline;">!</span>\n                                        </div>\n                                        <img title="点击关闭场景" ng-src="{{CLIENT_CDN}}images/opened.png" ng-if = "scene.status == 1 && scene.publishTime" ng-click = "openScene(scene, false)"/>\n                                        <img title="点击开放场景" ng-src="{{CLIENT_CDN}}images/closed.png"ng-click = "openScene(scene, true)" ng-if = "scene.status == 2 && scene.publishTime"/>\n                                    </div>\n                                    <span>场景展示：<em class="baseColor"><a ng-href="#/main/spread/{{scene.id}}">{{scene.showCount | fixnum}}</a></em><em class="grey">&nbsp;次</em></span>\n                                    <span>收集数据：<em class="baseColor"><a ng-href="#/my/scene/{{scene.id}}">{{scene.dataCount | fixnum}}</a></em><em class="grey">&nbsp;条</em></span>\n                                </div>\n                                \n                            </li>\n                        </ul>\n\n                    </div>\n                    <div class="clearfix fl" ng-show="myScenes">\n                        <pagination style="float: left" first-text="首页" last-text="尾页" previous-text="上一页" next-text="下一页" max-size="10" items-per-page="pageSize" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination>\n                        <div class="current_page">\n                            <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null">\n                            <a ng-click="pageChanged(toPage)" class="go">GO</a>\n                            <span>当前: {{currentPage}} / {{numPages}} 页</span>\n                        </div>\n                    </div>\n                </div>\n        </tabset>\n    </div>\n</div>\n<div ng-include="\'footer.tpl.html\'"></div>\n<div ng-include="\'main/userGuide.tpl.html\'"></div>')}]),n.module("main/spread.tpl.html",[]).run(["$templateCache",function(e){e.put("main/spread.tpl.html",'<div ng-include="\'header.tpl.html\'"></div>\n<div id="main" class="min_contain">\n    <div class="main clearfix">\n        <ul class="create_btn_group">\n            <li class="btn-main" ng-show="isEditor" page-tpl-types ng-href="#/scene/create/2442?pageId=1">页面模板</li>            \n            <!-- <li><a class="btn-main hint--bottom hint--rounded" ng-click="createScene()" data-hint = "通过组件工具和页面模板创建">自主创建</a></li>\n            <li><a class="btn-secondary hint--rounded hint--bottom" href="#/scene" data-hint = "在推荐的样例场景上直接修改">样例创建</a></li> -->\n<!--             <li><a class="btn-main hint--bottom hint--rounded" href="#/scene" data-hint = "空白创建或通过已有样例创建场景">创建场景</a></li> -->\n        </ul>   \n\n        <div class="info">\n            <ul class="clearfix">\n                <li><a href="#/main">\n                    <!-- <span class="glyphicon glyphicon-folder-close secondaryColor"></span> -->\n                    <div class="phone">\n                        <h1 class="secondaryColor"><span>{{allPageCount || 0 | fixnum}}</span></h1>\n                        <h2>场景总计</h2>\n                    </div>\n                    </a>\n                </li>\n                <li><a href="#/main">\n                    <!-- <span class="glyphicon glyphicon-folder-open lightVioletColor"></span> -->\n                    <div class="kai">\n                        <h1 class="lightVioletColor"><span>{{openCount || 0 | fixnum}}</span></h1>\n                        <h2>开放场景</h2>\n                    </div></a>\n                </li>\n                <li>\n                    <!-- <span class="glyphicon glyphicon-eye-open baseColor"></span> -->\n                    <div class="eye">\n                        <h1 class="lightBlueColor"><span>{{allPageView || 0 | fixnum}}</span></h1>\n                        <h2>场景展示</h2>\n                    </div>\n                </li>\n                <li>\n                    <!-- <span class="glyphicon glyphicon-list-alt secondaryColor"></span> -->\n                    <div class="show">\n                        <h1 class="secondaryColor"><span>{{allSceneDataCount || 0 | fixnum}}</span></h1>\n                        <h2>已收集数据</h2>\n                    </div>\n                </li>\n            </ul>\n        </div> \n\n        <tabset justified="true">\n            <div class="content clearfix">\n                <div class="panel panel-default">\n                  <div class="panel-body">\n                    <div class="col-xs-4 text-center">\n                        <div class="circle-data" style="color: #08a1ef;"><span num-change-anim content="{{allPageView}}"><span></span></span></div>\n                        <div class="h5">场景展示</div>\n                    </div>\n                    <div class="col-xs-4 text-center">\n                        <div class="circle-data" style="color: #9ad64b;"><span num-change-anim content="{{allSceneDataCount}}"><span></span></span></div>\n                        <div class="h5">收集数据</div>\n                    </div>\n                    <div class="col-xs-4 text-center">\n                        <div class="circle-data" style="color: #68dcc7;"><span num-change-anim content="{{dataRatio}}"><span></span>%</span></div>\n                        <div class="h5">转换率</div>\n                    </div>\n                  </div>\n                </div>\n                \n                <div class="data">\n                    <!-- <div external-scopes="spreadScope" ui-grid="spreadGridOptions" class="myGrid"></div> -->\n                    <table class = "col-sm-12 table table-bordered text-center data-table" >\n                        <thead>\n                            <tr>\n                                <th>场景</th>\n                                <th>展示次数</th>\n                                <th>收集数据</th>\n                                <th>转化率</th>\n                                <th>详情</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr ng-class="{hovercolor: trIndex==$index}" ng-repeat="spreadData in spreadDatas" ng-mouseenter="addColor($index)" ng-mouseleave="removeColor()">\n                                <td>{{spreadData.name}}</td>\n                                <td>{{spreadData.showCount}}</td>\n                                <td>{{spreadData.dataCount}}</td>\n                                <td>{{spreadData.showCount == 0 ? "0.00%":(spreadData.dataCount * 100/spreadData.showCount).toFixed(2) + "%"}}</td>\n                                <td><a class="glyphicon glyphicon-stats spread-detail" title="查看详情" ng-click="viewDetail(spreadData)"></a></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                    <pagination style="float: left" first-text="首页" last-text="尾页" previous-text="上一页" next-text="下一页" max-size="10" items-per-page="10" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination>\n                    <div class="current_page">\n                        <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null">\n                        <a ng-click="pageChanged(toPage)" class="go">GO</a>\n                        <span>当前: {{currentPage}} / {{numPages}} 页</span>\n                    </div>\n                    \n                </div>  \n            </div>\n        </tabset>\n    </div>\n</div>\n<div ng-include="\'footer.tpl.html\'"></div>\n\n\n\n\n\n\n\n')}]),n.module("main/spreadDetail.tpl.html",[]).run(["$templateCache",function(e){e.put("main/spreadDetail.tpl.html",'<div ng-include="\'header.tpl.html\'"></div>\n<div id="main" class="min_contain">\n    <div id="spread" class="main clearfix">\n        <div class="spread_content">\n            <div class="panel panel-default" style="margin-top:0;">\n<!--               <div class="panel-heading" style="background-color:#FFF;"><span class="title">{{scene.name}}</span>&nbsp;&nbsp;<a style="padding-left:30px;font-size:16px;" target="_blank" ng-href="{{VIEW_URL + \'v-\' + scene.code}}">查看场景</a></div> -->\n              <div class="panel-body spread_ge">\n                <div class="fl">\n                    <img height="110px" ng-src="{{PREFIX_FILE_HOST + scene.image.imgSrc}}"/>\n                    <div class="scene_info" style="padding-left:10px;">\n                        <div class="" style="border-bottom:1px solid #e6e6e6"><a style="font-size:18px;color:#666;" target="_blank" ng-href="{{VIEW_URL + \'v-\' + scene.code}}">{{scene.name}}</a></div>\n                        <div>场景状态：<span ng-show="scene.status == \'1\'" style="color:#08a1ef">开放</span><span ng-show="scene.status == \'0\'">关闭</span></div>\n                        <div>修改时间：{{scene.updateTime | date:\'yyyy年MM月dd日\'}}</div>\n                        <div>创建时间：{{scene.createTime | date:\'yyyy年MM月dd日\'}}</div>\n                    </div>\n                    \n                </div>\n                <ul class="fr">\n                    <li><a href="#/main">\n                        <!-- <span class="glyphicon glyphicon-folder-close secondaryColor"></span> -->\n                        <div class="phone">\n                            <h1 class="secondaryColor"><span>{{scene.showCount || 0 | fixnum}}</span></h1>\n                            <h2>场景展示</h2>\n                        </div>\n                        </a>\n                    </li>  \n                    <li><a href="#/main/customer">\n                        <!-- <span class="glyphicon glyphicon-list-alt secondaryColor"></span> -->\n                        <div class="show">\n                            <h1 class="secondaryColor"><span>{{scene.dataCount || 0 | fixnum}}</span></h1>\n                            <h2>已收集数据</h2>\n                        </div></a>\n                    </li>                  \n                </ul>\n              </div>\n            </div>\n            <div class="chang_contain">\n                <div class="tab_two clearfix" ng-init="tabclass=\'tongji\'">\n                    <div ng-show="false" ng-class="{hover: tabclass == \'tongji\'}" ng-click="tabclass=\'tongji\'">场景统计</div>\n                    <div ng-class="{hover: tabclass == \'tuiguang\'}" ng-show="tabclass= \'tuiguang\'">推广方法</div>\n                </div>\n                <div class="tab_contain">\n                    <div ng-show="false" class="changjing_tongji clearfix" ng-show="tabclass == \'tongji\'">\n                        <div class="col-sm-2 fl">\n                            <div class="col-sm-12" style="padding: 0;">\n                              <ul class="nav nav-tabs tabs-left" ng-init="tabid=\'viewinfo\'">\n                                <li ng-class="{active: tabid == \'viewinfo\'}"><a ng-click="tabid=\'viewinfo\'">访问概况</a></li>\n                                <li ng-class="{active: tabid == \'mobileinfo\'}"><a ng-click="tabid=\'mobileinfo\'">移动访问</a></li>\n                                <li ng-class="{active: tabid == \'viewclick\'}"><a ng-click="tabid=\'viewclick\'">内容统计</a></li>\n                              </ul>\n                            </div>\n                        </div>\n                        <div class="col-xs-10 fr">\n                            <div class="view_info panel panel-default">\n                                <div class="panel-body" ng-init="interval=7">                                \n                                    <span class="btn btn-main" ng-class="{active: interval==1 }" ng-click="getLastdayStats();interval=1">昨天</span>\n                                    <span class="btn btn-main" ng-class="{active: interval==7 }" ng-click="getLast7dayStats();interval=7">7天</span>\n                                    <span class="btn btn-main" ng-class="{active: interval==30 }" ng-click="getLast30dayStats();interval=30">30天</span>\n                                </div>\n                            </div>\n                            <div class="view_info panel panel-default" ng-show="tabid == \'viewinfo\'">\n                                <div class="panel-body">\n                                    <div ng-show="spreadViewGridOptions.data && spreadViewGridOptions.data.length > 0">\n                                        <div class="title">展示次数</div>\n                                        <canvas ng-if="viewLineChartData" line-chart data="{{viewLineChartData}}" width="750" height="200"/>\n                                        <div class="title" style="margin-top:20px;">收集数据</div>\n                                        <canvas ng-if="dataLineChartData" line-chart data="{{dataLineChartData}}" width="750"  height="200"/>\n                                        <div class="data">\n                                            <div ui-grid="spreadViewGridOptions" class="myGrid1"></div>\n                                        </div>\n                                    </div>\n\n                                    <div class="data" ng-show="!spreadViewGridOptions.data || spreadViewGridOptions.data.length <= 0">\n                                        暂无数据\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="view_info panel panel-default" ng-if="tabid == \'mobileinfo\'">\n                                <div class="panel-body">\n                                    <div ng-show="spreadMobileGridOptions.data">\n                                        <div class="col-xs-4 text-center">\n                                            <div class="circle-data" style="color: #08a1ef;">\n                                                <span num-change-anim content="{{timelineData}}"><span>\n                                            </div>\n                                        </div>                                \n                                        <div class="col-xs-4 text-center">\n                                            <div class="circle-data" style="color: #68dcc7;">\n                                                <span num-change-anim content="{{weixinGroupData}}"><span>\n                                            </div>\n                                        </div>\n                                        <div class="col-xs-4 text-center">\n                                            <div class="circle-data" style="color: #9ad64b;">\n                                                <span num-change-anim content="{{weixinData}}"><span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="data" ng-show="spreadMobileGridOptions.data">\n                                        <div ui-grid="spreadMobileGridOptions" class="myGrid1"></div>\n                                    </div>\n\n                                    <div class="data" ng-show="!spreadMobileGridOptions.data || spreadMobileGridOptions.data.length <= 0">\n                                        暂无数据\n                                    </div>\n                                </div>\n                            </div>\n                              \n                            <div class="view_info panel panel-default" ng-show="tabid == \'viewclick\'">\n                                <div class="panel-body">\n                                    <div class="data" ng-show="spreadClickGridOptions.data">\n                                        <div ui-grid="spreadClickGridOptions" class="myGrid1"></div>\n                                    </div>\n                                    <div class="data" ng-show="!spreadClickGridOptions.data || spreadClickGridOptions.data.length <= 0">\n                                        暂无数据\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="tuiguang_content" ng-show="tabclass == \'tuiguang\'">\n                        <div class="weixin_title ">\n                            <ul class="clearfix">\n                                <li class="hover">微信推广</li>\n                            </ul>\n                        </div>\n                        <div class="tuiguang_one tuiguang_same">\n                            <h1><span>1. 微信扫描分享到朋友圈</span></h1>\n                            <div class="weixin_friend" style="margin-bottom:40px">\n                                <ul class="clearfix">\n                                    <li><div qr-code qr-url="{{PREFIX_CLIENT_HOST + \'v-\' + scene.code}}"></div></li>\n                                    <li><img ng-src="{{CLIENT_CDN}}images/weixin_05.png" alt="" /></li>\n                                    <li><img ng-src="{{CLIENT_CDN}}images/weixin_07.png" alt="" /></li>                                                                        \n                                </ul>\n                            </div>\n                            <div class="weixin_step">\n                                <ul class="clearfix">\n                                    <li><img ng-src="{{CLIENT_CDN}}images/weixin_13.png" alt="" /></li>\n                                    <li><img ng-src="{{CLIENT_CDN}}images/weixin_15.png" alt="" /></li>\n                                    <li><img ng-src="{{CLIENT_CDN}}images/weixin_16.png" alt="" /></li>                                                                        \n                                </ul>\n                            </div>                            \n                        </div>\n                        <div class="tuiguang_two tuiguang_same">\n                            <h1><span>2.通过微信公众号群发</span></h1>\n                            <div class="weixin_list">\n                                <p class="medth">方法一</p>\n                                <div class="weixin_list_con">\n                                    <p>群发消息，在微信公众账号群发消息时推广场景地址</p>\n                                    <div class="weixin_address clearfix">\n                                        <span class="" title="">{{url}}</span>\n                                        <a target="_blank" class="" ng-href="{{VIEW_URL + \'v-\' + scene.code}}">点击预览</a>\n                                    </div>\n                                    <div class="con_show clearfix">\n                                        <div style="color:#333;margin-top:20px;font-size:14px;font-weight:300;"><p style="float:left;">主动发送消息：请将这段“</p><xmp style="color:#333;font-weight:300;font-family:\'Microsoft Yahei\';margin:0px;padding:0px 0 0 0;float:left;"><a href="{{url}}">{{scene.name}}</a></xmp><p style="line-height:20px;">”修改和粘贴到群发消息中，点击下面群发</p></div>\n                                    </div>\n                                    <p style="margin-top:20px;">自动回复消息：在自动回复时设置回复内容为场景地址和场景名称。</p>\n                                </div>\n                            </div>\n                            <div class="weixin_list">\n                                <p class="medth">方法二</p>\n                                <div class="weixin_list_con">\n                                    <p>群发消息，在微信公众账号群发消息时推广场景二维码</p>\n                                    <div class="weixin_erwei weixin_address clearfix">\n                                        <span>\n                                            <div qr-code qr-url="{{PREFIX_CLIENT_HOST + \'v-\' + scene.code}}"></div></span><a ng-href="{{PREFIX_SERVER_HOST + \'eqs/qrcode/\' + scene.code + \'.png\'}}" target="_blank" download>下载二维码</a>\n                                    </div>\n                                </div>\n                            </div>                                                        \n                        </div>\n                        <div class="tuiguang_one tuiguang_same">\n                            <h1><span>3.公众号自定义菜单链接场景</span></h1>\n                            <div class="weixin_friend" style="margin-bottom:40px">\n                                <ul class="clearfix">\n                                    <li><img ng-src="{{CLIENT_CDN}}images/weixin_21.png" alt="" /></li>\n                                    <li><img ng-src="{{CLIENT_CDN}}images/weixin_24.png" alt="" /></li>\n                                    <li><img ng-src="{{CLIENT_CDN}}images/weixin_26.png" alt="" /></li>                                                                        \n                                </ul>\n                            </div>\n                            <div class="weixin_step">\n                                <ul class="clearfix">\n                                    <li><img ng-src="{{CLIENT_CDN}}images/weixin_32.png" alt="" /></li>\n                                    <li><img ng-src="{{CLIENT_CDN}}images/weixin_33.png" alt="" /></li>\n                                    <li><img ng-src="{{CLIENT_CDN}}images/weixin_34.png" alt="" /></li>                                                                        \n                                </ul>\n                            </div>                            \n                        </div>                        \n                    </div>\n                </div> \n            </div>                 \n        </div>\n            \n    </div>\n</div>\n<div ng-include="\'footer.tpl.html\'"></div>');
}]),n.module("main/userGuide.tpl.html",[]).run(["$templateCache",function(e){}]),n.module("my/myscene.tpl.html",[]).run(["$templateCache",function(e){e.put("my/myscene.tpl.html",'<div ng-include="\'header.tpl.html\'"></div>\n<div class="myscene">\n    <div class="main clearfix">\n        <div class="content">\n            <div class="fl">\n                <iframe style="border: 0; width: 322px; height: 641px;" ng-src="{{customUrl}}"></iframe>\n            </div>  \n            <div class="rcont" data-ng-init = "init()">\n                <div class="top" style="background-color:#FFF">\n                    <div class="title">\n                        <!--添加外部div class="scen_top_title"-->\n                        <div class="scen_top_title">\n                            <h1 title="{{scene.sceneName}}">{{scene.name}}</h1>\n                            <!-- <a title="编辑场景" href="#/scene/create/{{sceneId}}?pageId=1" class="glyphicon glyphicon-edit" tooltip = "编辑场景" tooltip-placement = "right" tooltip-append-to-body = "true" ></a> -->\n                        </div>\n                        <a class="btn-main" tooltip = "发布场景" tooltip-placement = "right" tooltip-append-to-body = "true" ng-click="publishScene(sceneId)">发布场景</a>\n                        <a class="btn-main" ng-href = "#/my/sceneSetting/{{sceneId}}" tooltip = "修改场景设置" tooltip-placement = "right" tooltip-append-to-body = "true" >场景设置</a>\n                        <a class="btn-main" ng-click = "closeScene(sceneId)" tooltip = "关闭场景" tooltip-placement = "right" tooltip-append-to-body = "true" ng-if = "showCloseSceneBtn">关闭场景</a>\n                        <a class="btn-main" ng-click = "openScene(sceneId)" tooltip = "开放场景" tooltip-placement = "right" tooltip-append-to-body = "true" ng-if = "showOpenSceneBtn">开放场景</a>\n                    </div>                  \n                    <div class="info">\n                        <div style="margin-right: 20px;">\n                            <a href="#/main/spread">\n                            <!-- <span class="glyphicon glyphicon-eye-open secondaryColor"></span> -->\n                            <div class="eye">\n                                <h1><span>{{scene.showCount >= 0 ? scene.showCount : 0 | fixnum}}</span></h1>\n                                <h2>场景展示</h2>\n                            </div></a>\n                        </div>                           \n                        <div>\n                            <a ng-click = "goData()">\n                            <!-- <span class="glyphicon glyphicon-list-alt baseColor"></span> -->\n                            <div class="show">\n                                <h1 class="baseColor"><span>{{totalItems | fixnum}}</span></h1>\n                                <h2>收集数据</h2>\n                            </div></a>\n                        </div>                                          \n                    </div>\n                </div>\n\n                <div class="bom" style="background-color:#FFF;">\n                    <div class="title">\n                        <span class="title_text">快速推广场景</span>\n                    </div>\n                    <div class="share_content">\n                        <ul>\n                            <li style="width: 250px;margin-right: 40px;">\n                                <div class="share_header" style="margin-bottom: 0;">\n                                    <span class="num">1</span>\n                                    <span class="share_title" style="width: 210px;">微信分享</span>\n                                </div>\n                                <div style="margin:17px 0 15px 40px" class="wc_code qr-code" qr-code qr-url="{{url}}"><!-- <img ng-src="{{code}}" width="240" alt=""> --></div>\n                                <p style="margin-left:40px;" style="color: #999;">现在扫一扫马上分享给朋友圈！</p>\n                            </li>\n\n                            <li style="margin-bottom: 50px;">\n                                <div class="share_header">\n                                    <span class="num">2</span>\n                                    <span class="share_title" style="width: 289px;">社交网络分享</span>\n                                </div>\n                                <div class="bdsharebuttonbox" data-tag="share_1">\n                                    <a class="bds_tsina" data-cmd="tsina"></a>\n                                    <a class="bds_tqq" data-cmd="tqq"></a>\n                                    <a class="bds_qzone" data-cmd="qzone" href="#"></a>\n                                    <a class="bds_sqq" data-cmd="sqq" href="#"></a>\n                                    <a class="bds_douban" data-cmd="douban" href="#"></a>\n                                    <a class="bds_count" data-cmd="count"></a>\n                                </div>\n                            </li>\n\n                            <li>\n                                <div class="share_header">\n                                    <span class="num">3</span>\n                                    <span class="share_title" style="width: 289px;">场景网址</span>\n                                </div>\n                                <p>\n                                    <span class="fl scene_url" title="{{url}}">{{url}}</span>\n                                    <a target="_blank" ng-href="{{url}}" class="tg_btn fl">点击预览</a>\n                                </p>\n                            </li>\n                        </ul>\n                    </div>\n                    <div class = "changjing_caozuo">\n                        <a href="#/scene/create/{{sceneId}}?pageId=1" class="btn-secondary" >编辑场景</a>\n                    </div>                    \n                </div>                \n            </div> \n            </div> \n            <div class="col-sm-12 export" ng-if="totalItems" id="collectData">\n                <span class="data_title">已收集数据</span>\n                <a ng-href="{{PREFIX_URL + \'m/scene/excel/\' + sceneId}}">\n                    <span ng-show="false" class="export_excel">导出excel</span>\n                </a>\n            </div>      \n            <div class="data">\n                <table class="header_table col-sm-12">\n                    <tr>\n                        <td class="data_header" ng-repeat="header in dataHeader track by $index">{{header}}</td>\n                    </tr>\n                </table>\n                <table>\n                    <tr ng-repeat="data in dataList">\n                        <td title="{{item}}" ng-repeat="item in data track by $index" ng-style="getTdStyle($index);">{{item}}</td>\n                    </tr>\n                </table>\n                <div ng-show="totalItems">\n                    <pagination style="float: left;" first-text="首页" last-text="尾页" previous-text="上一页" next-text="下一页" max-size="10" items-per-page="10" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination>\n                    <div class="current_page">\n                        <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null">\n                        <a ng-click="pageChanged(toPage)" class="go">GO</a>\n                        <span>当前: {{currentPage}} / {{numPages}} 页</span>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n</div>\n<div ng-include="\'footer.tpl.html\'"></div>\n<script type="text/javascript">\n</script>\n')}]),n.module("my/sceneSetting.tpl.html",[]).run(["$templateCache",function(e){e.put("my/sceneSetting.tpl.html",'<div ng-include="\'header.tpl.html\'"></div>\n<div class="myscene min-contain">\n\t<div class="main clearfix">\n\t    <div class="content">\n\t        <div class="fl">\n\t            <iframe style="border: 0; width: 322px; height: 641px;" ng-src="{{customUrl}}"></iframe>\n\n\t        </div> \n\t\t\t<div class="rcont">\n\t\t\t    <div class="top" style = "height: auto;">                  \n\t\t\t        <div style = " width:100%; font-size: 16px; font-weight: 200; color: #666;">\n\t\t\t            <div class="alert alert-warning text-center" role="alert" ng-show = "invalidText" style = "margin-left: 15px; margin-right: 55px;">\n\t\t\t                {{invalidText}}\n\t\t\t            </div>\n\t\t\t            <form class="form-horizontal" role="form" name = "myForm" novalidate>\n\t\t\t\t            <div class="form_img_input clearfix">\n\t\t\t\t\t\t        <div class="title">\n\t\t\t\t\t\t            <h1 title="场景基本信息设置">基本设置</h1>\n\t\t\t\t\t\t        </div>\t\t\t\t            \t\n\t\t\t\t                <div class="form-group form_upload col-sm-4">\n\t\t\t\t                    <div class = "cover-panel" style = "margin-left: 20px;">\n\t\t\t\t                        <div class = "cover-list" >\n\t\t\t\t                          <nobr>\n\t\t\t\t                            <ul>\n\t\t\t\t                                <li style = "display: inline line-height: 100px;" title="更换此场景封面"><a ng-click = "openImageModal()" style="display:block;"><img style = "width:190px; height:190px;" ng-src="{{PREFIX_FILE_HOST +  scene.image.imgSrc}}" /><em>更换场景封面</em></a></li>\n\t\t\t\t                            </ul>\n\t\t\t\t                          </nobr>\n\t\t\t\t                    \t</div>\n\t\t\t\t                    </div>\n\t\t\t\t                </div>\t\t\t\t            \t\n\t\t\t\t            \t<div class="form_input_groups col-sm-8">\n\t\t\t\t\t                <div class="form-group control-group">\n\t\t\t\t\t                    <label for="name" class="col-sm-3 control-label">场景名称</label>\n\t\t\t\t\t                    <div class="col-sm-9">\n\t\t\t\t\t                        <input name = "name" type="text" class="form-control" id="name" placeholder="场景名称" ng-model = "scene.name">\n\t\t\t\t\t                    </div>\n\t\t\t\t\t                </div>\n\t\t\t\t\t                <div class="form-group">\n\t\t\t\t\t                    <label for="type" class="col-sm-3 control-label">场景类型</label>\n\t\t\t\t\t                    <div class="col-sm-9">\n\t\t\t\t\t                        <select ng-model="scene.type" ng-options="scenetype.name for scenetype in types" id = "type" class = "form-control"></select>\n\t\t\t\t\t                    </div>\n\t\t\t\t\t                </div>\n\t\t\t\t\t                <div class="form-group">\n\t\t\t\t\t                    <label for="page_mode" class="col-sm-3 control-label">翻页方式</label>\n\t\t\t\t\t                    <div class="col-sm-9">\n\t\t\t\t\t                        <select ng-model="scene.pageMode" ng-options="pagemode.name for pagemode in pagemodes" id = "page_mode" class = "form-control"></select>\n\t\t\t\t\t                    </div>\n\t\t\t\t\t                </div>\n\t\t\t\t\t                <div class="form-group">\n\t\t\t\t\t                    <label for="description" class="col-sm-3 control-label">场景描述</label>\n\t\t\t\t\t                    <div class="col-sm-9">\n\t\t\t\t\t                        <textarea ng-model = "scene.description" class="form-control" rows="2" id = "description" name = "description" maxlength = "30" placeholder="你可以写下30字的场景描述哦！"></textarea>\n\t\t\t\t\t                    </div>\n\t\t\t\t\t                </div>\t\t\t\t\t                \n\t\t\t\t\t            </div>\n\t\t\t\t\t        </div>\n\t\t\t\t\t        <div class="gao_shezhi">\n\t\t\t\t\t\t        <h1 style="font-size:18px;padding-left:20px;line-height:50px;border-bottom:1px solid #ddd;display:none;">高级设置</h1>\n\t\t\t\t                <!--<section ng-if="!isAllowToAccessLastPageSetting && !hideAd">\n\t\t\t\t                    <div class="form-group">                                \n\t\t\t\t                        <label for="page_mode" style="margin-left:35px;padding:5px 0;" class="control-label">尾页设置</label>\n\t\t\t\t                        <div class = "cover-panel" style = "margin-left: 20px;">\n\t\t\t\t                            <div class = "cover-list col-sm-11" style="height:120px;overflow-x:auto;overflow-y:hidden; margin-left: 15px; border: 1px solid #ccc; margin-top: 10px;">\n\t\t\t\t                              <nobr>\n\t\t\t\t                                <ul>\n\t\t\t\t                                    <li style = "display: inline; line-height: 115px;" ng-repeat="pageTpl in pageTpls" img-click\n\t\t\t\t                                    ng-click = "chooseLastPage(pageTpl.id)">\n\t\t\t\t                                    <a href=""><img ng-class="{checked: scene.image.lastPageId == pageTpl.id}" style = "width: 50px; height: 78px; margin-left: 10px;" ng-src="{{PREFIX_FILE_HOST + pageTpl.properties.thumbSrc}}"/></a>\n\t\t\t\t                                    </li>\n\t\t\t\t                                </ul>\n\t\t\t\t                              </nobr>\n\t\t\t\t                        </div>\n\t\t\t\t                        </div>\n\t\t\t\t                    </div>\n\t\t\t\t                </section>\n\t-->\t\t\t                <div class="form-group" style = "margin-top: 15px;" ng-show="false">\n\t\t\t\t                  <label for="start_date" class="col-sm-2 control-label">开放时间</label>\n\t\t\t\t                  <div>\n\t\t\t\t                    <div style = "margin-left: 130px;" class="input-group col-sm-3 col-sm-offset-2">\n\t\t\t\t                    <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="startDate" is-open="openedmin" min-date="minDateStart" max-date="maxDateStart" datepicker-options="dateOptions" ng-required="true" close-text="关闭" clear-text = "清除" current-text = "今天" placeholder = "开放时间" readonly/>\n\t\t\t\t                    <span class="input-group-btn">\n\t\t\t\t                      <button type="button" class="btn btn-default" ng-click="openmin($event)" ng-disabled = "alwaysOpen"><i class="glyphicon glyphicon-calendar"></i></button>\n\t\t\t\t                    </span>\n\t\t\t\t                  </div>\n\t\t\t\t                  <div class="input-group col-sm-3 col-sm-offset-6" style = "margin-top: -35px;">\n\t\t\t\t                    <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="endDate" is-open="openedmax" min-date="minDateEnd" max-date="\'2015-06-22\'" datepicker-options="dateOptions" ng-required="true" close-text="关闭"  clear-text = "清除" current-text = "今天" placeholder = "结束时间"  readonly/>\n\t\t\t\t                    <span class="input-group-btn">\n\t\t\t\t                      <button type="button" class="btn btn-default" ng-click="openmax($event)" ng-disabled = "alwaysOpen"><i class="glyphicon glyphicon-calendar"></i></button>\n\t\t\t\t                    </span>\n\t\t\t\t                  </div>\n\t\t\t\t                  <div class="checkbox col-sm-offset-9" style = "margin-top: -35px;">\n\t\t\t\t                    <label style = "padding-left: 40px;">\n\t\t\t\t                      <input type="checkbox" ng-model = "alwaysOpen" ng-change = "switchOpen()"> 不限制\n\t\t\t\t                    </label>\n\t\t\t\t                  </div>\n\t\t\t\t                  </div>\n\t\t\t\t                </div>\n\t\t\t\t                <div ng-if = "!hideAd && scene.createTime > 1416502800000" class="form-group" style = "font-weight: 100; margin-top:10px!important;margin-bottom:10px!important">\n\t\t\t\t                    <label for="description" class="col-sm-2 control-label">广告提醒</label>\n\t\t\t\t                    <div class="col-sm-10">\n\t\t\t\t                        <label style = "padding-top: 7px;">\n\t\t\t\t                          <span ng-hide="isVendorUser || isAdvancedUser" style = "font-weight: 100;">免费用户的场景尾页会显示[一秀]的链接，付费用户则不会显示，如需要升级为付费用户，请到 <a href="http://e.wesambo.com" target = "_blank">http://e.wesambo.com</a> <a target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin319871217&site=qq&menu=yes"><img border="0" src="http://wpa.qq.com/pa?p=2:319870408:51" alt="升级为付费用户请点我" /></a><br>如果您已经是付费用户，请忽略此提示！</span>\n\t\t\t\t                          <span ng-if="isVendorUser || isAdvancedUser" ng-show="false" style = "font-weight: 100;padding-left:5px;">去掉场景中“一秀技术支持”，本次使用100个积分</span>\n\t\t\t\t                        </label>\n\t\t\t\t                    </div>\n\t\t\t\t                    <div class = "col-sm-offset-2 col-sm-10" style = "margin-top: 5px;">\n\t\t\t\t                         <div ng-show="false" style = "display: inline-block;padding-left: 24px; margin-left:0px; width: auto;">我的积分：<span>{{userXd | fixnum}}</span>个</div>\n\t\t\t\t                        <div ng-show="false" style = "display: inline-block;"></div>\n\t\t\t\t                    </div>\n\t\t\t\t                </div>\t\n\t\t\t                \n\t\t\t\t                  <div ng-show="false" class="form-group" style = "margin-top: 25px;">\n\t\t\t\t                    <label for="share" class="col-sm-2 control-label">推广设置</label>\n\t\t\t\t                    <div class="checkbox col-sm-offset-2">\n\t\t\t\t                      <label style = "margin-left: 15px; font-weight: 300;">\n\t\t\t\t                        <input id = "share"  type="checkbox" ng-true-value = "1" ng-false-value = "0" ng-model = "scene.applyPromotion"/>\n\t\t\t\t                        申请帮助推荐\n\t\t\t\t                        <span style = "margin-left: 10px; font-size: 14px;">(审核通过后，场景达到1000次展示将有机会被推荐到<a href="#/sample" target="_blank"><ins>场景案例中心</ins></a>)</span>\n\t\t\t\t                      </label>\n\t\t\t\t                    </div>\n\t\t\t\t                  </div>\n\t\t\t\t                  <div class="checkbox col-sm-offset-2" ng-if="isVendorUser" style="margin-bottom:25px;" >\n\t\t\t\t                      <label style = "margin-left: 5px;font-weight:300;">\n\t\t\t\t                        <input id = "share"  type="checkbox" value="" ng-true-value = "1" ng-false-value = "0" ng-model = "scene.applyTemplate" />\n\t\t\t\t                        申请作为样例\n\t\t\t\t                        <span style = "margin-left: 10px; font-size: 14px;">(审核通过后，每做一个样例送100个积分)</span>\n\t\t\t\t                      </label>\n\t\t\t\t                  </div>\n\n\t\t\t\t                <div class = "changjing_caozuo">\n\t\t            \t\t\t\t<a href="#/scene/create/{{sceneId}}?pageId=1" class="btn-secondary" style="margin-right:10px">编辑场景</a>\n\t\t\t\t                    <a ng-click = "saveSceneSettings(scene)" class="btn-save">保存设置</a>\n\t\t\t\t                </div>\n\t\t\t\t\t        </div>\n\t\t\t            </form>                 \n\t\t\t        </div>\n\t\t\t    </div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n<div ng-include="\'footer.tpl.html\'"></div>')}]),n.module("my/upload.tpl.html",[]).run(["$templateCache",function(e){e.put("my/upload.tpl.html",'<div nv-file-drop="" uploader="uploader">\n\n        <div class="container">\n\n            <div class="row">\n\n                <div class="col-md-3">\n                    <div ng-show="uploader.isHTML5">\n                        <!-- 3. nv-file-over uploader="link" over-class="className" -->\n                        <div ng-show="category.fileType != \'2\'" class="well my-drop-zone" nv-file-over="" uploader="uploader">\n                            拖拽图片到此区域\n                        </div>\n                        <div ng-show="category.fileType == \'2\'" class="well my-drop-zone" nv-file-over="" uploader="uploader">\n                            拖拽音乐到此区域\n                        </div>\n                    </div>\n\n                    <!-- Example: nv-file-select="" uploader="{Object}" options="{Object}" filters="{String}" -->\n                    \n                    <div id="upload_btn" class="btn-main">\n                        <span ng-show="category.fileType == \'0\' || category.fileType == \'1\'">选择图片</span>\n                        <span ng-show="category.fileType == \'2\'">选择音乐</span>\n                        <input type="file" id="uploadBtn" ng-click = "removeQueue()" nv-file-select="" uploader="uploader" multiple/>\n                    </div>\n                    <br/>\n\n                </div>\n\n                <div class="col-md-9" style="margin-bottom: 40px">\n                    <!-- <p>等待上传图片个数: {{ uploader.queue.length }}</p> -->\n                    <p ng-show="category.fileType == \'1\' && !category.headerImage && !category.coverImage">每次最多上传5张图片，上传图片建议大小在3M以内，格式为jpg\\bmp\\png\\gif</p>\n                    <p ng-show="category.fileType == \'0\'">上传图片建议像素为640px*1008px，上传图片大小在3M以内，格式为jpg\\bmp\\png\\gif</p>\n                    <p ng-show="category.fileType == \'2\'">上传音乐大小不超过3M，格式为mp3</p>\n                    <p ng-show = "category.fileType == \'1\' && (category.headerImage || category.coverImage)">上传图片建议像素为250px*250px，上传图片大小在3M以内，格式为jpg\\bmp\\png\\gif</p>\n                    <table class="table">\n                        <thead>\n                            <tr>\n                                <th width="50%">名称</th>\n                                <th ng-show="uploader.isHTML5">大小</th><!-- \n                                <th ng-show="uploader.isHTML5">进度</th>\n                                <th>操作</th> -->\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr ng-repeat="item in uploader.queue">\n                                <td>\n                                    <strong>{{ item.file.name }}</strong>\n                                    <!-- Image preview -->\n                                    <!--auto height-->\n                                    <!--<div ng-thumb="{ file: item.file, width: 100 }"></div>-->\n                                    <!--auto width-->\n                                    <div ng-show="uploader.isHTML5" ng-thumbnail="{ file: item._file, height: 100 }"></div>\n                                    <!--<div ng-thumbnail="{ file: item._file, height: 100 }"></div>\n                                    fixed width and height -->\n                                    <!--<div ng-thumb="{ file: item.file, width: 100, height: 100 }"></div>-->\n                                </td>\n                                <td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td>\n                                 <td ng-show="uploader.isHTML5">\n                                    <div class="progress" style="margin-bottom: 0;">\n                                        <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div>\n                                    </div>\n                                </td>\n                                <!--<td nowrap>\n                                    <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess">\n                                        <span class="glyphicon glyphicon-upload"></span> 上传\n                                    </button>\n                                    <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">\n                                        <span class="glyphicon glyphicon-ban-circle"></span> 取消\n                                    </button>\n                                    <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">\n                                        <span class="glyphicon glyphicon-trash"></span> 删除\n                                    </button>\n                                </td> -->\n                            </tr>\n                        </tbody>\n                    </table>\n\n                    <div>\n                        <!-- <div>\n                            上传进度:\n                            <div class="progress" style="">\n                                <div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }"></div>\n                            </div>\n                        </div> -->\n                        <button type="button" class="btn btn-secondary btn-s" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length">\n                            <span class="glyphicon glyphicon-upload"></span> 上传\n                        </button>\n                       <!--  <button type="button" class="btn btn-warning btn-s" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading">\n                            <span class="glyphicon glyphicon-ban-circle"></span> 取消\n                        </button> -->\n                        <button type="button" class="btn btn-danger btn-s" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length">\n                            <span class="glyphicon glyphicon-trash"></span> 删除\n                        </button>\n                    </div>\n\n                </div>\n\n            </div>\n\n        </div>\n\n    </div>')}]),n.module("notifications.tpl.html",[]).run(["$templateCache",function(e){e.put("notifications.tpl.html",'<div ng-class="[\'alert\', \'alert-\'+notification.type]" ng-repeat="notification in notifications.getCurrent()" notification-fadeout>\n    <button class="close" ng-click="removeNotification(notification)">x</button>\n    {{notification.message}}\n</div>\n')}]),n.module("reg/agreement.tpl.html",[]).run(["$templateCache",function(e){e.put("reg/agreement.tpl.html",'<div class="about">\n    <div class="header">\n        <div class="content">\n                    </div>\n    </div>\n    <div class="banner">\n        <img ng-src="{{CLIENT_CDN}}images/contact1.jpg"/>\n    </div>\n    <div class="main clearfix">\n    \t<div class="reg_xy_Box">\n            <h1>一秀注册协议</h1>\n            <div class="reg_xy">\n                <p>甲方：e.wesambo.com</p>\n                <p>乙方：“一秀”的注册用户（以下简称用户或“您”）</p>\n                <p class="para">您确认：在您开始“如是微营销”产品试用或购买前，您已充分阅读、理解并接受本协议的全部内容，一旦您选择“同意”并开始使用本服务或完成购买流程，即表示您同意遵循本协议之所有约定。不具备前述条件的，您应立即终止注册或停止使用本服务。</p>\n                <p class="para">甲方有权随时对协议内容进行单方面的变更，并以在eqshow.cn公告的方式予以公布，无需另行单独通知您；若您在本协议内容公告变更后继续使用本服务，表示您已充分阅读、理解并接受修改后的协议内容，也将遵循修改后的协议内容使用本服务；若您不同意修改后的协议内容，您应停止使用本服务。您可以访问 http://www.eqshow.cn来了解最新版本的服务条款。</p>\n                </p>\n                <p>帐户注册及条款</p>\n                <p>1.  您保证具有法律规定的完全民事权利能力和民事行为能力，能够独立承担民事责任的自然人、法人或其他组织；本协议内容不会被您所属国家或地区的法律禁止。\n                <p>2.  具体操作使用人应该是自然人。不允许采用注册机或者类似的自动化方式注册账户。\n                <p>3.  当您注册时应当按网站要求提供您真实的信息及其他必要的信息以完成注册。\n                <p>4.  您的登录信息只能用于一个人，不允许多人共享登录信息。您可以在网站允许的前提下注册多个登录用户名密码。\n                <p>5.  您应当保护好自己的用户名及密码信息不被泄露。“如是微营销”无法也不会保护因为您泄露用户名或密码导致的数据风险。\n                <p>6.  同一个用户只能拥有一个免费账户。\n                <p>7.  对于您以及您的账户所创建的内容负责。\n                <p>8.  您不得恶意攻击“如是微营销”服务。\n                <p>9.  您不得复制、转售或转授权任何部分或者全部的”如是微营销”服务。\n                <p>10. 甲方有权但并非义务删除以下内容：非法、歧视、恐吓、诽谤、色情、淫秽或者违反中国法律的。\n                <p>11. 您不得以口头或者文字方式攻击（包括恐吓、报复等）甲方客户、员工、成员或本产品及服务的其他使用者。\n                <p>12. 您不得上传或者发布垃圾邮件，短信，或上传计算机病毒程序或者恶意代码。\n                <p>13. 如果您的账户流量使用明显超过平均用户带宽使用，我们保留停用您的账户的权利，直到您降低您的流量使用。\n                <p>14. 您在本协议期间应遵守全部中国法律、法规和规章。\n                <p>15. 如果甲方因乙方的任何触犯中国法律法规的行为或违反本协议的行为而承受任何损失或损害，乙方应该采取所有行动使甲方免于承担责任，并对由此产生的全部损失和损害对乙方承担赔偿责任。\n                <p>16. 如果乙方存在任何触犯中国法律法规的行为或违反本协议的行为，甲方有权根据行为的严重性自行决定立即暂停或终止乙方对本服务的使用，甲方无须就服务暂停或终止对乙方承担任何责任，并且无须返还乙方已支付的当月费用。\n\n                <p>付费相关条款\n                <p>1.  “如是微营销”产品目前仅提供免费产品供您使用，但甲方保留未来推出“如是微营销”付费产品、功能或服务的权利。\n                <p>2.  您有权自由选择决定是否使用“如是微营销”中的付费产品、功能或服务。\n                <p>产品服务条款\n                <p>1.  甲方将以专业的方式提供产品及服务，但并不保证：1) 产品及服务满足您的所有需求或您的所有期待； 2) 产品及服务没有任何失误或缺陷； 或3) 产品及服务中的所有错误都会被修正。甲方无须对任何第三方提供的产品或服务负责，亦不对第三方产品或服务提供任何保证。\n                <p>2.  甲方保留不断修改调整这项服务的权利，而无需事先通知乙方。\n                知识产权条款\n                <p>1.  您提交的各种内容版权归属于您。\n                <p>2.  您应当了解并授权“如是微营销”及“如是微营销”许可的用户可以传播、二次编辑、分享您通过如是微营销编辑生成的作品。\n                <p>3.  甲方提供的服务及产品（包括但不限于观感、设计、图标、代码等）的版权、商标权、专利权及其他知识产权均归属于甲方。除非获得甲方明确书面允许，您不得复制、重用任何HTML/CSS, JavaScript或者任何视觉设计，也不得对甲方产品进行反向工程、分解或进行编译或其他修改。\n                <p>4.  本协议中未明确授予您的权利将由甲方保留。\n                <p>责任限制\n                在任何情况下、甲方均无须对任何间接性、后果性、惩戒性、偶然性、特殊性或刑罚性的损害(包括但不限于乙方因使用甲方服务而遭受的利润、收入损失、或预期的节约成本的损失或商誉损失等）承担责任，即使乙方已被告知该等损失的可能性。甲方对乙方承担的全部责任总额，无论因何原因（基于合同法、侵权法或其他法规）或何种行为方式产生，始终不超过乙方在当月服务期内因使用甲方服务而已经支付给甲方的费用。\n                服务取消与终止条款\n                <p>1.  您清楚的了解终止服务的后果。无需邮件或者电话确认，您可以在任何时候通过点击账户链接并执行相应操作来终止您的账户及相应的所有信息。\n                <p>2.  一旦终止，所有隶属于这个账户的数据及信息将由甲方作删除处理，并且无法恢复。\n                <p>3.  一旦终止账户，账户之下的用户将无法访问任何相关的服务。\n                <p>其他条款\n                <p>1.  您了解甲方使用第三方的运营商和网络提供商提供必要的硬件、软件、存储或网络来运行如是微营销服务。甲方无需因为第三方的、或者不在甲方控制范围内的原因（如不可抗力）造成的运行问题（如服务中断、停顿、中止等）负责。\n                <p>2.  如果本协议的某一条款或某一条款的一部分无效或不可执行，不影响本协议其他条款的有效性，无效或不可执行的条款将被视作已从本协议中删除。\n                <p>3.  本协议受中华人民共和国法律管辖。 在执行本协议过程中如发生纠纷，双方应及时协商解决。协商不成时，任何一方均应向甲方所在地人民法院提起诉讼。\n                <p>4.  若有任何疑问，请通过浏览http://e.wesambo.com网站下方的联系方式与我们联系。\n\n            </div>\n        </div>\n    </div>\n</div>\n<div ng-include="\'footer.tpl.html\'"></div>')}]),n.module("reg/reg.tpl.html",[]).run(["$templateCache",function(e){e.put("reg/reg.tpl.html",'<div><a ng-href="{{weiChatUrl}}">登录测试</a></div>')}]),n.module("sample/sample.tpl.html",[]).run(["$templateCache",function(e){e.put("sample/sample.tpl.html",'<div class="sample contain min_contain">\t\n\t    <header>\n\t        <div class="we_nav content_center">\n\t            <div class="link_list">\n\t                <ul class="clearfix">\n\t                    <li class="bg_hover"><a>用户案例</a></li>\n\t                    <li ng-hide="isAuthenticated()"><a ng-click = "login()">登录</a></li>\n\t                    <li ng-hide="isAuthenticated()" class=""><a ng-click = "register()">注册</a></li>\n\t                    <li ng-show="isAuthenticated()"><a href="#/main">进入</a></li>\n\t                </ul>\n\t            </div>                  \n\t            <div id="logo"><a href="#/home"><img ng-src="{{CLIENT_CDN}}images/logo.png" alt=""></a></div>\n\t        </div>    \n\t    </header>\n\t    <div class="content_center">\n<!-- \t\t    <div class="pv_contain clearfix">\n\t\t    \t<div class="img_pv_contain">\n\t\t\t    \t<div class="pv_images" >\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li  class="con_list" ng-repeat="dayTop in dayTop" ng-show="page == \'day\'">\n\t\t\t\t\t\t\t<a ng-href="{{VIEW_URL + \'v-\' + dayTop.code}}" target="_blank">\n\t\t\t\t\t\t\t\t<div class="pv_images_cont">\n\t\t\t\t\t\t\t\t\t<div ng-hide="showCode2 == true"><img ng-src="{{PREFIX_FILE_HOST + dayTop.image.imgSrc}}" alt="" width="235px" /></div>\n\t\t\t\t\t\t\t\t\t<div ng-show="showCode2 == true" qr-code qr-url="{{PREFIX_FILE_HOST + dayTop.image.imgSrc}}" class="qrcode">\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<p class="anli_name" title="{{dayTop.name}}">{{dayTop.name}}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<p class="changj_pv"><span class="er_name"><em>{{dayTop.userName}}</em><a ng-mouseover="showCode2 = true" ng-mouseleave="showCode2 = false" href="">二维码</a></span><span class="changj_show_num">展示:{{dayTop.showCount | fixnum}}</span></p>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li class="con_list" ng-repeat="monthTop in monthTop" ng-show="page == \'month\'">\n\t\t\t\t\t\t\t<a ng-href="{{VIEW_URL + \'v-\' + monthTop.code}}" target="_blank">\n\t\t\t\t\t\t\t\t<div class="pv_images_cont">\n\t\t\t\t\t\t\t\t\t<div ng-hide="showCode1 == true"><img ng-src="{{PREFIX_FILE_HOST + monthTop.image.imgSrc}}" alt="" width="235px" /></div>\n\t\t\t\t\t\t\t\t\t<div ng-show="showCode1 == true" qr-code qr-url="{{PREFIX_CLIENT_HOST + \'v-\' + monthTop.code}}" class="qrcode">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<p class="anli_name" title="{{monthTop.name}}">{{monthTop.name}}</p>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<p class="changj_pv"><span class="er_name"><em>{{monthTop.userName}}</em><a ng-mouseover="showCode1 = true" ng-mouseleave="showCode1 = false" href="">二维码</a></span><span class="changj_show_num">展示:{{monthTop.showCount | fixnum}}</span></p>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li class="con_list" ng-repeat="weekTop in weekTop" ng-show="page == \'week\'">\n\t\t\t\t\t\t\t<a ng-href="{{VIEW_URL + \'v-\' + weekTop.code}}" target="_blank">\n\t\t\t\t\t\t\t\t<div class="pv_images_cont" >\n\t\t\t\t\t\t\t\t\t<div ng-hide="showCode3 == true"><img ng-src="{{PREFIX_FILE_HOST + weekTop.image.imgSrc}}" alt="" width="235px" /></div>\n\t\t\t\t\t\t\t\t\t<div ng-show="showCode3 == true" qr-code qr-url="{{PREFIX_CLIENT_HOST + \'v-\' + weekTop.code}}" class="qrcode">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<p class="anli_name" title="{{weekTop.name}}">{{weekTop.name}}</p>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<p class="changj_pv"><span class="er_name"><em>{{weekTop.userName}}</em><a ng-mouseover="showCode3 = true" ng-mouseleave="showCode3 = false" href="">二维码</a></span><span class="changj_show_num">展示:{{weekTop.showCount | fixnum}}</span></p>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t    \t</div>\t\t    \t\t\t    \t\t\t    \t\t\t    \t\n\t\t \t\t</div>\n\t\t    \t<div class="pv_nav">\n\t\t    \t\t<h1><img ng-src="{{CLIENT_CDN}}images/sample/desr.png" alt="" /></h1>\n\t\t    \t\t<ul class="clearfix">\n\t\t    \t\t\t<li ng-class="{hover:page == \'month\'}" ng-click="page = \'month\'">本月排名</li><li ng-class="{hover:page == \'week\'}" ng-click="page = \'week\'">本周排名</li><li ng-click="page = \'day\'" ng-class="{hover:page == \'day\'}">昨日排名</li>\n\t\t    \t\t</ul>\n\t\t    \t</div>\n\t\t    </div> -->\n\t\t    <div class="header_con">\t\n\t\t\t    <div class="sample_cat clearfix" data-ng-init="load()">\n\t\t\t    \t<div class="sample_images mains">\n\t\t\t    \t\t<div class="clearfix">\n\t\t\t\t\t\t\t<div class="con_list" ng-repeat = "home in homes">\n\t\t\t\t\t\t\t\t<a ng-href="{{VIEW_URL + \'v-\' + home.code}}" target="_blank">\n\t\t\t\t\t\t\t\t\t<div ng-show="showCode == true" class="cj_img qrcode" qr-code qr-url="{{PREFIX_CLIENT_HOST + \'v-\' + home.code}}">\n\t\t\t\t\t\t\t\t\t\t<!-- <img ng-src="{{PREFIX_SERVER_HOST + \'eqs/qrcode/\' + home.code + \'.png\'}}" alt="" width="235px" /> -->\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div ng-hide="showCode == true" class="cj_img"><img ng-src="{{PREFIX_FILE_HOST + home.image.imgSrc}}" alt="" width="235px" /></div>\n\t\t\t\t\t\t\t\t\t<p class="anli_name" title="{{home.name}}">{{home.name}}</p>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t<p class="clearfix"><span class="er_name"><em>{{home.userName}}</em><a ng-mouseover="showCode = true" ng-mouseleave="showCode = false" href="">二维码</a></span>场景展示:{{home.showCount | fixnum}}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="mores" ng-init = "showMoreButton = true;" ng-hide = \'homes.length < 9\'>\n\t\t\t\t\t    \t<a ng-click="showMore(type)" ng-show = \'showMoreButton\'>查看更多</a>\n\t\t\t\t\t    \t<p ng-show = "!showMoreButton" style="font-size:16px;">没有更多了</p>\n\t\t\t\t\t    </div>\n\t\t\t\t\t    <p style="text-align:center;margin-top:100px;" ng-show = \'homes.length <= 0\'>该分类下暂无场景</p>\n\t\t\t    \t</div>\n\t\t\t    \t<div class="sample_cats">\n\t\t\t\t    \t<div class="sample_fix fixed">\n\t\t\t\t    \t\t<h1><img ng-src="{{CLIENT_CDN}}images/sample/case.png" alt="" /></h1>\n\t\t\t\t    \t\t<ul class="clearfix">\n\t\t\t                    <li id="one1" ng-class="{hover:typeindex == \'all\'}" ng-click="getHomes(\'all\', null, 1, 9);type=null">全部案例</li>\n\t\t\t                    <li ng-repeat = "sceneType in sceneTypes" ng-class = "{hover: typeindex == $index}" ng-click = "getHomes($index, sceneType.sort, 1, 9)">\n\t\t\t                        {{sceneType.name}}\n\t\t\t                    </li>\n\t\t\t\t    \t\t</ul>\n\t\t\t\t    \t</div>\n\t\t\t    \t</div>\t\n\t\t\t    </div>    \n\t\t\t</div>\n\t\t</div>\t\n</div>\n<div ng-include="\'footer.tpl.html\'"></div>\n\n');
}]),n.module("scene/console.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console.tpl.html",'<div>\n<div ng-show="comp_type==\'bg\'" ng-include="\'scene/console/bg.tpl.html\'" ng-controller="BgConsoleCtrl"></div>\n</div>')}]),n.module("scene/console/angle-knob.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/angle-knob.tpl.html",'<div class="sliderContainer">\n\t<div class="sliderKnob"></div>\n</div>')}]),n.module("scene/console/anim.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/anim.tpl.html",'<div ng-if="activeTab == \'anim\'" ng-controller="AnimConsoleCtrl">\n\t<div class="anim_area">\n\t\t<div class="style_list_angel clearfix">\n\t\t\t<div class="flo_lef">动画类型</div>\n\t\t\t<div class="flo_right"><select style="width:100px;border:1px solid #C9C9C9" ng-model="activeAnim" ng-change="model.type=activeAnim.id; changeAnimation()" ng-options="animType.name for animType in animTypeEnum">\n\t\t\t\t<option value="-1">无</option>\n\t\t\t</select></div>\n\t\t\t<div ng-show="model.type == 7" class="flo_right" style="clear:both;vertical-align: bottom;"><input type="checkbox" value="" ng-model="model.linear" ng-true-value="1" style="margin-right:3px;" />匀速</div>\n\t\t</div>\n\t\t<div class="row" ng-show="model.type != -1 && model.type != null">\t\t\t\n\t\t\t<form role="form">\n\t\t\t\t<div class="style_list_angel clearfix" ng-show="model.type == 1 || model.type == 2">\n\t\t\t\t\t<div class="flo_lef"><label>方向</label></div>\n\t\t\t\t\t<div class="flo_right"><select style="color:#999" class="form-control" ng-model="direction" ng-change="changeAnimation()" ng-options="animDirection.name for animDirection in animDirectionEnum">\n\t\t\t\t\t</select></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="style_list_angel">\n\t\t\t\t\t<label>动画时间</label>\n\t\t\t\t\t<div class="touming clearfix">\n\t\t\t\t\t\t<p class="num"><input limit-input class="input_kuang short" type="number" step="0.1" min="0" max="20" ng-model="model.duration" />秒</p>\n\t\t\t\t\t\t<div class="num" style="width:100px;" ui-slider min="0" max="20" use-decimals step="0.1" ng-model="model.duration"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\t\t\t\n\t\t\t\t<div class="style_list_angel">\n\t\t\t\t\t<label>延迟时间</label>\n\t\t\t\t\t<div class="touming clearfix">\n\t\t\t\t\t\t<p class="num"><input limit-input class="input_kuang short" type="number" step="0.1" min="0" max="20" class="form-control" ng-model="model.delay" />秒</p>\n\t\t\t\t\t\t<div class="num" style="width:100px;" ui-slider min="0" max="20" use-decimals step="0.1" ng-model="model.delay"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="style_list_angel">\n\t\t\t\t\t<label>动画次数</label>\n\t\t\t\t\t<div class="touming clearfix">\n\t\t\t\t\t\t<p class="num"><input ng-disabled  = "model.count" limit-input class="input_kuang short" type="number" min="1" max="10" class="form-control" ng-model="model.countNum"   />次</p>\n\t\t\t\t\t\t<div class="num" style="width:100px;" ui-slider min="0" max="10" ng-model="model.countNum" ng-disabled  = "model.count"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="" style="text-align:right;margin-top:5px;"><input type="checkbox" value="" id="xunhuan" ng-model="model.count" style="margin-right:3px;" />循环播放</div>\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</form>\t\t\t\t\t\n\t\t</div>\n\t</div>\n</div>')}]),n.module("scene/console/audio.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/audio.tpl.html",'<div class="input_console">\n\t<div class="modify_area">\n\t\t<form class="form-horizontal" role="form">\n\t\t\t<div class="category_list" style="padding-left:198px;">\n\t\t\t\t<ul class="category_list_container clearfix">\n\t\t\t\t\t<li ng-class="{active: category.value == model.bgAudio.type}" class="category_item" ng-repeat="category in categoryList" ng-click="model.bgAudio.type = category.value">\n\t\t\t\t\t\t{{category.name}}\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div ng-if="model.bgAudio.type == \'1\'" class="audio_area clearfix">\n\t\t\t\t<span class="control-label" style="padding-top:12px;padding-right:5px;">链接地址</span>\n\t\t\t\t<input class="" type="text" ng-model="model.type1" placeholder="请输入mp3文件链接" style="width:280px;height:35px;line-height:35px;border:1px solid #E7E7E7;border-radius:0px;padding-left:5px;font-size:12px;" />\n\t\t\t</div>\n\t\t\t<div ng-if="model.bgAudio.type == \'2\'" class="audio_area clearfix" style="height:auto;">\n\t\t\t\t<select class="float-lf selectcartoon" ng-change="selectAudio(2)" ng-model="model.selectedMyAudio" ng-options="myAudio.name for myAudio in myAudios" id="nb_musicurl" style="padding-left:5px;width:280px;">\n\t     \t\t\t<option value="">选择我的音乐</option>\n\t         \t</select>\n\t         \t<span class="btn-main" ng-click="goUpload()">上传音乐</span>\n\t         \t<!-- <span ng-show="model.type2">\n\t\t\t\t\t<a class="glyphicon glyphicon-play" ng-click="playAudio(1);" title="试听">\n\t\t         \t\t<audio id="audition1" ng-src="{{model.type2}}"></audio>\n\t\t         \t</a>\n\t\t         \t<a class="glyphicon glyphicon-pause" ng-click="pauseAudio(1);" title="暂停">\n\t\t         \t</a>  \n\t         \t</span> -->\n\t         \t<div ng-if = "model.type2" style = "margin-top:10px;">\n\t         \t\t<audio ng-src="{{model.type2}}" controls="controls">\n\t\t\t\t\t</audio>\t\t\t\t\t\t\t\t\n\t         \t</div>\n\t\t\t\t<!-- <span class="btn-main" ng-click="goUpload()">上传音乐</span> -->\n\t\t\t</div>\n\t\t\t<div ng-if="model.bgAudio.type == \'3\'" class="audio_area clearfix">\n\t\t\t\t<select class="float-lf selectcartoon" ng-change="selectAudio(3)" ng-model="model.selectedAudio" ng-options="reservedAudio.name for reservedAudio in reservedAudios" id="nb_musicurl" style="padding-left:5px;width:280px;height:35px;line-height:35px;border:1px solid #E7E7E7;">\n\t     \t\t\t<option value="">选择音乐库文件</option>\n\t         \t</select>\n\t         \t<!-- <span ng-show="model.type3">\n\t\t         \t<a class="glyphicon glyphicon-play" ng-click="playAudio(2);" title="试听">\n\t\t         \t\t<audio id="audition2" ng-src="{{model.type3}}"></audio>\n\t\t         \t</a>\n\t\t         \t<a class="glyphicon glyphicon-pause" ng-click="pauseAudio(2);" title="暂停">\n\t\t         \t</a>\n\t\t        </span>   -->  \t\n\t\t        <div ng-if = "model.type3" style = "margin-top:10px;">\n\t         \t\t<audio  ng-src="{{model.type3}}" controls="controls">\n\t\t\t\t\t</audio>\t\t\t\t\t\t\t\t\n\t         \t</div>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n</div>\n<div class="modal-footer">\n    <a class="btn-main login" style="width: 88px;" ng-click="confirm()">确定</a>\n    <a class="btn-grey0 cancel" style="width: 88px;" ng-click="cancel()">取消</a>\n</div>')}]),n.module(BASE_URL+"templates/scene.console.bg.tpl.html",[]).run(["$templateCache",function(e){e.put(BASE_URL+"templates/scene.console.bg.tpl.html",'<!-- <div class="bg_console">\n\t<div class="img_list">\n\t\t<div class="category_list">\n\t\t\t<div ng-show="fileType == \'0\'" class="category_item" ng-click="changeCategory(\'c\')" ng-class="{active: \'c\' == categoryId}">\n\t\t\t\t<span>纯色背景</span>\n\t\t\t</div>\n\t\t\t<ul class="category_list_container">\n\t\t\t\t<li ng-class="{active: category.value == categoryId}" class="category_item" ng-repeat="category in categoryList" ng-click="changeCategory(category.value)">\n\t\t\t\t\t{{category.name}}\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="btn-group fl" dropdown ng-show="otherCategory.length > 0">\n\t\t      <span class="dropdown-toggle" ng-disabled="disabled">\n\t\t        其它 <span class="caret"></span>\n\t\t      </span>\n\t\t      <ul class="dropdown-menu">\n\t\t        <li ng-repeat="category in otherCategory">\n\t\t          <a href ng-click="changeCategory(category.value)">{{category.name}}</a>\n\t\t        </li>\n\t\t      </ul>\n\t\t    </div>\n\t\t    <div class="category_item" ng-click="changeCategory(\'0\')" ng-class="{active: \'0\' == categoryId}">\n\t\t\t\t<span ng-show="fileType == \'0\'">我的背景</span>\n\t\t\t\t<span ng-show="fileType == \'1\'">我的图片</span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="img_list_container" ng-class="{photo_list: fileType == \'1\', bg_list: fileType == \'0\'}">\n\t\t\t<ul class="img_box">\n\t\t\t\t<li ng-show="isEditor || categoryId == \'0\'" class="upload" title="上传图片" ng-click="goUpload(img.path)">\n\t\t\t\t\t<span class="glyphicon glyphicon-upload"></span>\n\t\t\t\t</li>\n\t\t\t\t<li ng-show="fileType == \'0\' && \'c\' != categoryId" ng-repeat="img in imgList track by $index" ng-click="replaceBgImage(img.path, $event)">\n\t\t\t\t\t<span ng-click="deleteImage(img.id, $event)" ng-show="isEditor || categoryId == \'0\'" class="del_icon glyphicon glyphicon-remove-circle"></span>\n\t\t\t\t\t<img responsive-image ng-src="{{PREFIX_FILE_HOST + img.tmbPath}}"></img>\n\t\t\t\t</li>\n\t\t\t\t<li class="photo_item" photo-draggable="{{img.path}}" ng-show="fileType == \'1\'"  ng-repeat="img in imgList track by $index" ng-click="replaceBgImage(img.path, $event)">\n\t\t\t\t\t<span ng-click="deleteImage(img.id, $event)" ng-show="isEditor || categoryId == \'0\'" class="del_icon glyphicon glyphicon-remove-circle"></span>\n\t\t\t\t\t<img responsive-image ng-src="{{PREFIX_FILE_HOST + img.tmbPath}}"></img>\n\t\t\t\t</li>\n\t\t\t\t<li class="photo_item" style="background-color: {{img.color}}" ng-show="fileType == \'0\' && \'c\' == categoryId"  ng-repeat="img in imgList track by $index" ng-click="replaceBgColor(img.color, $event)">\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t\n\t\t</div>\n\t\t<div class="pagination_container" ng-show="numPages>1">\n\t\t\t<pagination style="float: left" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" max-size="10" items-per-page="pageSize" total-items="totalItems" ng-model="currentPage" ng-change="changeCategory(categoryId, currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination>\n\t        <div class="current_page">\n\t            <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? changeCategory(categoryId, toPage) : null">\n\t            <a ng-click="changeCategory(categoryId,toPage)" class="go">GO</a>\n\t            <span>当前: {{currentPage}} / {{numPages}} 页</span>\n\t        </div>\n\t    </div>\n\t\t<div ng-show="fileType == \'1\'" class="bottom_area" style="position: relative; min-height: 80px;">\n\t\t\t<div class="crop_drop" crop-droppable style = "min-height: 80px;">\n\t\t\t\t<p ng-hide="cropMode" class="">拖动图片到此区域剪裁</p>\n\t\t\t\t<div class="image_crop">\n\t\t\t\t\t<img id="target"></img>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="fr" style="width: 180px;">\n\t\t\t\t<p>*单击图片替换</p>\n\t\t\t\t<p>*或拖动图片到左侧区域剪裁</p>\n\t\t\t\t<a ng-show="cropMode" class="btn-main" style="width: 105px;position: absolute;bottom: 0;" ng-click="crop()">剪裁并替换</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div> -->\n<div class="bg_console clearfix" style="background-color:#E7E7E7;">\n\t<div class="fl" style="width:188px;">\n\t\t <ul class="nav nav-tabs tabs-left" style="padding-top:0px;"><!-- \'tabs-right\' for right tabs -->\n    \t\t<li class="active" ng-click="changeCategory(\'0\')">\n    \t\t\t<a href="" ng-show="fileType == \'0\'" ng-click="systemImages = false;" data-toggle="tab">我的背景</a>\n    \t\t\t<a href="" ng-show="fileType == \'1\'" ng-click="systemImages = false;" data-toggle="tab">我的图片</a>\n    \t\t</li>\n\t\t    <li>\n\t\t    \t<a href="" ng-show="fileType == \'0\'" ng-click="systemImages = true; changeCategory(\'all\')" data-toggle="tab">背景库</a>\n\t\t    \t<a href="" ng-show="fileType == \'1\'" ng-click="systemImages = true; changeCategory(\'all\')" data-toggle="tab">图片库</a>\n\t\t    </li>\n\t\t  </ul>\n\t</div>\n\t<div class="fl" style="width:710px;padding:0 10px;background-color:#FFF;">\n\t\t<div class="tab-content" id="bg_contain">\n\t        <div class="tab-pane active" ng-show="!systemImages">\n\t        \t<div class="img_list" style="padding-bottom: 0px;">\n\t        \t\t<div class="category_list clearfix">\n\t\t\t\t\t\t<ul class="category_list_container clearfix" style="width:610px;float:left;">\n\t\t\t\t\t\t\t<li ng-class="{active: tagIndex == -1}" class="category_item" ng-click="changeCategory(\'0\');">\n\t\t\t\t\t\t\t\t全部\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li ng-class="{active: tagIndex == $index}" class="category_item" ng-repeat="myTag in myTags" ng-mouseenter="hoverTag(myTag)" ng-mouseleave="hoverTag(myTag)" ng-click="getImagesByTag(myTag.id, $index)">\n\t\t\t\t\t\t\t\t{{myTag.name}}<span ng-if="myTag.hovered" ng-click="deleteTag(myTag.id, $index, $event)">x</span>\n\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="category_item active" ng-click="createCategory();" style="float:right;">\n\t\t\t\t\t\t\t创建分类\n\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="edit">\n\t\t\t\t\t\t<input type="checkbox" ng-model="allImages.checked" ng-change="selectAll()"/>&nbsp;&nbsp;<span ng-click="deleteImage()"><a href="">删除</a></span>\n\t\t\t\t\t\t<div class="btn-group">\n\t\t\t\t\t\t\t<div class="dropdown-toggle"  data-toggle="dropdown" ng-click="setIndex($event);">分类到</div>\n\t\t\t\t\t\t\t<div class="dropdown-menu" role="menu">\n\t\t\t\t\t\t\t\t<ul forbidden-close>\n\t\t\t                        <li ng-class="{selecttag: dropTagIndex == $index}" ng-repeat="myTag in myTags" ng-click="selectTag(myTag, $index)"><span>{{myTag.name}}</span></li>\n\t\t\t                        <li ng-click="createCategory();" class="add_cate clearfix"><em>+</em><span>添加分类</span></li>\n\t\t                      \t</ul>\n\t\t                      \t<div class="fl btn-main" style="width:100%;" ng-click="setCategory(dropTagIndex)"><a href="" style="color:#FFF;">确定</a></div>\n\t\t                    </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div ng-if="tagIndex > -1" style="display: inline-block; margin-left: 20px;"><a href="" ng-click="unsetTag()">取消分类</a></div>\n\t\t\t\t\t</div>\n\t        \t</div>\n\t        </div>\n\t        <div class="tab-pane" ng-class="{active: systemImages}" ng-show="systemImages">\n\t        \t<div class="img_list">\n\t        \t\t<div class="category_list">\t\t\t\t\n\t\t\t\t\t\t<ul class="category_list_container clearfix">\n\t\t\t\t\t\t\t<li class="category_item"  ng-click="changeCategory(\'all\')" ng-class="{active: \'all\' == categoryId}">\n\t\t\t\t\t\t\t最新\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li ng-class="{active: category.value == categoryId}" class="category_item" ng-repeat="category in categoryList" ng-click="changeCategory(category.value); getChildCategory(category.value);sysTagIndex = -1;">\n\t\t\t\t\t\t\t\t{{category.name}}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li ng-show="fileType == \'0\'" class="category_item"  ng-click="changeCategory(\'c\');numPages=2;" ng-class="{active: \'c\' == categoryId}">\n\t\t\t\t\t\t\t纯色背景\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\t\n\t\t\t\t\t</div>\n\t\t        \t<div class="cat_two_list clearfix" ng-if="\'c\' != categoryId && \'all\' != categoryId">\n\t\t        \t\t<ul>\n\t\t        \t\t\t<li ng-class="{active: sysTagIndex == $index}" ng-repeat = "childCatrgory in childCatrgoryList" ng-click="getImagesBySysTag(childCatrgory.id, $index, 1, categoryId)" style="cursor:pointer;">\n\t\t        \t\t\t\t{{childCatrgory.name}}\n\t\t        \t\t\t</li>\n\t\t        \t\t</ul>\n\t\t        \t</div>\n\t        \t</div>\n\t        </div>\n\t    </div>\n\t    <div class="img_list" style="padding-top:0px;">\n\t    \t<div class="img_list_container" ng-class="{photo_list: fileType == \'1\', bg_list: fileType == \'0\'}">\n\t\t\t\t<ul class="img_box clearfix">\n\t\t\t\t\t<li ng-show="categoryId == \'0\'" class="upload" title="上传图cc片" ng-click="goUpload(img.path)">\n\t\t\t\t\t\t<span class=""><img ng-src="{{CLIENT_CDN}}images/bg_15.jpg" alt="" /></span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="imageList" ng-show="fileType == \'0\' && \'c\' != categoryId" ng-repeat="img in imgList track by $index" ng-click="switchSelect(img, $event)" ng-mouseenter="hover(img)" ng-mouseleave="hover(img)" ng-class="{hovercolor: img.showOp || img.selected}" right-click>\n\t\t\t\t\t\t<img ng-src="{{\'userfiles\'+ img.tmbPath}}" />\n\t\t\t\t\t\t<div class="edit_content" ng-if="(img.showOp || img.selected) && categoryId == \'0\'">\n\t\t\t\t\t\t\t<div class="select" ng-if="!img.selected && categoryId == \'0\'"><img ng-src="{{CLIENT_CDN}}images/nocheck.jpg"/></div>\n\t\t\t\t\t\t\t<div class="select" ng-if="img.selected && categoryId == \'0\'"><img ng-src="{{CLIENT_CDN}}images/checked.png"/></div>\n\t\t\t\t\t\t\t<div class="del" ng-click="deleteImage(img.id, $event)"><img ng-src="{{CLIENT_CDN}}images/bg_07.png" /></div>\n\t\t\t\t\t\t\t<div ng-if="categoryId == \'0\'" class="set btn-group" class="dropdown-toggle"  data-toggle="dropdown" ng-click="prevent(img, $event)">\n\t\t\t\t\t\t\t\t<img id="{{img.id}}" ng-src="{{CLIENT_CDN}}images/bg_19.png" />\n\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t<div class="dropdown-menu set_category" id="{{img.id}}" role="menu">\n\t\t\t\t\t\t\t\t<ul forbidden-close id="cat_tab">\n\t\t\t                        <li ng-class="{selecttag: dropTagIndex == $index}" ng-repeat="myTag in myTags" ng-click="selectTag(myTag, $index)"><span>{{myTag.name}}</span></li>\n\t\t\t                        <li ng-click="createCategory();" class="add_cate clearfix"><em>+</em><span>添加分类</span></li>\n\t\t                      \t</ul>\n\t\t                      \t<div class="fl btn-main" style="width:100%;"><a href="" style="color:#FFF;" ng-click="setCategory(dropTagIndex, img.id)">确定</a></div>\n\t\t                    </div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="imageList" ng-show="fileType == \'1\'"  ng-repeat="img in imgList track by $index" ng-click="switchSelect(img, $event)" ng-mouseenter="hover(img)" ng-mouseleave="hover(img)" ng-class="{hovercolor: img.showOp || img.selected}" right-click>\n\t\t\t\t\t\t<img ng-src="{{PREFIX_FILE_HOST + img.tmbPath}}"/>\n\t\t\t\t\t\t<div class="edit_content" ng-show="(img.showOp || img.selected) && categoryId == \'0\'">\n\t\t\t\t\t\t\t<div class="select" ng-if="!img.selected && categoryId == \'0\'"><img ng-src="{{CLIENT_CDN}}images/nocheck.jpg"/></div>\n\t\t\t\t\t\t\t<div class="select" ng-if="img.selected && categoryId == \'0\'"><img ng-src="{{CLIENT_CDN}}images/checked.png"/></div>\n\t\t\t\t\t\t\t<div class="del" ng-click="deleteImage(img.id, $event)" ng-click="deleteImg()"><img ng-src="{{CLIENT_CDN}}images/bg_07.png" /></div>\n\t\t\t\t\t\t\t<div class="set btn-group" ng-if="categoryId == \'0\'" class="dropdown-toggle" ng-click="prevent(img, $event)" data-toggle="dropdown">\n\t\t\t\t\t\t\t\t<img id="{{img.id}}" ng-src="{{CLIENT_CDN}}images/bg_19.png" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="dropdown-menu set_category" role="menu">\n\t\t\t\t\t\t\t\t<ul forbidden-close id="cat_tab">\n\t\t\t                        <li ng-class="{selecttag: dropTagIndex == $index}" ng-repeat="myTag in myTags" ng-click="selectTag(myTag, $index)"><span>{{myTag.name}}</span></li>\n\t\t\t                        <li ng-click="createCategory()" class="add_cate clearfix"><em>+</em><span>添加分类</span></li>\n\t\t                      \t</ul>\n\t\t                      \t<div class="fl btn-main" ng-click="setCategory(dropTagIndex, img.id)" style="width:100%;"><a href="" style="color:#FFF;">确定</a></div>\n\t\t                    </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="photo_item" style="background-color: {{img.color}}" ng-show="fileType == \'0\' && \'c\' == categoryId" ng-mouseenter="hover(img)" ng-mouseleave="hover(img)" ng-class="{hovercolor: img.showOp || img.selected, mr0: $index%9 == 8}" ng-click="switchSelect(img, $event)"  ng-repeat="img in imgList track by $index">\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class="fanye_foot clearfix" style="margin-top: 20px;">\n\t\t\t\t<div class="fr btn-main" ng-click="replaceImage();"><a href="" style="color:#FFF;">确定</a></div>\n\t\t\t\t<div class="pagination_container fl">\n\t\t\t\t\t<pagination style="float: left" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" max-size="5" items-per-page="pageSize" total-items="totalItems" ng-model="currentPage" ng-change="getImagesByPage(categoryId, currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination>\n\t\t\t        <div class="current_page">\n\t\t\t            <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? getImagesByPage(categoryId, toPage) : null">\n\t\t\t            <a ng-click="getImagesByPage(categoryId,toPage)" class="go">GO</a>\n\t\t\t            <span>当前: {{currentPage}} / {{numPages}} 页</span>\n\t\t\t        </div>\n\t\t\t    </div>\n\t\t\t</div>\n\t    </div>\n\t</div>\n</div>')}]),n.module("scene/console/button.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/button.tpl.html",'<div class="button_console">\n\t<div class="modify_area">\n\t\t<span class="label">按钮名称：</span>\n\t\t<input type="text" maxlength="15" ng-model="model.title" ng-keyup="$event.keyCode == 13 ? confirm() : null"/>\n\t</div>\n\t\n</div>\n<div class="modal-footer">\n    <a class="btn-main login" style="width: 88px;" ng-click="confirm()">确定</a>\n    <a class="btn-grey0 cancel" style="width: 88px;" ng-click="cancel()">取消</a>\n</div>')}]),n.module("scene/console/category.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/category.tpl.html",'<div class="category_input">\n\t<input type="text" ng-model="category.name" placeholder="分类名称" />\n</div>\n<div class="modal-footer">\n    <a class="btn-main login" style="width: 88px;" ng-click="confirm()">确定</a>\n</div>')}]),n.module("scene/console/cropimage.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/cropimage.tpl.html",'\n\n<div class="cropimage" style="">\n\t<!-- <img ng-src="{{PREFIX_FILE_HOST + imgUrl}}"/> -->\n\t<div class="image_crop">\n\t\t<img id="target"></img>\n\t</div>\n\t<div class="crop_close">\n\t\t<a class=" btn-main" href="" ng-click="crop()">确定</a>\n\t\t<a class=" btn-main" href="" ng-click="cancel()">取消</a>\n\t</div>\n</div>')}]),n.module("scene/console/fake.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/fake.tpl.html",'<div class="modal-footer">\n\t<div class="alert alert-info" role="alert">此功能为高级账号功能，点击按钮免费申请成为高级账号！</div>\n    <a class="btn-main login" target="_blank" style="width: 188px;" ng-href="javascript:void(0);">免费成为高级账号</a>\n</div>\n<div class="anim_area" style="padding: 0 20px 20px;">\n\t<img title="点击上方按钮成为高级账号" ng-show="type==\'style\'" src="{{CLIENT_CDN}}images/create/fakestyle.png"/>\n\t<img title="点击上方按钮成为高级账号" ng-show="type==\'anim\'" src="{{CLIENT_CDN}}images/create/fakeanim.png"/>\n</div>')}]),n.module("scene/console/input.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/input.tpl.html",'<div class="input_console">\n\t<div class="modify_area">\n\t\t<span class="label">输入框名称：</span>\n\t\t<input type="text" maxlength="15" ng-model="model.title" ng-keyup="$event.keyCode == 13 ? confirm() : null"/>\n\t\t<input type="checkbox" id="checkbox_required" ng-model="model.required" ng-true-value="required" style="margin-top:0;margin-left:5px;" />\n\t\t<label for="checkbox_required" style="font-weight: lighter; margin:0;font-size:12px;">必填</label>\n\t\n\t\t<div class="customized_container">\n\t\t\t<input type="radio" id="input_name" ng-model="model.type" ng-change="model.title=\'姓名\'" value="501" /><label for="input_name" style="font-weight: lighter; margin: 0;">姓名</label>\n\t\t\t<input type="radio" id="input_phone" ng-model="model.type" ng-change="model.title=\'手机\'" value="502" /><label for="input_phone" style="font-weight: lighter; margin: 0;" />手机</label>\n\t\t\t<input type="radio" id="input_email" ng-model="model.type" ng-change="model.title=\'邮箱\'" value="503" /><label for="input_email" style="font-weight: lighter; margin: 0;">邮箱</label>\n\t\t\t<input type="radio" id="input_text" ng-model="model.type" ng-change="model.title=\'文本\'" value="5" /><label for="input_text" style="font-weight: lighter; margin: 0;">文本</label>\n\t\t</div>\n\t</div>\n</div>\n<div class="modal-footer">\n    <a class="btn-main login" style="width: 88px;" ng-click="confirm()">确定</a>\n    <a class="btn-grey0 cancel" style="width: 88px;" ng-click="cancel()">取消</a>\n</div>')}]),n.module("scene/console/link.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/link.tpl.html",'<div class = "link-modal">\t\n\t<div class = "row" style = "font-size: 14px; text-align:center;">\n\t\t<div class="input_console">\n\t\t\t<div class = "modify_area" style="text-align:left;padding-left:110px;">\n\t\t\t\t<div style="margin-bottom:20px;">\n\t\t\t\t\t<input type="radio" name="externalRadio" id="externalRadio" ng-model = "url.link" value="external" ng-change = "changed()" style="margin:0px;">\n\t\t\t\t\t    网站地址：\n\t\t\t\t\t<input class = "" style="height:35px;width:280px;" type="text" ng-model = "url.externalLink" name="externalLink" id="externalLink" placeholder = "网站地址" ng-disabled = "url.link == \'internal\'" ng-change = "selectRadio(\'external\')"/>\n\t\t\t\t\t<a style = "font-size: 16px;display: inline-block; margin-top: 5px;background-image: url(\'images/create/delete.png\'); width: 14px; height: 14px;" ng-show = "url.link == \'external\'" class = "delete-link" ng-click = "removeLink(\'external\')"></a>\n\t\t\t\t</div>\n\t\t\t\t<div class = "" >\n\t\t\t\t\t<input type="radio" name="internalRadio" id="internalRadio" value="internal" ng-model = "url.link" ng-change = "changed()" style="margin:0px;">\n\t\t    \t\t\t场景页面：\n\t\t\t\t\t<select style = "border:1px solid #E7E7E7; height: 35px;width:280px;" ng-model = "url.internalLink" ng-options = "page.name for page in pageList" ng-disabled = "url.link == \'external\'" ng-change = "selectRadio(\'internal\')"></select>\n\t\t\t\t\t<a style = "display: inline-block;font-size: 16px; background-image: url(\'images/create/delete.png\'); width: 14px; height: 14px;" ng-show = "url.link == \'internal\'" ng-click = "removeLink(\'internal\')"></a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class = "modal-footer">\n\t\t\t<a type = "button" style="width:88px" class = "btn  btn-main" ng-click = "confirm()">确定</a>\n\t\t\t<a type = "button" style="width:88px" class = "btn  btn-grey0" ng-click = "cancel()">取消</a>\n\t\t</div>\n\t</div>\n</div>')}]),n.module("scene/console/map.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/map.tpl.html",'<div class="map_console">\n\t<div id="l-map"></div>\n\t<div class="search_area">\n\t\t<div class="input-group">\n\t\t  <input type="text" class="form-control" ng-model="search.address" ng-keyup="$event.keyCode == 13 ? searchAddress() : null" placeholder="请输入地名">\n\t\t  <span class="input-group-btn">\n\t\t    <button ng-click="searchAddress()" class="btn btn-default" type="button">搜索</button>\n\t\t  </span>\n\t\t</div><!-- /input-group -->\n\t\t<div id="r-result">\n\t\t\t<ul class="list-group">\n\t\t\t\t<li class="list-group-item" ng-repeat="address in searchResult" ng-click="setPoint(address.point.lat, address.point.lng, address.address)">\n\t\t\t\t\t{{address.address}}\t\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</div>\n<div class="modal-footer">\n    <a class="btn-main login" style="width: 88px;" ng-click="resetAddress()">确定</a>\n    <a class="btn-grey0 cancel" style="width: 88px;" ng-click="cancel()">取消</a>\n</div>')}]),n.module("scene/console/microweb.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/microweb.tpl.html",'<div class="button_console">\n\t<div class="modify_area">\n\t\t<div>导航样式:\n\t\t\t<ul>\n\t\t\t\t<li ng-click = "selectColor(color)" ng-class = "{colorborder: model.color == color.backgroundColor}" style = "display: inline-block; margin: 10px;" ng-repeat = "color in backgroundColors"><div style = "width: 50px; height: 30px; margin: 10px; cursor:pointer;" ng-style = "color"></div></li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t<div class = "divider" style = "margin-top: 10px; height: 1px; background: #ccc;"></div>\n\t<div class="modify_area">\n\t\t<div>\n\t\t\t<ul class="clearfix" style="left:50%;margin-left:-160px;position:relative;height:65px;">\n\t\t\t\t<li class = "title_color" ng-class = "{colorborder:labelIndex == $index && labelName.mousedown,selectedcolor: labelName.selected,whitecolor: labelName.color.backgroundColor == \'#fafafa\'}" ng-click = "switchLabel(labelName, $index)" style = "display: inline-block;float:left;" ng-repeat = "labelName in labelNames"><div style = "margin: 10px; width:50px; height: 30px;line-height:30px; border: 1px solid #ccc; cursor: pointer;" ng-style = "labelName.color">{{labelName.title}}</div></li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<span class="label">导航名称：</span>\n\t\t<input type="text" ng-model="model.title" ng-change = "changeLabelName()" ng-keyup="$event.keyCode == 13 ? confirm() : null" placeholder = "导航名称" maxlength = "4"/>\n\t</div>\n\n\t<div class="modify_area">\n\t\t<span class="label">链接页面：</span>\n\t\t<select style = "width: 181px; height: 30px; display: inline-block;" ng-model = "model.link" ng-options = "page.name for page in pageList" ng-change = "selectLink(model.link)"></select>\n\t</div>\n\n\t<div class="modify_area" style = "color: #ff0000">\n\t\t至少选择两个标签，并分别添加链接\n\t</div>\n\t\n</div>\n<div class="modal-footer">\n    <a class="btn-main login" style="width: 88px;" ng-click="confirm()">确定</a>\n    <a class="btn-grey0 cancel" style="width: 88px;" ng-click="cancel()">取消</a>\n</div>')}]),n.module("scene/console/pic_lunbo.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/pic_lunbo.tpl.html",'<div class="pic_lunbo_console input_console">\n    <div class="modify_area">\n        <div class="row">\n            <div class="col-sm-7">\n                <div class="row" style="margin:0px -15px 10px -15px;">\n                    <div class="col-sm-5" style="line-height: 35px; vertical-align: middle; text-align: center;">图集样式</div>\n                    <div class="col-sm-7">\n                        <select class="" style="font-size:12px;padding-left:3px;width:150px;">\n                            <option value="1">图片轮播</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="row" style="margin:10px -15px;">\n                    <div class="col-sm-5" style="line-height: 35px; vertical-align: middle; text-align: center;">自动播放</div>\n                    <div class="col-sm-7" style="font-size: 30px; color: #9ad64b;text-align:left;">\n                        <span class="fa fa-toggle-on" style="cursor: pointer;" ng-show="isAutoPlay" ng-click="autoPlay(false)"></span>\n                        <span class="fa fa-toggle-off" style="cursor: pointer;" ng-hide="isAutoPlay" ng-click="autoPlay(true)"></span>\n                    </div>\n                </div>\n                <div class="row" style="margin: 10px -15px;">\n                    <div class="col-sm-5" style="text-align: center;">\n                        <a style="border-radius:3px;width:88px;" class="btn-main btn-success" ng-click="choosePic()">选择图片</a>\n                    </div>\n                    <div class="col-sm-7" style="font-size:12px; line-height: 35px;text-align:left;">\n                        <div>最多可选择6张图片</div>\n                    </div>\n                </div>\n            </div>\n            <div class="col-sm-5">\n                <div class="well" style="margin-bottom: 0;">\n                    <img class="scratch" style="height: 100px; width: 100%;" ng-src="{{CLIENT_CDN}}images/u2462.png">\n                </div>\n            </div>\n        </div>\n        <div class="row" style="margin-top: 20px;" ng-hide="imgList.length">\n            <div class="col-sm-12">\n                <div class="divider" style="height: 1px; background: #ddd;"></div>\n            </div>\n        </div>\n        <div class="panel panel-default lunbo_upload" style="margin:20px 15px 0 15px;" ng-show="imgList.length">\n            <div class="panel-body">\n                <div style="margin: 10px 0; height: 66px;" ng-repeat="img in imgList track by $index">\n                    <div style="border-radius: 5px; overflow: hidden; width: 66px; height: 66px; float: left;">\n                        <img style="width: 100%; height: 100%;" ng-src="{{fileDomain + img.src}}">\n                    </div>\n                    <textarea placeholder="添加描述功能暂不开放" rows="4" disabled style="width: 75%; float: left; margin: 0 10px;" maxlength="150" ng-model="img.desc">{{img.desc}}</textarea>\n                    <div style="line-height: 66px; text-align: center; float: right;">\n                        <span class="glyphicon glyphicon-remove-circle" style="font-size: 30px; vertical-align: middle; cursor: pointer; color: orange;" ng-click="remove($index)"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="modal-footer">\n    <a class="btn-main login" style="width: 88px;" ng-click="ok()">确定</a>\n    <a class="btn-grey0 cancel" style="width: 88px;" ng-click="cancel()">取消</a>\n</div>');
}]),n.module("scene/console/setting.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/setting.tpl.html",'<div panel-draggable id="comp_setting">\n\t<div class="cancel"><a href="" title="关闭" ng-click="cancel()">x</a></div>\n\t<div class="style_head clearfix">\n\t\t<ul class="clearfix">\n\t\t\t<li><a ng-click="activeTab = \'style\'" ng-class="{hover:activeTab == \'style\'}">样式</a></li>\n\t\t\t<li><a ng-click="activeTab = \'anim\'" ng-class="{hover:activeTab == \'anim\'}">动画</a></li>\n\t\t</ul>\n\t</div>\n\t<div class="style_content">\n\t\t<div ng-include="\'scene/console/anim.tpl.html\'"></div>\n\t\t<div ng-include="\'scene/console/style.tpl.html\'"></div>\n\t\t\n\t</div>\t\t\n\t\n</div>')}]),n.module("scene/console/style.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/style.tpl.html",'<div ng-if="activeTab == \'style\'" ng-controller="StyleConsoleCtrl">\n\t<div class="yangshi">\n\t\t<section>\n\t\t\t<div class="style_list" ng-init="showBasic=true" ng-click="showBasic = !showBasic; showBorder = false; showShadow = false;">\n\t\t\t\t<b class="caret" ng-show="showBasic"></b><b class="caret off" ng-show="!showBasic"></b>基础样式\n\t\t\t</div>\n\t\t\t<div ng-show="showBasic"  class="style_con_hei">\n\t\t\t\t<div class="style_list_angel clearfix">\n\t\t\t\t\t<div class="">背景颜色</div>\n\t\t\t\t\t<div class="color_select clearfix" style="margin-top:10px;">\n\t\t\t    \t\t<input class=" flo_right" style="font-size:12px;width:135px;" style-input elem-id="{{elemDef.id}}" ng-model="model.backgroundColor" css-item="backgroundColor" type="text" />\n\t\t\t    \t\t<a class="input_kuang flo_lef" ng-style="{backgroundColor: model.backgroundColor}" ng-model="model.backgroundColor" colorpicker="rgba" ></a>\n\t\t\t    \t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="style_list_angel clearfix" ng-show="elemDef.type == \'2\' ||elemDef.type == \'8\' || (\'\'+elemDef.type).charAt(0) == \'6\'">\n\t\t\t  \t\t<div class="">文字颜色</div>\n\t\t\t  \t\t<div class="color_select clearfix" style="margin-top:10px;">\n\t\t\t  \t\t\t<input class=" flo_right" style="font-size:12px;width:135px;" style-input elem-id="{{elemDef.id}}" ng-model="model.color" css-item="color" type="text" />\n\t\t\t\t  \t\t<a class="input_kuang flo_lef" ng-style="{backgroundColor: model.color}" ng-model="model.color" colorpicker="rgba" ></a>\n\n\t\t\t    \t</div>\n\t\t\t  \t</div>\n\t\t\t\t<div class="style_list_angel clearfix">\n\t\t\t\t\t<div>透明度</div>\n\t\t\t\t\t<div class="touming clearfix">\n\t\t\t\t  \t\t<p class="num"><input type="number" min="0" max="100" limit-input style="width:56px;height:24px;border-radius:0px;" style-input elem-id="{{elemDef.id}}" css-item="opacity" ng-model="model.opacity"/>%</p>\n\t\t\t\t\t\t<div style="width: 100px;" ui-slider min="0" max="100" ng-model="model.opacity"></div>\n\t\t\t\t  \t</div>\n\t\t\t  \t</div>\t\t\t\t  \t\n\t\t\t  \t<div class="style_list_angel clearfix" ng-show="elemDef.type == \'8\' || (\'\'+elemDef.type).charAt(0) == \'6\' || elemDef.type == \'2\' || (\'\'+elemDef.type).charAt(0) == \'5\'">\n\t\t\t  \t\t<div>\n\t\t\t\t\t\t边距\n\t\t\t\t\t\t<div class="touming clearfix">\n\t\t\t\t\t  \t\t<p class="num"><input min="0" max="20" limit-input class="input_kuang short" type="number" style-input css-item="padding" ng-model="model.paddingTop"/>px</p>\t\t\t\t\n\t\t\t\t\t  \t\t<div style="width: 100px;" ui-slider min="0" max="20" ng-model="model.paddingTop"></div>\n\t\t\t\t\t  \t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="style_list_angel clearfix" ng-show="elemDef.type == \'8\' || (\'\'+elemDef.type).charAt(0) == \'6\' || elemDef.type == \'2\' || (\'\'+elemDef.type).charAt(0) == \'5\'">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t行高\n\t\t\t\t\t\t<div class="touming clearfix">\n\t\t\t\t\t  \t\t<p class="num"><input min="0" max="3" limit-input step="0.1" class="input_kuang short" type="number" style-input css-item="lineHeight" ng-model="model.lineHeight"/>倍</p>\t\t\t\n\t\t\t\t\t  \t\t<div style="width: 100px;" use-decimals step="0.1" ui-slider min="0" max="3" ng-model="model.lineHeight"></div>\n\t\t\t\t\t  \t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t</div>\n\t\t</section>\n\t\t<section>\n\t\t\t<div class="style_list" ng-click="showBorder = !showBorder; showBasic=false;showShadow=false;">\n\t\t\t\t<b class="caret" ng-show="showBorder"></b><b class="caret off" ng-show="!showBorder"></b>边框样式\n\t\t\t</div>\n\t\t\t<div ng-show="showBorder" class="style_con_hei">\n\t\t\t\t<div class="style_list_angel clearfix">\n\t\t\t\t\t边框尺寸\n\t\t\t\t\t<div class="touming clearfix">\n\t\t\t\t  \t\t<p class="num"><input class="input_kuang short" limit-input type="number" min="0" max="20" style-input css-item="borderWidth" ng-model="model.borderWidth"/>px</p>\t\t\t\t\n\t\t\t\t  \t\t<div style="width: 100px;" ui-slider min="0" max="20" ng-model="model.borderWidth"></div>\n\t\t\t\t  \t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="style_list_angel clearfix">\n\t\t\t  \t\t<div>边框弧度</div>\n\t\t\t  \t\t<!-- <div class="touming clearfix">\n\t\t\t    \t\t<p class="num"><input type="number" min="0" max="100" limit-input style="width:56px;height:24px;border-radius:2px;" style-input css-item="borderRadius" ng-model="model.borderRadiusPerc" />%</p>  \t\t\n\t\t\t\t  \t\t<div class="num" style="width:100px;" ui-slider min="0" max="100" ng-model="model.borderRadiusPerc"></div>\n\t\t\t    \t</div> -->\n\t\t\t    \t<div class="touming clearfix">\n\t\t\t    \t\t<p class="num"><input class="input_kuang short" type="number" min="0" max="{{maxRadius}}" limit-input style-input css-item="borderRadius" ng-model="model.borderRadius" />px</p>  \t\t\n\t\t\t\t  \t\t<div class="num" style="width:100px;" ui-slider min="0" max="{{maxRadius}}" ng-model="model.borderRadius"></div>\n\t\t\t    \t</div>\n\t\t\t  \t</div>\t\n\t\t\t\t<div class="style_list_angel clearfix">\n\t\t\t\t\t<div class="flo_lef">边框样式</div>\n\t\t\t\t\t<div class="flo_right">\n\t\t\t\t\t\t<select style="border:1px solid #ccc" style-input css-item="borderStyle" ng-model="model.borderStyle">\n\t\t\t\t\t\t\t<option value="solid">直线</option>\n\t\t\t\t\t\t\t<option value="dashed">破折线</option>\n\t\t\t\t\t\t\t<option value="dotted">点状线</option>\n\t\t\t\t\t\t\t<option value="double">双划线</option>\n\t\t\t\t\t\t\t<option value="groove">3D凹槽</option>\n\t\t\t\t\t\t\t<option value="ridge">3D垄状</option>\n\t\t\t\t\t\t\t<option value="inset">3D内嵌</option>\n\t\t\t\t\t\t\t<option value="outset">3D外嵌</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t  \t</div>\n\t\t\t\t<div class="style_list_angel clearfix">\n\t\t\t\t\t<div class="">边框颜色</div>\n\t\t\t\t\t<div class="clearfix" style="margin-top:10px;">\n\t\t\t\t\t\t<input class="flo_right" style="font-size:12px;width:135px;" style-input ng-model="model.borderColor" css-item="borderColor" type="text" />\n\t\t\t\t  \t\t<a class="input_kuang flo_lef" ng-style="{backgroundColor: model.borderColor}" ng-model="model.borderColor" colorpicker="rgba"></a>\n\t\t\t    \t</div>\n\t\t\t  \t</div>\n\t\t\t  \t<div class="style_list_angel clearfix">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t旋转\n\t\t\t\t\t\t<div class="touming clearfix">\n\t\t\t\t\t  \t\t<p class="num"><input min="0" max="360" limit-input style-input css-item="transform" class="input_kuang short" type="number"  ng-model="model.transform"/>度</p>\t\t\t\n\t\t\t\t\t  \t\t<div style="width: 100px;" ui-slider min="0" max="360" ng-model="model.transform"></div>\n\t\t\t\t\t  \t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\t\t  \t\n\t\t\t</div>\n\t\t</section>\n\t\t<section>\n\t\t\t<div class="style_list" ng-click="showShadow = !showShadow; showBasic=false;showBorder=false;">\n\t\t\t\t<b class="caret" ng-show="showShadow"></b><b class="caret off" ng-show="!showShadow"></b>阴影样式\n\t\t\t</div>\n\t\t\t<div ng-show="showShadow" class="style_con_hei">\n\t\t\t\t<div class="style_list_angel clearfix">\n\t\t\t\t\t大小\n\t\t\t\t\t<div class="touming clearfix">\n\t\t\t\t\t\t<div style="width: 100px;" ui-slider min="0" max="20" ng-model="tmpModel.boxShadowSize"></div>\n\t\t\t\t\t\t<p class="num"><input limit-input class="input_kuang short" min="0" max="20" type="number" style-input css-item="boxShadow" ng-model="tmpModel.boxShadowSize"/>px</p>\n\t\t\t\t\t</div>\n\t\t\t  \t</div>\n\t\t\t  \t<div class="style_list_angel clearfix">\n\t\t\t\t\t模糊\n\t\t\t\t\t<div class="touming clearfix">\n\t\t\t\t\t\t<div style="width: 100px;" ui-slider min="0" max="20" ng-model="tmpModel.boxShadowBlur"></div>\n\t\t\t\t\t\t<p class="num"><input limit-input class="input_kuang short" min="0" max="20" type="number" style-input css-item="boxShadow" ng-model="tmpModel.boxShadowBlur"/>px</p>\n\t\t\t\t\t</div>\n\t\t\t  \t</div>\n\t\t\t  \t<div class="style_list_angel clearfix">\n\t\t\t\t\t<div class="">颜色</div>\n\t\t\t\t\t<div class="clearfix" style="margin-top:10px;">\n\t\t\t    \t\t<input class=" flo_right" style="font-size:12px;width:135px;" style-input  ng-model="tmpModel.boxShadowColor" css-item="boxShadow" type="text" />\t\t\t\t\t\t\n\t\t\t\t\t\t<a class="input_kuang flo_lef" ng-style="{backgroundColor: tmpModel.boxShadowColor}" ng-model="tmpModel.boxShadowColor" colorpicker="rgba" colorpicker-fixed-position="true"></a>\n\n\t\t\t    \t</div>\n\t\t\t\t</div>\t\n\t\t\t  \t<div class="style_list_angel clearfix">\n\t\t\t\t\t方向\n\t\t\t\t\t<div class="clearfix" style="margin-top:15px;">\n\t\t\t\t  \t\t<div class="fr">\n\t\t\t\t  \t\t\t<p class="num" style="margin-top:18px;"><input style="width:58px;margin-right:5px;" min="0" max="359" limit-input class="input_kuang" type="number" style-input css-item="boxShadow" ng-model="tmpModel.boxShadowDirection"/>度</p></div>\t\t\t\t\t\n\t\t\t\t  \t\t<angle-knob class="flo_lef" style="display: block;position: relative;height: 60px;margin-left:60px;"></angle-knob>\n\t\t\t\t  \t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</section>\n\t\t<div class="modal-footer">\n\t\t    <a class="btn-main login" style="width: 120px;" ng-click="clear()">清除全部样式</a>\n\t\t</div>\n\t</div>\n</div>\n')}]),n.module("scene/console/tel.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/tel.tpl.html",'<div class="button_console">\n\t<div class="modify_area  tel_title">\n\t\t<span ng-repeat = "button in buttons track by $index" ng-class = "{spanborder: $index == btnIndex}">\n\t\t\t<!-- <a ng-class = "{btn1: $index==0, btn2: $index == 1, btn3: $index ==2, btn4: $index ==3}" ng-click = "chooseTelButton(button, $index, $event)" selected><span class = "glyphicon glyphicon-earphone"></span>{{button.text}}</a> -->\n\t\t\t<a ng-style = "button.btnStyle" ng-click = "chooseTelButton(button, $index, $event)" selected>{{button.text}}</a>\n\t\t</span>\n\t</div>\n\t<div class = "divider" style = "margin-top: 10px; height: 1px; background: #ccc;"></div>\n\t<div class="modify_area">\n\t\t<span class="label" style="font-weight:lighter;">按钮名称：&nbsp;</span>\n\t\t<input type="text" ng-model="model.title" ng-keyup="$event.keyCode == 13 ? confirm() : null"/>\n\t</div>\n\n\t<div class="modify_area">\n\t\t<span class="label" style="font-weight:lighter;">手机/电话：</span>\n\t\t<input class = "tel-button" type="text" placeholder = "010-88888888" ng-model="model.number" ng-keyup="$event.keyCode == 13 ? confirm() : null" ng-focus = "removePlaceHolder($event)" ng-blur = "addPlaceHolder()"/>\n\t</div>\n\t\n</div>\n<div class="modal-footer">\n    <a class="btn-main login" style="width: 88px;" ng-click="confirm()">确定</a>\n    <a class="btn-grey0 cancel" style="width: 88px;" ng-click="cancel()">取消</a>\n</div>')}]),n.module("scene/console/video.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/video.tpl.html",'<div class="video_console">\n\t<div class="modify_area" style="height:auto">\n\t\t<div>\n\t\t\t<span class="label">视频通用代码：</span>\n\t\t\t<span class="video_code"></span>\n\t\t</div>\n\t\t<div class="video_tip">\n\t\t\t<textarea style="border-radius:0px;" class = "video_src" ng-model="model.src" ng-keyup="$event.keyCode == 13 ? confirm() : null"/>\n\t\t</div>\n\t\t<div class="video_tip">将视频的通用代码粘贴到文本框里即可。</div>\n\t\t<div class="video_tip">建议使用视频：<a href="http://www.youku.com/" target="_blank"><ins>优酷</ins></a>、<a href="http://www.tudou.com/" target="_blank"><ins>土豆</ins></a>、<a href="http://v.qq.com/" target="_blank"><ins>腾讯视频</ins></a></div>\n\t</div>\t\n</div>\n<div class="modal-footer">\n    <a class="btn-main login" style="width: 88px;" ng-click="confirm()">确定</a>\n    <a class="btn-grey0 cancel" style="width: 88px;" ng-click="cancel()">取消</a>\n</div>')}]),n.module("scene/create.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/create.tpl.html",'<div class="creat_head">\n  <div class="creat_head_con clearfix">\n    <div class="creat_logo"><a href="#/main" ng-click="stopCopy()"><img ng-src="{{CLIENT_CDN}}images/logo.png" /></a></div>\n    <div class="creat_con clearfix">\n        <ul class="comp_panel clearfix">\n          <li comp-draggable="panel" ctype="2" class="comp-draggable text" title="请拖动到编辑区域" ng-click="createComp(\'2\');">\n            <span>文本</span>\n          </li>\n          <li comp-draggable="panel" ctype="3" class="comp-draggable bg" title="请拖动到编辑区域" ng-click="createComp(\'3\');">\n            <span>背景</span>\n          </li>\n          <li comp-draggable="panel" ctype="9" class="comp-draggable music" title="请拖动到编辑区域" ng-click="createComp(\'9\');">\n            <span>音乐</span>\n          </li>  \n          <li ng-if="isAllowToAccessScrollImage" comp-draggable="panel" ctype="v" class="comp-draggable vedio" title="请拖动到编辑区域" ng-click="createComp(\'v\');">\n            <span>视频</span>\n          </li>        \n          <li comp-draggable="panel" ctype="4" class="comp-draggable image" title="请拖动到编辑区域" ng-click="createComp(\'4\');">\n            <span>图片</span>\n          </li>\n          <li comp-draggable="panel" ctype="5" class="comp-draggable textarea" title="请拖动到编辑区域" ng-click="createComp(\'5\');">\n            <span>输入框</span>\n          </li>\n          <li comp-draggable="panel" ctype="6" class="comp-draggable button" title="请拖动到编辑区域" ng-click="createComp(\'6\');">\n            <span>按钮</span>\n          </li>\n          <li ng-if="isAllowToAccessScrollImage" comp-draggable="panel" ctype="p" class="comp-draggable images" title="请拖动到编辑区域" ng-click="createComp(\'p\');">\n            <span>图集</span>\n          </li>\n          <li comp-draggable="panel" ctype="8" class="comp-draggable phone" title="请拖动到编辑区域" ng-click="createComp(\'8\');">\n            <span>电话</span>\n          </li>          \n          <li comp-draggable="panel" ctype="g101" class="comp-draggable contact" title="请拖动到编辑区域" ng-click="createCompGroup(\'g101\');">\n            <span>联系人</span>\n          </li>          \n          <li ng-click="openPageSetPanel()" class="texiao">\n            <span><a id = "toggle_button" class="page_effect" >特效</a></span></li>\n        </ul>\n  </div>\n    <div class="create-action">\n        <ul>\n            <!--<li class="act-border save"><span class="create-save" ng-click="saveScene(true)">保存</span></li>-->\n            <li class="publish"><span class="btn-main" style="height:35px;margin-top:8px;font-size:14px;padding-top:10px;" ng-click="publishScene()">保存场景</span></li>\n            <li class="act-border quit" ng-show="false"><span class="create-quit" ng-click="exitScene()">退出</span></li> \n        </ul>\n    </div>\n    <div ng-hide="showToolBar();">\n        <div ng-show="isEditor" style="position: absolute;right: -200px;top: 20px;">\n            <select ng-model="tpl.obj.scene.isTpl">\n                <option value="0">非模板</option>\n                <option value="1">保存为pc模板</option>\n                <option value="2">保存为移动端模板</option>\n            </select>\n        </div>\n    </div>\n</div>\n</div>\n<div class="create_scene">\n  <div class="main clearfix">\n      <div class="content">\n          <div class="create_left">\n            <tabset justified="true">\n              <tab heading="页面模版" class="hint--bottom hint--rounded" style = "width: 290px;">\n                  <tabset justified="true" class="tpl_tab">\n                    <tab ng-repeat="pageTplType in pageTplTypes" heading="{{pageTplType.name}}" ng-click="getPageTplsByType(pageTplType.value)">\n                      <div class="nav2 clearfix" dropdown >\n                        <div class="others dropdown-toggle" ng-show="otherCategory.length > 0"><span></span></div>\n                        <ul class="clearfix nav2_list">\n                          <li ng-class="{active:childCat.id == categoryId}" ng-click="getPageTplTypestemp(childCat.id ,bizType)" ng-repeat="childCat in childCatrgoryList">{{childCat.name}}</li>\n                        </ul>\n                        <ul class="clearfix nav2_other dropdown-menu">\n                          <li ng-class="{active:othercat.id == categoryId}" ng-click="getPageTplTypestemp(othercat.id ,bizType)" ng-repeat="othercat in otherCategory">{{othercat.name}}</li>\n                        </ul>                        \n                      </div>\n                      <ul id="tpl_panel" class="page_tpl_container clearfix">\n                        <li class="page_tpl_item" ng-repeat="pageTpl in pageTpls" class="comp-draggable" title="点击插入编辑区域" ng-click="insertPageTpl(pageTpl.id);">\n                          <img ng-src="{{PREFIX_FILE_HOST + pageTpl.properties.thumbSrc}}" />\n                        </li>\n                      </ul>\n                    </tab>\n                  </tabset>\n              </tab>\n            </tabset>\n          </div> \n          <div class="phoneBox">\n            <div >\n                <div class="top"></div>\n                <div class = "phone_menubar"></div>\n                <div class="scene_title_baner">\n                  <div ng-bind="tpl.obj.scene.name" class="scene_title"></div>\n                </div>\n                <div class="nr sortable"></div>\n                <div class="bottom"></div>\n                <div class = "tips">为了获得更好的使用，建议使用谷歌浏览器（chrome）、360浏览器、IE11浏览器。</div>\n            </div>\n            <div class="phone_texiao">\n                <div id="editBG" style="display: none;"><span class="hint--right hint--rounded" data-hint="选择新背景">背景</span><div style="margin:10px 0;border-bottom: 2px solid #666;"></div><a style = "color: #666;" class="hint--bottom hint--rounded" data-hint="删除当前页面的背景"><span ng-click="removeBG($event)" class="glyphicon glyphicon-remove"></span></a></div>\n                <div id="editBGAudio" ng-click="openAudioModal()" ng-show="tpl.obj.scene.image.bgAudio"><span class="hint--right hint--rounded" data-hint="选择新音乐">音乐</span><div style="margin:10px 0;border-bottom: 2px solid #666;"></div><a style = "color: #666;" class="hint--bottom hint--rounded" data-hint="删除当前页面的音乐"><span ng-click="removeBGAudio($event)" class="glyphicon glyphicon-remove"></span></a></div>\n                <div id="editScratch" ng-click="openOneEffectPanel(tpl.obj.properties)" ng-show="tpl.obj.properties"><span class="hint--right hint--rounded" data-hint="选择新特效">{{effectName}}</span><div style="margin:10px 0;border-bottom: 2px solid #666;"></div><a style = "color: #666;" class="hint--bottom hint--rounded" data-hint="删除当前页面特效"><span ng-click="removeScratch($event)" class="glyphicon glyphicon-remove"></span></a></div>\n            </div>\n          </div>\n\n          <div id = "containment" class="create_right"> \n            <div class="guanli">页面管理</div>\n            <div class = "nav_top">\n              <div class="nav_top_list">\n                <a ng-click="duplicatePage()" class="">复制</a>\n                <a class="" ng-click = "deletePage($event)" ng-show = "pages.length != 1">删除</a>\n              </div>\n             \n              <div class = "btn-group">\n                <div class="dropdown">\n                  <div id = "page_panel" ng-show="showPageEffect" class="dropdown-menu1 panel panel-default">\n                    <ul class = "effect_list">\n                      <li class = "effect" ng-repeat = "effect in effectList" ng-click = "openOneEffectPanel(effect)">\n                        <div class = "effect_img"><img ng-src="{{effect.src}}"></div>\n                        <div class = "effect_info">{{effect.name}}</div>\n                      </li>\n                    </ul>\n                  </div>\n\n                  <div id = "page_panel" ng-if="effectType == \'scratch\'" class="dropdown-menu1 panel panel-default">\n\n                    <div class="panel-heading">涂抹设置</div>\n                    <div class="panel-body">\n                      <form class="form-horizontal" role="form">\n                        <div class="form-group form-group-sm clearfix" style="margin-bottom:0;">\n                          <label class="col-sm-5 control-label">覆盖特效</label>\n                          <div class="col-sm-7">\n                            <select ng-model = "scratch.image" ng-options = "scracthImage.name for scracthImage in scratches"  style="width:115px;">\n                            </select>\n                          </div>\n                        </div>\n                        <div class="form-group form-group-sm" style="margin-bottom:0px;margin-top:5px;">\n                          <label class="col-sm-5 control-label" style="padding-top:6px;">覆盖图片</label>\n                          <div class="col-sm-7">\n                            <a ng-click = "openUploadModal()" class = "auto_img btn-main btn-success ">自定义图片</a>\n                          </div>\n                        </div>\n                        <div class = "divider" style="margin-top:6px;"></div>\n                        <div class = "well" style="margin-bottom:0px;">\n                          <img class = "scratch" ng-src="{{scratch.image.path}}"/>\n                        </div>\n                        <div class = "divider"></div>\n                        <div class="form-group form-group-sm" style="margin-bottom:10px;">\n                          <label for="inputEmail3" class="col-sm-5 control-label">涂抹比例</label>\n                          <div class="col-sm-7">\n                            <select ng-model = "scratch.percentage" ng-options = "percentage.name for percentage in percentages">\n                            </select>\n                          </div>\n                        </div>\n                         <div class="form-group form-group-sm" style="margin-bottom:10px;">\n                          <label for="inputEmail3" class="col-sm-5 control-label">提示文字</label>\n                          <div class="col-sm-7">\n                            <input type="text" ng-model = "scratch.tip" id="inputEmail3" placeholder="提示文字" maxlength = "15">\n                          </div>\n                        </div>\n                        <div class="form-group form-group-sm" style="margin-bottom:0px;">\n                          <div class="modal-footer" style="padding-bottom:0px;padding-top:0px;">\n                            <a dropdown-toggle type="button" ng-click = "saveEffect(scratch)" class="btn-main" style="width:88px;border:none;">保存</a>\n                            <a dropdown-toggle type="button" ng-click = "cancelEffect()" class="btn-grey0" style="width:88px;">取消</a>\n                          </div>\n                        </div>\n                      </form>\n                    </div>\n                  </div>\n\n                  <div id = "page_panel" ng-if="effectType==\'finger\'" class="dropdown-menu1 panel panel-default">\n\n                    <div class="panel-heading">指纹设置</div>\n                    <div class="panel-body">\n                      <form class="form-horizontal" role="form">\n                        <div class="form-group form-group-sm" style="margin-bottom:10px;">\n                          <label class="col-sm-5 control-label">背景图片</label>\n                          <div class="col-sm-7">\n                            <select ng-model = "finger.bgImage" ng-options = "bgImage.name for bgImage in fingerBackgrounds">\n                            </select>\n                          </div>\n                        </div>\n                        <div class="form-group form-group-sm" style="margin-bottom:10px;">\n                          <label class="col-sm-5 control-label">指纹图片</label>\n                          <div class="col-sm-7">\n                            <select ng-model = "finger.zwImage" ng-options = "zwImage.name for zwImage in fingerZws">\n                            </select>\n                          </div>\n                        </div>\n                        <div class = "divider"></div>\n                        <div class = "well" style="margin-bottom:15px;">\n                          <img class = "finger_bg" ng-src="{{finger.bgImage.path}}"/>\n                        \n                            <img class = "finger_zw" ng-src="{{finger.zwImage.path}}"/>\n                          \n                        </div>\n                        <div class="form-group form-group-sm" style="margin-bottom:0px;">\n                          <div class="modal-footer" style="padding-bottom:0px;padding-top:0px;">\n                            <a class="btn-main" dropdown-toggle type="button" ng-click = "saveEffect(finger)" class="btn btn-success btn-sm btn-main login" style="width:88px;">保存</a>\n                            <a dropdown-toggle type="button" ng-click = "cancelEffect()" class="btn-grey0" style="width:88px;">取消</a>\n                          </div>\n                        </div>\n                      </form>\n                    </div>\n                  </div>\n                  <div id = "page_panel" ng-show="effectType == \'money\'" class="dropdown-menu1 panel panel-default">\n                    <div class="panel-heading">数钱设置</div>\n                    <div class="panel-body">\n                      <div class = "well" style="margin-bottom:15px;">\n                          <img ng-src="{{CLIENT_CDN + \'images/create/money_thumb2.jpg\'}}"/>      \n                      </div>\n                      <div>\n                        <span>文字提示：</span>\n                        <span class="fr" style="width: 140px;"><input type="text" ng-model="money.tip" placeholder="让你数到手抽筋"></span>\n                      </div>\n                      <div class="form-group form-group-sm" style="margin-bottom:0px;">\n                        <div class="modal-footer" style="padding-bottom:0px;padding-top:0px;">\n                          <a class="btn-main" dropdown-toggle type="button" ng-click = "saveEffect(money)" class="btn btn-success btn-sm btn-main login" style="width:88px;">保存</a>\n                          <a dropdown-toggle type="button" ng-click = "cancelEffect()" class="btn-grey0" style="width:88px;">取消</a>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div ng-include="\'scene/effect/falling.tpl.html\'"></div>\n                </div>\n              </div>\n            </div>\n\n            <div class="nav_content">\n              <ul id = "pageList" ui-sortable = "sortableOptions" ng-model="pages">\n                <li class = "blurClass" ng-repeat="page in pages track by $index" ng-click="navTo(page, $index, $event)" ng-init = "editableStatus[$index] = false" ng-class="{current: pageNum-1 == $index}" blur-children>\n                    <span style = "float: left; margin-top: 17px; background: #fff; color: #666; font-weight: 200;border-radius:9px;width:18px;height:18px;padding:0px;text-align:center;line-height:18px;" class = "badge">{{$index+1}}</span>\n                    <span style = "margin-left: 17px;font-size:14px;" >{{page.name}}</span>\n                    <input style = "width: 80px; height: 25px; margin-top: 8px; margin-left: 10px; color: #999;" type = "text" ng-model = "page.name" ng-show = "editableStatus[$index]" ng-blur = "editableStatus[$index] = false;savePageNames(page, $index)" ng-focus = "getOriginPageName(page)" maxlength = "7" custom-focus/>                   \n                </li>\n              </ul>\n              <div class = "page-list-label" ng-show="isEditor && pageList == true">\n                  <label ng-repeat = "allchild in pageLabelAll">\n                      <input type="checkbox" name="" value="" ng-model = "allchild.ischecked">{{allchild.name}}\n                  </label>\n                  <div class="select-labels">\n                      <a ng-click="pageChildLabel()">确定</a>\n                  </div>\n              </div>               \n            </div>\n            <div class="nav_bottom">\n              <a ng-click="insertPage()" class="" title="增加一页">+</a>\n             <!--  <a ng-click="duplicatePage()" class="duplicate_page">复制一页</a> -->\n            </div>\n\n            <div ng-show="isEditor">\n              <div class="btn-main" ng-click="chooseThumb()">选择本页缩略图</div>\n              <img width="100" ng-src="{{PREFIX_FILE_HOST + tpl.obj.properties.thumbSrc}}"></img>\n            </div>\n          </div>\n      </div>\n  </div>\n</div>\n</div>\n<div ng-include="\'footer.tpl.html\'"></div>\n')}]),n.module("scene/createNew.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/createNew.tpl.html",'<div class="modal-header">\n    <span class="glyphicon glyphicon-exclamation-sign"></span>\n    <span>新建场景</span>\n</div>\n<form name="resetForm" novalidate class="login-form">\n    <div class="login_form">\n        <div class="alert alert-warning" role="alert" ng-show="authReason">\n            {{authReason}}\n        </div>\n        <div class="alert alert-danger" role="alert" ng-show="authError">\n            {{authError}}\n        </div>\n        <div class="input-wrap">\n            <input name="name" placeholder="请填写场景名称" type="text" ng-model="scene.name" required autofocus>            \n        </div>\n        \n        <div class="input-wrap">\n            <select ng-model="scene.type" ng-options="scenetype.name for scenetype in scene.types" >\n            </select>\n        </div>\n        <div class="input-wrap" ng-show = "false">\n            <select ng-model="scene.pageMode" ng-options="pagemode.name for pagemode in pagemodes"></select>\n        </div>\n\n        <div class="modal-footer">\n            <div class="btn-main" ng-click="create()" ng-disabled=\'form.$invalid\'>创&nbsp;&nbsp;建</div>\n            <div class="btn-grey0" ng-click="cancel()" ng-disabled=\'form.$invalid\'>取&nbsp;&nbsp;消</div>\n        </div>\n\n        <p>特别说明：根据相关部门要求，暂不允许药品，医疗机构，医疗器械场景内容发布，请您理解。<a href="javascript:void(0);" style="font-weight: 400; color: red;">请查看审核规则</a></p>\n    </div>\n</form>\n')}]),n.module("scene/effect/falling.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/effect/falling.tpl.html",'<div id = "page_panel" ng-if="effectType == \'fallingObject\'" class="dropdown-menu1 panel panel-default">\n    <div class="panel-heading">落物设置</div>\n    <div class="panel-body">\n      <form class="form-horizontal" role="form">\n        <div class="form-group form-group-sm" style="margin-bottom:10px;">\n          <label class="col-sm-5 control-label">环境图片</label>\n          <div class="col-sm-7">\n            <select ng-model = "falling.src" ng-options = "fallingObj.name for fallingObj in fallings">\n            </select>\n          </div>\n        </div>\n        <div class = "divider"></div>\n        <div class = "well" style="margin-bottom:15px;text-align: center;background-color: #ddd">\n          <img ng-src="{{falling.src.path}}"/>\n        </div>\n        <div class = "divider"></div>\n        <div class="form-group form-group-sm" style="margin-bottom:10px;">\n          <label class="col-sm-5 control-label">环境氛围</label>\n          <div class="col-sm-7">\n          \t<div style="line-height: 24px;font-size: 12px;"><span style="margin-right:39px;">弱</span><span style="margin-right:37px;">中</span><span>强</span></div>\n          \t<div style="width: 100px;" ui-slider min="1" max="3" ng-model="falling.density"></div>\n\n          </div>\n        </div>\n        \n        <div class="form-group form-group-sm" style="margin-bottom:0px;">\n          <div class="modal-footer" style="padding-bottom:0px;padding-top:0px;">\n            <a class="btn-main" dropdown-toggle type="button" ng-click = "saveEffect(falling)" class="btn btn-success btn-sm btn-main login" style="width:88px;">保存</a>\n            <a dropdown-toggle type="button" ng-click = "cancelEffect()" class="btn-grey0" style="width:88px;">取消</a>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>');
}]),n.module("scene/scene.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/scene.tpl.html",'\n<div ng-include="\'header.tpl.html\'"></div>\n<div class="choose_template min_contain">\n    <div class="main clearfix">\n        <div class="title">\n            空白自主创建，或者选择一个样例\n            <!-- <a class="btn-secondary" ng-click="createScene()">or自主创建</a> -->\n        </div>\n\n        <div class="scene_type clearfix">\n            <!--<div class="new_hot"><a ng-class="{hover: order==\'new\'}" ng-click="tplnew(\'new\')">最新场景</a><a ng-class="{hover: order==\'hot\'}" ng-click="tplnew(\'hot\')">热门场景</a></div>-->\n            <div class="scene_list">\n                <ul class="clearfix scene_cat">\n                    <li ng-class="{active : 0 == childcat}" ng-click="allpage(null,null)">全部</li>\n                    <li ng-class="{active : pageTplType.value == childcat}" ng-click="getPageTplsByType(pageTplType.value,pageTplType.id)" ng-repeat="pageTplType in pageTplTypes">{{pageTplType.name}}</li>\n                </ul>\n                <ul class="clearfix child_cat">\n                    <li ng-click="getPageTpls(type,childCat.bizType,childCat.id)" ng-class="{active:childCat.id == categoryId}" ng-repeat="childCat in childCatrgoryList">{{childCat.name}}</li>\n                </ul>                \n            </div>\n        </div>\n        \n        <div class="content clearfix">\n            <div class="mask">\n                <ul>\n                    <li ng-click = "createScene()" title="创建一个空白场景">                        \n                        <div style="height:240px; background-color:#bdd5ef;"><i class = "fa fa-plus"></i></div>\n                        <p style="height:100px;">自主创建<i class="add_icon"></i></p>                  \n                    </li>\n                    <li ng-repeat="tpl in tpls track by $index" ng-class="{mr0:$index%4 == 2}">         \n                        <div class = "roll" ng-hover>\n                            <div class = "mask-floor" style = "display: none">\n                            </div>\n                            <img style="width:235px;height:240px;" ng-src="{{PREFIX_FILE_HOST + tpl.image.imgSrc}}" alt="" />\n                            <div class="my_xinxi"><p>{{tpl.name}}<i class="add_icon"></i></p>\n                                <p style="background-color:#FFF;color:#999;padding-right:10px;">作者：{{tpl.userName}}</p>\n                            </div>\n                            <a class = "preview_scene btn" href="{{VIEW_URL + \'v-\' + tpl.code}}" target="_blank">预览</a>\n                            <a class = "preview_scene edit_scene btn" ng-click="createScene(tpl)">就这个了</a>\n                        </div>                \n                    </li>\n                </ul>\n            </div>\n        </div>\n        <div class="clearfix fl" ng-show="tpls.length > 0">\n            <pagination style="float: left" first-text="首页" last-text="尾页" previous-text="上一页" next-text="下一页" max-size="10" items-per-page="11" total-items="totalItems" ng-model="currentPage" ng-change="pageChanged(currentPage)" boundary-links="true" rotate="true" num-pages="numPages"></pagination>\n            <div class="current_page">\n                <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null">\n                <a ng-click="pageChanged(toPage)" class="go">GO</a>\n                <span>当前: {{currentPage}} / {{numPages}} 页</span>\n            </div>\n        </div>\n    </div>\n</div>\n<div ng-include="\'footer.tpl.html\'"></div>\n</script>')}]),n.module("usercenter/console/relAccount.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/relAccount.tpl.html",'<div class="transfer">\n\t<div class="clearfix">\n\t\t<div class="alert" style="text-align: center;background-color: #f0f0f0;" ng-show="relErr">{{relErr}}</div>\n\t\t<div class="transfer_list">\n\t\t\t<label>登录账号</label><input type="text" ng-model="user.email" ng-blur="checkUpperCase();" placeholder="输入帐号"/>\n\t\t</div>\n\t\t<div class="transfer_list">\n\t\t\t<label>密码</label><input type="password" style="float:right;" maxlength = "12" ng-model="user.password" placeholder="输入密码"/>\n\t\t</div>\t\n\t\t<div class="modal-footer">\n\t\t    <a class="btn-main login" style="width: 88px;" ng-click="relAccount()">立即绑定</a>\n\t\t    <a class="btn-grey0 cancel" style="width: 88px;" ng-click="cancel()">取消</a>\n\t\t</div>\n\t</div>\n</div>')}]),n.module("usercenter/request_reg.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/request_reg.tpl.html",'<div class="request_reg">\n\t<div class="close" ng-click="cancel()">x</div>\n\t<div class="erwei" qr-code qr-url="{{PREFIX_CLIENT_HOST + \'/m/#/wxLogin?id=\' + currentUser.id}}"></div>\n<!-- \t<div class="erwei" qr-code qr-url="{{PREFIX_CLIENT_HOST + \'/m/#/wxreg?id=\' + currentUser.id}}"></div>\t -->\t\n</div>')}]),n.module("usercenter/transfer.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/transfer.tpl.html",'<div class="transfer">\n\t<div  ng-show="transfer">\n\t\t<p>我的积分<span>{{xdCount | fixnum}}</span>个</p>\n\t\t<div class="transfer_list">\n\t\t\t<label>转送账号</label><input type="text" ng-model="userXd.toUser" /><!-- <span ng-hide="actionerror || !submit" class="right"><img ng-src="{{CLIENT_CDN}}images/dui.png" /></span> --><span ng-show="actionerror" class="error"><img ng-src="{{CLIENT_CDN}}images/wrong.png" /></span>\n\t\t\t<div ng-show="actionerror">{{actionerror}}</div>\n\t\t</div>\n\t\t<div class="transfer_list">\n\t\t\t<label>转送数目</label><input type="text" maxlength = "12" ng-model="userXd.xdCount" /><!-- <span ng-hide="retrieverror || !submit" class="right"><img ng-src="{{CLIENT_CDN}}images/dui.png" /></span> --><span ng-show="retrieverror" class="error"><img ng-src="{{CLIENT_CDN}}images/wrong.png" /></span>\n\t\t\t<div ng-show="retrieverror">{{retrieverror}}</div>\n\t\t</div>\t\n\t\t<div class="modal-footer">\n\t\t    <a class="btn-main login" style="width: 88px;" ng-click="confirm()">确认</a>\n\t\t    <a class="btn-grey0 cancel" style="width: 88px;" ng-click="cancel()">取消</a>\n\t\t</div>\n\t\t<div class="action" style="text-align:center;background-color:#CCC;padding:3px 0;"><a style="font-size:12px;" href="javascript:void(0);" target="_blank" >积分转送是用户个人行为，请注意防范风险！</a></div>\n\t</div>\n\t<div ng-hide="transfer" style="text-align:center;" id="transfer_mes">\n\t\t<p>你已为<span style="padding:0 15px">{{userXd.toUser}}</span>成功转送<span style="padding:0 15px">{{userXd.xdCount | fixnum}}</span>个积分！</p>\n\t\t<a class="btn-grey0 cancel" style="width: 88px;" ng-click="cancel()">关闭</a>\n\t</div>\n</div>')}]),n.module("usercenter/usercenter.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/usercenter.tpl.html",'<div ng-include="\'header.tpl.html\'"></div>\n<div id = "usercenter" class="min_contain">\n  <div class = "main clearfix">\n    <div class = "content">\n<!--       <div class = "page_header col-sm-10">用户中心</div>\n      <div class = "col-sm-2" style = "height: 50px; font-size: 14px; line-height: 50px;"><a href = "#/main"><span class = "glyphicon glyphicon-share-alt"></span>返回我的微课</a></div> -->\n        <div class = "user_contain clearfix">\n          <div class = "user_img" ng-mouseover = "showCustomButton=true" ng-mouseleave = "showCustomButton=false;">\n            <img ng-src="{{headImg ||(PREFIX_FILE_HOST + userinfo.headImg)}}" width="160px" height="160px" />\n            <div ng-show = "showCustomButton" class = "upload_button" ng-click = "customerUpload()">上传头像</div>\n          </div>\n          <div class="user_message">\n            <p>用户名：{{userinfo.name}}</p>\n            <p>我的积分：{{xdCounts | fixnum}}个 </p>\n            <p>站内信息：<a href="#/usercenter/message">{{msgCount}}</a>条</p>\n          </div>\n        </div>\n        <div class="tab_user" style = "padding: 0;">\n          <ul class="nav nav-tabs tabs-left clearfix">\n            <li ng-class="{active: tabid == \'userinfo\'}"><a ng-click="goBaseInfo()">基础信息</a></li>\n            <li ng-class="{active: tabid == \'account\'}"><a ng-click="goAccount()">账号管理</a></li>\n            <li ng-class="{active: tabid == \'xd\'}"><a ng-click="goXd()">我的积分</a></li>\n             <li ng-class="{active: tabid == \'reset\'}" ng-if="!userinfo.noRel"><a ng-click="goReset()">修改密码</a></li>\n             <li ng-class="{active: tabid == \'message\'}"><a ng-click="goMessage()">站内消息</a></li>\n          </ul>\n        </div>        \n      <div class="">\n        <div class="tab-content">\n          <div class="tab-pane" ng-class="{active: tabid == \'userinfo\'}" id="home">\n            <div class="panel panel-default" ng-init = "isEditable = false">\n              <div class="panel-body">\n                <fieldset ng-disabled  = "!isEditable">                 \n                  <form class="form-horizontal" role="form" style="margin-left:220px;margin-top:25px;">\n                    <div class="form-group" style="margin-bottom: 22px;">\n                      <label for="inputPassword3" class="col-sm-2 control-label">登录账号</label>\n                      <div class="col-sm-6" style="top: 6px;">{{userinfo.noRel || userinfo.loginName}}</div>\n                    </div>\n                  <div class="form-group">\n                    <label for="inputEmail3" class="col-sm-2 control-label">用户名</label>\n                    <div class="col-sm-6">\n                      <input type="text" class="form-control" ng-model = "userinfo.name" id="inputEmail3" placeholder="用户名" maxlength = "12">\n                    </div>\n                  </div>\n                  <div class="form-group">\n                    <label class="col-sm-2 control-label">性别</label>\n                    <div class="col-sm-6">\n                      <label class="radio-inline">\n                        <input type="radio" ng-model = "userinfo.sex" id="inlineRadio1" value="1"> 男\n                      </label>\n                      <label class="radio-inline">\n                        <input type="radio" ng-model = "userinfo.sex" id="inlineRadio2" value="2"> 女\n                      </label>\n                    </div>\n                  </div>\n                  <div class="form-group">\n                    <label for="inputEmail3" class="col-sm-2 control-label">手机</label>\n                    <div class="col-sm-6">\n                      <input type="text" class="form-control" ng-model = "userinfo.phone" id="inputEmail3" placeholder="手机">\n                    </div>\n                  </div>\n                  <div class="form-group">\n                    <label for="inputPassword3" class="col-sm-2 control-label">QQ</label>\n                    <div class="col-sm-6">\n                      <input type="text" class="form-control" ng-model = "userinfo.qq" id="inputPassword3" placeholder="QQ">\n                    </div>\n                  </div>\n                  <div class="form-group">\n                    <label for="inputPassword3" class="col-sm-2 control-label">座机</label>\n                    <div class="col-sm-6">\n                      <input type="text" class="form-control" ng-model = "userinfo.tel" id="inputPassword3" placeholder="座机">\n                    </div>\n                  </div>\n                  <div class="form-group">\n                    <div>\n                      <script type="text/javascript" src="http://api.geetest.com/get.php?gt=1ebc844c9e3a8c23e2ea4b567a8afd2d"></script>\n                    </div>\n                  </div>\n                  <div class="form-group">\n                    <div class="col-sm-offset-2 col-sm-10">\n                      <a  class="btn-main" ng-show = "isEditable" ng-click = "saveUserInfo(userinfo)">保存</a>\n                      <a class="btn-grey0" ng-click = "cancel()" ng-show = "isEditable">取消</a>\n                    </div>\n                    <div class="col-sm-offset-2 col-sm-10"><a class="btn-main" ng-click = "isEditable = true;" ng-show="!isEditable"><span>编辑</span></a></div> \n                  </div>\n                </form>\n                </fieldset>\n                <!-- <form>\n                  <div validate-code>\n\n                  </div>\n                </form> -->\n              </div>\n            </div>\n          </div>\n          <div class="tab-pane" ng-class="{active: tabid == \'account\'}" id="account">\n            <div class="panel panel-default">\n              <div class="panel-body">\n                <div class="account">\n                  <div style = "border-bottom: 1px solid #E7E7E7; padding-bottom: 20px;">登录账号：\n                    <span>{{userinfo.noRel || userinfo.loginName}}</span>\n                    <span ng-if="userinfo.noRel"><a style="display:inline-block;" href="" ng-click="relAccount()"><img ng-src="{{CLIENT_CDN}}images/bangding.png"></a></span>\n                  </div> \n                  <div class="relInfo" ng-if="!userinfo.noRel">\n                    <div>账号关联后，可以通过关联账号直接登录！</div>\n                    <ul class="clearfix" style="margin-top: 20px;">\n                      <li class="wx" ng-class="{wxrel: wxRel}"><img ng-src="{{CLIENT_CDN}}images/wechatwhite.png">微信<span ng-if="!wxRel">未关联</span><span ng-if="wxRel">已关联</span></li>\n                      <li class="qq" ng-class="{qqrel: qqRel}"><img ng-src="{{CLIENT_CDN}}images/QQwhite.png">QQ<span ng-if="!qqRel">未关联</span><span ng-if="qqRel">已关联</span></li>\n                      <li class="wb" ng-class="{wbrel: wbRel}"><img ng-src="{{CLIENT_CDN}}images/weibowhite.png">微博<span ng-if="!wbRel">未关联</span><span ng-if="wbRel">已关联</span></li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="tab-pane" ng-class="{active: tabid == \'xd\'}" id="profile">\n            <div class="panel panel-default">\n              <div class="panel-body">\n                <div style="border-bottom:1px solid #E7E7E7;padding-bottom:20px;">\n                  <p style="float:right;padding-top:12px;"></p>\n                  <div style = "display: inline-block; width: auto;">我的积分: <span style = "font-size: 26px; font-weight: 500;color:#08a1ef;">{{xdCounts | fixnum}}</span>个&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span ng-click="openReg()" class="yaoqing" ng-show="sendXd.state"><em>邀请注册得积分</em></span></div>\n                </div>\n                <div class="xiudian clearfix">\n                  <div class="zhuansong"><img ng-click="openXd()" ng-src="{{CLIENT_CDN}}images/zengsong.png" title="转送积分" /></div>\n                  <div class="shiyong_xd">\n                    <ul class="clearfix">\n                      <li class="huode">获得积分<p>{{getXdStat.add | fixnum}}</p></li>\n                      <li class="song">转送积分<p>{{getXdStat.give | fixnum}}</p></li>\n                      <li class="shiyong">使用积分<p>{{getXdStat.pay | fixnum}}</p></li>\n                    </ul>\n                  </div>\n                </div>\n                <div class = "cols-sm-10 text-center" style = "margin-top: 30px;">\n                  <p style="text-align:left;padding-bottom:20px;">积分详情：</p>\n                  <table class = "table table-bordered col-sm-12 table-striped">\n                    <thead class = "text-center">\n                      <tr>\n                        <th class = "col-sm-2">类型</th>\n                        <th class = "col-sm-2">时间</th>\n                        <th class = "col-sm-2">数量</th>\n                        <th class = "col-sm-6">使用详情</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr ng-repeat = "xd in xdLogs" style = "text-valign:middle;">\n                        <td>{{xd.bizTitle}}</td>\n                        <td>{{xd.optTime | date:\'yyyy-MM-dd HH:mm:ss\'}}</td>\n                        <!-- <td>{{xd.bizType}}<a style = "height: 30px;" ng-href="{{VIEW_URL + \'v-\' + xd.sceneId}}">查看详情</a></td> -->\n                        <td>{{xd.xd | fixnum}}</td>\n                        <td>{{xd.remark}}</td>\n                      </tr>\n                    </tbody>\n                  </table>\n                  <div class="clearfix fl" ng-show = "xdLogs.length > 0">\n                        <pagination style="float: left" first-text="首页" last-text="尾页" previous-text="上一页" next-text="下一页" max-size="5" items-per-page="XdpageSize" total-items="XdCount" ng-click="XdpageChanged(XdcurrentPage)" ng-model="XdcurrentPage" boundary-links="true" rotate="true" num-pages="XdNumPages"></pagination>\n                        <div class="current_page">\n                            <input type="text" ng-model="XdcurrentPage" ng-keyup="$event.keyCode == 13 ? XdpageChanged(XdcurrentPage) : null">\n                            <a ng-click="XdpageChanged(XdcurrentPage)" class="go">GO</a>\n                            <span>当前: {{XdcurrentPage}} / {{XdNumPages}} 页</span>\n                        </div>\n                    </div>                                    \n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="tab-pane" ng-class="{active: tabid == \'reset\'}" ng-if="!userinfo.noRel" id="profile">\n            <div class="panel panel-default">\n<!--               <div class="panel-heading">修改密码</div> -->\n              <div class="panel-body">\n                <div class="alert alert-danger" style="border:none;" role="alert" ng-show="authError">\n                  {{authError}}\n                </div>\n              <form class="form-horizontal" role="form" style = "margin-top: 25px;margin-left:220px;">\n                <div class="form-group" style="margin-bottom: 22px;">\n                  <label for="inputPassword3" class="col-sm-2 control-label">登录账号</label>\n                  <div class="col-sm-6" style="top: 6px;">{{userinfo.noRel || userinfo.loginName}}</div>\n                </div>\n                <div class="form-group">\n                    <label for="inputPassword3" class="col-sm-2 control-label">原始密码</label>\n                    <div class="col-sm-6">\n                      <input type="password" class="form-control" ng-model = "password.old" id="inputPassword3" placeholder="原始密码">\n                    </div>\n                  </div>\n                  <div class="form-group">\n                    <label for="inputPassword3" class="col-sm-2 control-label">新密码</label>\n                    <div class="col-sm-6">\n                      <input type="password" class="form-control" ng-model = "password.newPw" id="inputPassword3" placeholder="新密码">\n                    </div>\n                  </div>\n                  <div class="form-group">\n                    <label for="inputPassword3" class="col-sm-2 control-label">重复密码</label>\n                    <div class="col-sm-6">\n                      <input type="password" class="form-control" ng-model = "password.confirm" id="inputPassword3" placeholder="重复密码">\n                    </div>\n                  </div>\n                  <div class="form-group">\n                    <div class="col-sm-offset-2 col-sm-10" style="margin-top:14px;">\n                      <button type="button" class="btn-main" style="width:88px;" ng-click = "reset()">保存</button>\n                    </div>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n          <div class="tab-pane" ng-class="{active: tabid == \'message\'}" id="profile" style = "background-color: #fff">\n            <div class="panel panel-default">\n              <div class="panel-body message-panel">\n                <div class="panel-heading" ng-show = "newMsgs.length > 0" style="padding-right:0px;">\n  <!--                 <span style = "float: left;">我的消息</span> -->\n                   <span style = "float: right;"><a style = "color: #08a1ef;" ng-click = "setRead(newMsgs)">全部设为已读</a></span>\n                </div>                \n                  <div class = "clearfix" style="border-bottom: 1px solid #F0F0F0;" ng-repeat = "newMsg in newMsgs">\n                    <div style="width:120px;float:left;" class = "mes_content mes_type" ng-class = "{new_msg: newMsg.status == 1,yidu_msg: newMsg.status == 2}"><span class = "glyphicon" ng-class = "{\'glyphicon-bullhorn\': newMsg.bizType==1,\'glyphicon-ban-circle\': newMsg.bizType==2, \'glyphicon-star-empty\': newMsg.bizType == 3}"></span> {{newMsg.type}}</div>\n                    <div class = "mes_content xiaoxi_con" ng-bind-html="newMsg.content">\n                    </div>\n                    <div class = "mes_content" style="width:165px;float:left;padding-right:0px;text-align:right;">{{newMsg.sendTime | date:\'yyyy-MM-dd HH:mm:ss\'}}</div>\n                  </div>\n                  <div ng-show = "newMsgs.length == 0">您暂时还没有消息！</div>\n                  <div class="clearfix fl" ng-show = "newMsgs.length > 0">\n                        <pagination style="float: left" first-text="首页" last-text="尾页" previous-text="上一页" next-text="下一页" max-size="5" items-per-page="pageSize" total-items="msgCount" ng-model="msgCurrentPage" boundary-links="true" rotate="true" num-pages="msgNumPages"></pagination>\n                        <div class="current_page">\n                            <input type="text" ng-model="toPage" ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null">\n                            <a ng-click="pageChanged(toPage)" class="go">GO</a>\n                            <span>当前: {{msgCurrentPage}} / {{msgNumPages}} 页</span>\n                        </div>\n                    </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div ng-include="\'footer.tpl.html\'"></div>')}]),n.module("templates-common",["directives/lineChart.tpl.html","directives/mapeditor.tpl.html","directives/page-tpl-types.tpl.html","directives/pieChart.tpl.html","directives/toolbar.tpl.html","security/login/form.tpl.html","security/login/reset.tpl.html","security/login/toolbar.tpl.html","security/register/otherregister.tpl.html","security/register/register.tpl.html"]),n.module("directives/lineChart.tpl.html",[]).run(["$templateCache",function(e){e.put("directives/lineChart.tpl.html",'<canvas id="chart-area" width="300" height="300"/>')}]),n.module("directives/mapeditor.tpl.html",[]).run(["$templateCache",function(e){e.put("directives/mapeditor.tpl.html",'\n\n<div class="col-lg-6">\n\t<div class="input-group">\n\t  <input type="text" class="form-control" ng-model="address" placeholder="请输入地名">\n\t  <span class="input-group-btn">\n\t    <button ng-click="searchAddress()" class="btn btn-default" type="button">搜索</button>\n\t  </span>\n\t</div><!-- /input-group -->\n</div><!-- /.col-lg-6 -->\n<div id="r-result"></div>')}]),n.module("directives/page-tpl-types.tpl.html",[]).run(["$templateCache",function(e){e.put("directives/page-tpl-types.tpl.html",'<div class="btn-group" style="padding: 0;">\n    <div class="dropdown">\n        <a class="btn dropdown-toggle first-child" data-toggle="dropdown" title="页面模板" style=" color: #fff;">\n            页面模板\n            &nbsp;\n            <b class="caret">\n            </b>\n        </a>\n        <ul class="dropdown-menu size-menu">\n            <li ng-repeat="type in pageTplTypes">\n                <a ng-href="#/scene/create/{{type.value}}?pageId=1">\n                    {{type.name}}\n                </a>\n            </li>\n        </ul>\n    </div>\n</div>')}]),n.module("directives/pieChart.tpl.html",[]).run(["$templateCache",function(e){e.put("directives/pieChart.tpl.html",'<canvas id="chart-area" width="300" height="300"/>')}]),n.module("directives/toolbar.tpl.html",[]).run(["$templateCache",function(e){e.put("directives/toolbar.tpl.html",'<div class="btn-toolbar" id="btn-toolbar"  data-role="editor-toolbar">\n    <div class="btn-group">\n        <div class="dropdown">\n            <a class="btn dropdown-toggle first-child" data-toggle="dropdown" title="文字大小">\n                <i class="glyphicon glyphicon-text-width">\n                </i>\n                &nbsp;\n                <b class="caret">\n                </b>\n            </a>\n            <ul class="dropdown-menu size-menu">\n                <li>\n                    <a dropdown-toggle data-edit="fontSize 7">\n                        48px\n                    </a>\n                </li>\n                <li>\n                    <a dropdown-toggle data-edit="fontSize 6">\n                        32px\n                    </a>\n                </li>\n                <li>\n                    <a dropdown-toggle data-edit="fontSize 5">\n                        24px\n                    </a>\n                </li>\n                <li>\n                    <a dropdown-toggle data-edit="fontSize 4">\n                        18px\n                    </a>\n                </li>\n                <li>\n                    <a dropdown-toggle data-edit="fontSize 3">\n                        16px\n                    </a>\n                </li>\n                <li>\n                    <a dropdown-toggle data-edit="fontSize 2">\n                        13px\n                    </a>\n                </li>\n                <li>\n                    <a dropdown-toggle data-edit="fontSize 1">\n                        12px\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </div>\n    <div class="btn-group">\n        <div class="dropdown">\n            <a class="btn dropdown-toggle" data-toggle="dropdown" title="文字颜色">\n                <i class="glyphicon glyphicon-font color-btn">\n                </i>\n                &nbsp;\n                <b class="caret">\n                </b>\n            </a>\n            <ul class="dropdown-menu color-menu">\n            </ul>\n        </div>\n    </div>\n    <div class="btn-group">\n        <div class="dropdown">\n            <a class="btn dropdown-toggle" data-toggle="dropdown" title="文字背景颜色">\n                <i class="glyphicon glyphicon-font bgcolor-btn">\n                </i>\n                &nbsp;\n                <b class="caret">\n                </b>\n            </a>\n            <ul class="dropdown-menu bgcolor-menu">\n            </ul>\n        </div>\n    </div>\n    <div class="btn-group">\n        <a class="btn" data-edit="bold" title="文字加粗">\n            <i class="glyphicon glyphicon-bold">\n            </i>\n        </a>\n    </div>\n    <div class="btn-group">\n        <a class="btn" data-edit="justifyleft" title="文字居左">\n            <i class="glyphicon glyphicon-align-left">\n            </i>\n        </a>\n        <a class="btn" data-edit="justifycenter" title="文字居中">\n            <i class="glyphicon glyphicon-align-center">\n            </i>\n        </a>\n        <a class="btn" data-edit="justifyright" title="文字居右">\n            <i class="glyphicon glyphicon-align-right">\n            </i>\n        </a>\n    </div>\n    <div class="btn-group">\n        <div class="dropdown">\n            <a class="btn dropdown-toggle createLink" data-toggle="dropdown" sceneid = "{{sceneId}}" title="先选中要加连接的文字"><i class="fa fa-link"></i></a>\n            <div class="dropdown-menu input-append" style="min-width: 335px;padding:4px 4px 14px 19px;">\n                <div class = "span4" style="margin-top:10px;">\n                    <input name = "external" ng-model = "link" class = "span2" type = "radio" value = "external" style="vertical-align:middle;margin:0px;"> 网站地址：\n                    <input class="span2" placeholder="URL" sceneid="{{sceneId}}" type="text" data-edit="createLink" value = "http://" style="border-radius:0px;width:200px;height:35px;" />\n                </div>\n                <!-- <input class="span2" placeholder="URL" sceneid="{{sceneId}}" type="text" data-edit="createLink" value="http://"/>   --> \n                <div class = "span4" style = "margin-top: 10px;">\n                     <input name = "internal" ng-model = "link" class = "span2" type = "radio" value = "internal" style="vertical-align:middle;margin:0px;"> 场景页面：\n                    <select class = "span2" style = "width: 200px;height:35px;" ng-options = "page.name for page in internalLinks" sceneid="{{sceneId}}" data-edit = "createLink" ng-model = "internalLink"></select> \n                </div>           \n                <div style="text-align:center"><a class="btn-main" style="color:#FFF; margin-top:20px;" dropdown-toggle>确定</a></div>\n            </div>\n        </div>        \n    </div>\n    <div class="btn-group">\n        <a class="btn" data-edit="unlink" title="清除超链接"><i class="fa fa-unlink"></i></a>\n    </div>\n    <div class="btn-group">\n        <a class="btn last-child" data-edit="RemoveFormat" title="清除样式">\n            <i class="fa fa-eraser">\n            </i>\n        </a>\n    </div>\n</div>')}]),n.module("security/login/form.tpl.html",[]).run(["$templateCache",function(e){e.put("security/login/form.tpl.html",'<div class = "login-form-section">\n  <div class = "login-content">\n    <form class = "loginForm" novalidate ng-show = "showLogin && !sendPassword">\n      <div class = "section-title">\n        <h3>一秀用户登录</h3>\n      </div>\n      <div class="error-wrap">\n        <div class="alert alert-danger" role="alert" ng-show="authReason">\n            {{authReason}}\n        </div>\n        <div class="alert alert-danger" role="alert" ng-show="authError">\n            {{authError}}\n        </div>\n      </div>\n      <div class="textbox-wrap">\n        <div class="input-group">\n          <span class="input-group-addon "><i class="fa fa-envelope"></i></span>\n          <input class = "form-control" id = "username" name="userEmail" placeholder="帐号" type="text" ng-model="user.email" ng-keyup="$event.keyCode == 13 ? login() : null" required autofocus add-class/>\n        </div>\n      </div>\n      <div class="textbox-wrap">\n        <div class="input-group">\n          <span class="input-group-addon "><i class="fa fa-key"></i></span>\n          <input class = "form-control" name="pass" placeholder="密码" type="password" ng-model="user.password" ng-keyup="$event.keyCode == 13 ? login() : null" required add-class/>\n        </div>\n      </div>\n      <div class="textbox-wrap validate clearfix" ng-if="isValidateCodeLogin">\n        <div>\n          <script type="text/javascript" load-script ng-src="{{validateCodeUrl}}"></script>\n        </div>\n        <!-- <label class="input-label mid" for="validateCode">验证码</label>&nbsp;\n        <div class = "input-group" style = "display:inline-block;">\n          <input name="validateCode" id="validateCode" ng-model="user.validateCode" style="width: 100px; font-weight: bold; display: inline-block; height: 32px;" type="text" ng-keyup="$event.keyCode == 13 ? login() : null" add-class>\n        </div>&nbsp;\n        <img class="mid validateCode" onclick="$(\'.validateCodeRefresh\').click();" ng-src="{{validateCodeSrc}}">&nbsp;\n        <a class="mid validateCodeRefresh" onclick="$(\'.validateCode\').attr(\'src\', PREFIX_URL + \'servlet/validateCodeServlet?\'+new Date().getTime());" href="javascript:">看不清楚</a> -->\n      </div>\n      <div class="login-form-action clearfix">\n        <div class = "pull-left" style="display:none">\n          <!-- <a ng-click = "openRegister()"><ins>还没注册？</ins></a> -->\n          <input style="margin-top:0px;"  name="rememberMe" ng-model="user.rememberMe" type="checkbox" value="true" />&nbsp;记住密码\n        </div>\n        <div class = "pull-right">\n          <!-- <a ng-click = "showLogin = false;"><ins>忘记密码?</ins></a>\n          <a ng-click = "rotate(showLogin)"><ins>忘记密码？</ins></a> -->\n        </div>\n      </div>\n      <!-- <div class="forget login-form-action"><input style="margin-top:0px;"  name="rememberMe" ng-model="user.rememberMe" type="checkbox" value="true" />&nbsp;记住密码</div> -->\n      <div class="login-form-action clearfix">\n        <button type="button" class="btn btn-success pull-left blue-btn" ng-click="login()">登录</button>\n        <button type="button" class="btn btn-success pull-right reset-btn" ng-click="openRegister()">注册</button>\n    <!--<button type="button" class="btn btn-success pull-right reset-btn" ng-click="openRegister()">注册</button>\n-->   </div>\n      <div class="login-form-action clearfix third-party" style="line-height:30px;display:none;">\n        <span>第三方账号登录</span>\n        <a ng-href="{{weiChatUrl}}" class="wx_login"><span class="wx_title"></span></a>\n        <a ng-href="{{qqUrl}}" class="qq_login"><span class="qq_title"></span></a>\n        <!-- <a ng-href="{{weiboUrl}}" class="weibo_login"><span class="weibo_title"></span></a> -->\n      </div>\n    </form>\n    <form class = "retrieveForm" ng-show = "!showLogin && !sendPassword" novalidate>\n      <div class = "section-title">\n        <h3>找回密码</h3>\n      </div>\n      <div class="error-wrap">\n        <div class="alert alert-danger" role="alert" ng-show="retrieveError">\n            {{retrieveError}}\n        </div>\n      </div>\n      <div class="textbox-wrap">\n        <div class="input-group">\n          <span class="input-group-addon "><i class="fa fa-envelope"></i></span>\n          <input class = "form-control" id = "retrieveUsername" name="userEmail" placeholder="邮箱 " type="text" ng-model="retrieve.email" ng-keyup="$event.keyCode == 13 ? retrievePassword() : null" required autofocus add-class/>\n        </div>\n      </div>\n      <!-- <div class="textbox-wrap validate">\n        <label class="input-label mid" for="validateCode">验证码</label>&nbsp;\n        <div class = "input-group" style = "display:inline-block;">\n          <input name="validateCode" id="retrieveretrieveValidateCode" ng-model="retrieveretrieve.validateCode" style="width: 100px; font-weight: bold; display: inline-block; height: 32px;" type="text" ng-keyup="$event.keyCode == 13 ? retrieveretrievePassword() : null" add-class>\n        </div>&nbsp;\n        <img class="mid validateCode" onclick="$(\'.validateCodeRefresh\').click();" ng-src="{{validateCodeSrc}}">&nbsp;\n        <a class="mid validateCodeRefresh" onclick="$(\'.validateCode\').attr(\'src\', PREFIX_URL + \'servlet/validateCodeServlet?\'+new Date().getTime());" href="javascript:">看不清楚</a>\n      </div> -->\n      <div class="login-form-action clearfix">\n        <div>\n          <script type="text/javascript" load-script ng-src="{{validateCodeUrl}}"></script>\n        </div>\n        <div class = "pull-right" style = "padding-top: 5px;">\n          <a ng-click = "rotate(showLogin)"><ins>我想起来了</ins></a>\n        </div>\n      </div>\n      <div class="login-form-action clearfix">\n        <button type="button" class="btn btn-success pull-left blue-btn" ng-click="retrievePassword()">找回密码</button>\n        <button type="button" class="btn btn-success pull-right reset-btn" ng-click="reset()">重置</button>\n      </div>\n    </form>\n    <div ng-show = "sendPassword" class = "section-title text-center">\n        <h3>恭喜你，找回密码成功。</h3>\n    </div>\n    <div class = "send_email" ng-show = "sendPassword">\n      重置密码的链接已发送到你的 {{retrieve.email}}邮箱，登录邮箱重置密码吧！\n    </div>\n    <div class = "login-form-tip" ng-show = "!sendPassword && !unExist">\n      <h6>为了获得更好的使用，建议使用谷歌浏览器（chrome）、360浏览器、IE11浏览器。</h6>\n    </div>\n  </div>\n</div>');
}]),n.module("security/login/reset.tpl.html",[]).run(["$templateCache",function(e){e.put("security/login/reset.tpl.html",'<!-- <div class="modal-header">\n    <span class="glyphicon glyphicon-exclamation-sign"></span>\n    <span>修改密码</span>\n</div>\n<form name="resetForm" novalidate class="login-form">\n    <div class="login_form">\n        <div class="alert alert-warning" role="alert" ng-show="authReason">\n            {{authReason}}\n        </div>\n        <div class="alert alert-danger" role="alert" ng-show="authError">\n            {{authError}}\n        </div>\n        <div class="input-wrap">\n            <input name="oldPassword" placeholder="旧密码 " type="password" ng-model="password.old" required autofocus>            \n        </div>\n        \n        <div class="input-wrap">\n            <input name="newPassword" placeholder="新密码" type="password" ng-model="password.newPw" required equals="{{password.confirm}}">\n        </div>\n\n        <div class="input-wrap">\n            <input name="confirmPassword" placeholder="重复密码" type="password" ng-model="password.confirm" required equals="{{password.newPw}}">\n        </div>\n        <div class="modal-footer">\n            <div class="btn-main" ng-click="reset()" ng-disabled=\'form.$invalid\'>确&nbsp;&nbsp;定</div>\n            <div class="btn-grey0" ng-click="cancel()" ng-disabled=\'form.$invalid\'>取&nbsp;&nbsp;消</div>\n        </div>\n    </div>\n</form>\n -->\n<div class = "login-form-section">\n  <div class = "login-content">\n    <form class = "loginForm" novalidate>\n      <div class = "section-title">\n        <h3>重设密码</h3>\n      </div>\n      <div class="error-wrap">\n        <div class="alert alert-danger" role="alert" ng-show="authReason">\n            {{authReason}}\n        </div>\n        <div class="alert alert-danger" role="alert" ng-show="authError">\n            {{authError}}\n        </div>\n      </div>\n      <div class="textbox-wrap">\n        <div class="input-group">\n          <span class="input-group-addon "><i class="fa fa-key"></i></span>\n          <input class = "form-control" name="pass" placeholder="新密码" type="password" ng-model="password.newPw" ng-keyup="$event.keyCode == 13 ? reset() : null" required add-class/>\n        </div>\n      </div>\n      <div class="textbox-wrap">\n        <div class="input-group">\n          <span class="input-group-addon "><i class="fa fa-key"></i></span>\n          <input class = "form-control" name="confirmPassword" placeholder="确认密码" type="password" ng-model="password.confirm" ng-keyup="$event.keyCode == 13 ? reset() : null" required add-class/>\n        </div>\n      </div>\n      <div class="login-form-action clearfix">\n        <button type="button" class="btn btn-success pull-left blue-btn" ng-click="reset()">确认</button>\n        <button type="button" class="btn btn-success pull-right reset-btn" ng-click="cancel()">取消</button>\n      </div>\n    </form>\n    <div class = "login-form-tip">\n      <h6>为了获得更好的使用，建议使用谷歌浏览器（chrome）、360浏览器、IE11浏览器。</h6>\n    </div>\n  </div>\n</div>')}]),n.module("security/login/toolbar.tpl.html",[]).run(["$templateCache",function(e){e.put("security/login/toolbar.tpl.html",'<ul class="nav pull-right" style="margin-right:0px;display:none;"><!-- \n    <li class="divider-vertical" ng-click="goCats =!goCats" ></li> -->\n    <li class="" style="width:150px;margin-top:-2px;cursor:pointer;" ng-show="sendXd.state"></li>\n    <li class="mes_con dropdown-toggle">\n        <a class = "mes_content" style ="position: relative;" href="" title="消息中心"  data-toggle = "dropdown" ng-click = "openMsgPanel()">消息中心      \n        </a>\n        <span class = "mes_count" ng-if = "newMsgCount">{{newMsgCount}}</span>\n        <div class="dropdown-menu msg_pannel" role="menu" forbidden-close>\n            <div class = "clearfix">\n                <div class = "panel_title pull-left">\n                您有<span class = "mes_new">{{count}}</span>新消息\n            </div>\n            <div class = "panel_title text-right" style = "margin-left:0px;">\n                <a ng-click = "setRead()" ng-if = "false">设为已读消息</a>\n            </div>\n            </div>\n            <div class = "panel_content head_list_newMsg" ng-class = "{content_status_new: newMsg.status == 1,content_status_yidu: newMsg.status == 2}" ng-repeat = "newMsg in newMsgs"><a href="#/usercenter/message" ng-bind-html="newMsg.content"></a></div>\n            <div class = "panel_more text-center">\n                <a href="#/usercenter/message">查看全部消息 >></a>\n            </div>\n        </div>\n    </li>\n    <!-- <li class="mes_con">\n        <div style="height:200px;" class="head_hover">\n            <div class="vip_c"><span style="text-align:center;"><img ng-src="{{headImg ||(PREFIX_FILE_HOST + currentUser.headImg)}}" style = "width: 30px; height: 30px;"/></span><span class="vip_po" style = "top:0px;" ng-show = "isVendorUser"></span></div>\n        </div>\n    </li> -->\n    <li ng-show="isAuthenticated()" class="custom_img">\n        <div style="height:200px;" class="head_hover" ng-mouseover="showCode = true" ng-mouseleave="showCode = false"><!-- <span>{{currentUser.loginName}}</span> -->\n            <div class="vip_c"><span style="text-align:right;"><img ng-src="{{headImg ||(PREFIX_FILE_HOST + currentUser.headImg)}}" style = "width: 30px; height: 30px;"/></span><span class="vip_po" style = "top:0px;" ng-show = "isVendorUser"></span></div>\n            <div class="head_click" style="z-index:10000;" ng-show="showCode == true"> \n                <div><a href = "#/usercenter/userinfo">用户中心</a></div>\n                <div><a href = "#/usercenter/xd">我的积分</a></div>\n                <div><a href = "#/usercenter/reset">修改密码</a></div>\n                <div><a ng-click="logout()">退出</a></div> \n            </div>\n        </div>\n    </li>\n</ul>  ')}]),n.module("security/register/otherregister.tpl.html",[]).run(["$templateCache",function(e){e.put("security/register/otherregister.tpl.html",'<form name="formName" novalidate class="login-form">\n    <div class = "text-center">\n        <div style = "position: relative; top: 0px; font-size: 15px;">第三方账号已授权</div>\n        <div style = "margin-top: 15px;">欢迎您&nbsp;<code>{{otherUserInfo.nickname}}</code>&nbsp;<img ng-src = "{{otherUserInfo.figureUrl}}"/>，完善以下信息，就可以使用我们的服务!</div>\n    </div>\n    <div class="login_form">\n        <div class="alert alert-danger" role="alert" ng-show="regErr">\n            {{regErr}}\n        </div>\n\n        <div class="input-wrap">\n            <input name="userEmail" placeholder="邮箱 " type="email" ng-model="user.email" ng-keyup="$event.keyCode == 13 ? fullfil() : null"  required autofocus>       \n        </div>\n        \n        <div class="input-wrap">\n            <input name="pass" placeholder="密码" type="password" ng-model="user.password" ng-keyup="$event.keyCode == 13 ? fullfil() : null" required>\n        </div>\n\n        <div class="input-wrap">\n            <input name="repeatPass" placeholder="确认密码" type="password" ng-model="user.repeatPassword" ng-keyup="$event.keyCode == 13 ? fullfil() : null" required>\n        </div>\n\n        <div class="checkbox">\n          <label>\n            <input type="checkbox" ng-model = "user.agreement"> 我已阅读并同意<a href="#/agreement" target = "_blank">《一秀用户注册协议》</a>\n          </label>\n        </div>\n\n        <div class="login-btn btn-main" ng-click="fullfil()" ng-disabled=\'form.$invalid\'>完&nbsp;&nbsp;善</div>\n        \n    </div>\n</form>\n    \n')}]),n.module("security/register/register.tpl.html",[]).run(["$templateCache",function(e){e.put("security/register/register.tpl.html",'<div class = "login-form-section">\n  <div class = "login-content">\n    <form novalidate>\n      <div class = "section-title">\n        <h3>注册</h3>\n      </div>\n      <div class="error-wrap">\n        <div class="alert alert-danger" role="alert" ng-show="regErr">\n            {{regErr}}\n        </div>\n      </div>\n      <div class="textbox-wrap">\n        <div class="input-group">\n          <span class="input-group-addon "><i class="fa fa-user"></i></span>\n          <input class = "form-control" id = "username1" name="userEmail" placeholder="邮箱 " type="text" ng-model="user.email" ng-keyup="$event.keyCode == 13 ? register() : null" ng-blur="checkUpperCase();" required autofocus add-class/>\n        </div>\n      </div>\n      <div class="textbox-wrap">\n        <div class="input-group">\n          <span class="input-group-addon "><i class="fa fa-key"></i></span>\n          <input class = "form-control" name="pass" placeholder="密码" type="password" ng-model="user.password" ng-keyup="$event.keyCode == 13 ? register() : null" required add-class/>\n        </div>\n      </div>\n      <div class="textbox-wrap">\n        <div class="input-group">\n          <span class="input-group-addon "><i class="fa fa-key"></i></span>\n          <input class = "form-control" name="repeatPass" placeholder="确认密码" type="password" ng-model="user.repeatPassword" ng-keyup="$event.keyCode == 13 ? register() : null" required add-class/>\n        </div>\n      </div>\n      <div class="login-form-action clearfix">\n        <div class="checkbox pull-left">\n          <div class="custom-checkbox">\n            <div class="icheckbox_square-blue" ng-class = "{checked: user.agreement == true, hover: user.agreement == false && hovered == true}" style="position: relative;"><input type="checkbox" ng-mouseenter = "hovered = true;" ng-mouseleave = "hovered = false;" ng-model = "user.agreement" name="iCheck" style="position: absolute; top: -20%; left: -20%; display: block; width: 140%; height: 140%; margin: 0px; padding: 0px; border: 0px; opacity: 0; background: rgb(255, 255, 255);"><!-- <ins class="iCheck-helper" style="position: absolute; top: -20%; left: -20%; display: block; width: 140%; height: 140%; margin: 0px; padding: 0px; border: 0px; opacity: 0; background: rgb(255, 255, 255);"></ins> --></div>\n          </div>\n          <span class="checkbox-text pull-left">&nbsp;我已阅读并同意<a href="#/agreement" target = "_blank">《一秀用户注册协议》</a></span>\n        </div>\n        <div class = "checkbox pull-right">\n          <a ng-click = "openLogin()"><ins>已有账户?</ins></a>\n        </div>\n      </div>\n      <div class = "login-form-action clearfix">\n        <button type="submit" ng-click="register()" class="btn btn-success pull-left blue-btn">注册</button>\n        <button type="button" ng-click="openLogin()" class="btn btn-success pull-right reset-btn">登录</button>\n      </div>\n      <div ng-show="false" class="login-form-action clearfix third-party" style="line-height:30px;">\n        <span>第三方账号登录</span>\n        <a ng-href="{{weiChatUrl}}" class="wx_login"><span class="wx_title"></span></a>\n        <a href="{{qqUrl}}" class="qq_login"><span class="qq_title"></span></a>\n        <!-- <a ng-href="{{weiboUrl}}" class="weibo_login"><span class="weibo_title"></span></a> -->\n      </div>\n      <div class = "login-form-tip">\n        <h6>为了获得更好的使用，建议使用谷歌浏览器（chrome）、360浏览器、IE11浏览器。</h6>\n      </div>\n    </form>\n  </div>\n</div>')}])}(window,window.angular);